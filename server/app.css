/* Typography System - Multi-font design */
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Geist:wght@400;500;600&display=swap");
@import url("https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&display=swap");

@import "tailwindcss";

/* Custom Theme - Clean Line Design */
@theme {
  /* Typography System */
  --font-display: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  --font-sans: "Geist", -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif;
  --font-mono: "JetBrains Mono", "SF Mono", "Monaco", "Cascadia Code", monospace;
  --font-serif: "Merriweather", "Georgia", "Times New Roman", serif;

  /* Colors */
  --color-brand-500: #2563eb;
  --color-brand-600: #1d4ed8;
  --color-success: #10b981;
  --color-error: #ef4444;
  --color-warning: #f59e0b;
  --color-bg-canvas: #fafafa;
  --color-text-primary: #1f2937;
  --color-text-secondary: #6b7280;
  --color-text-tertiary: #9ca3af;
  --color-border-default: #e5e7eb;
  --color-border-hover: #d1d5db;

  /* Aliases for template compatibility */
  --border-color: #e5e7eb;
  --border-hover: #d1d5db;
  --text-primary: #1f2937;
  --text-secondary: #6b7280;
  --text-tertiary: #9ca3af;
  --accent: #2563eb;
  --accent-hover: #1d4ed8;
  --success: #10b981;
  --error: #ef4444;
  --warning: #f59e0b;
}

@layer components {
  /* Typography */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-display);
    @apply font-semibold tracking-tight;
  }

  h1 { @apply text-4xl leading-tight font-bold; }
  h2 { @apply text-2xl leading-snug font-bold; }
  h3 { @apply text-xl leading-normal font-semibold; }
  h4 { @apply text-lg leading-normal font-semibold; }

  body {
    font-family: var(--font-sans);
    @apply font-normal;
  }

  code, pre, kbd, samp {
    font-family: var(--font-mono);
    @apply text-sm;
  }

  /* Button Components */
  .btn {
    @apply inline-flex items-center gap-2 px-4 py-2 text-sm font-medium;
    @apply border border-[var(--border-color)] bg-white text-[var(--text-primary)];
    @apply cursor-pointer;
    font-family: var(--font-display);
  }

  .btn:hover {
    @apply border-[var(--border-hover)] bg-gray-50;
  }

  .btn-primary {
    @apply inline-flex items-center gap-2 px-4 py-2 text-sm font-medium;
    @apply bg-[var(--accent)] border border-[var(--accent)] text-white;
    @apply cursor-pointer;
    font-family: var(--font-display);
  }

  .btn-primary:hover:not(:disabled) {
    @apply bg-[var(--accent-hover)] border-[var(--accent-hover)];
  }

  .btn-primary:disabled {
    @apply opacity-50 cursor-not-allowed;
  }

  .btn-close {
    @apply p-1 border-0 bg-transparent cursor-pointer;
    @apply text-[var(--text-secondary)];
  }

  .btn-close:hover {
    @apply text-[var(--text-primary)];
  }

  .icon-btn {
    @apply p-1 border-0 bg-transparent cursor-pointer;
    @apply text-[var(--text-tertiary)];
  }

  .icon-btn:hover {
    @apply text-[var(--text-primary)];
  }

  /* Form Components */
  .form-field {
    @apply mb-5;
  }

  .form-label {
    @apply block text-sm font-medium mb-2;
    @apply text-[var(--text-primary)];
  }

  .form-hint {
    @apply block text-xs mt-1.5;
    @apply text-[var(--text-tertiary)];
  }

  .form-input {
    @apply w-full px-3 py-2.5 text-base;
    @apply border border-[var(--border-color)] bg-white;
    @apply text-[var(--text-primary)];
  }

  .form-input:focus {
    @apply outline-2 outline-[var(--accent)] -outline-offset-1 border-transparent;
  }

  /* Card Components */
  .card {
    @apply bg-white border border-[var(--border-color)] p-6;
  }

  .card:hover {
    @apply border-[var(--border-hover)];
  }

  .card-header {
    @apply pb-5 border-b border-[var(--border-color)] mb-5;
  }

  /* Modal Components */
  .modal-backdrop {
    @apply hidden fixed inset-0 bg-black/50 z-50;
    @apply items-center justify-center;
  }

  .modal-backdrop.open {
    @apply flex;
  }

  .modal-content {
    @apply bg-white border border-[var(--border-color)];
    @apply w-full max-w-[480px] m-4 max-h-[calc(100vh-2rem)];
    @apply overflow-y-auto;
  }

  .modal-header {
    @apply p-6 border-b border-[var(--border-color)];
    @apply flex items-center justify-between;
  }

  .modal-header h3 {
    @apply text-lg font-semibold m-0;
    @apply text-[var(--text-primary)];
  }

  .modal-body {
    @apply p-6;
  }

  .modal-footer {
    @apply p-6 border-t border-[var(--border-color)];
    @apply flex gap-3 justify-end;
  }

  /* Alert/Notification Components */
  .alert {
    @apply px-4 py-3 mb-5 border text-sm;
    @apply flex items-center gap-2;
  }

  .alert-success {
    @apply bg-green-50 border-green-300 text-green-800;
  }

  .alert-error {
    @apply bg-red-50 border-red-300 text-red-800;
  }

  .alert-warning {
    @apply bg-amber-50 border-amber-300 text-amber-800;
  }

  .alert-info {
    @apply bg-blue-50 border-blue-300 text-blue-800;
  }

  /* Empty State */
  .empty-state {
    @apply text-center py-16 px-4;
  }

  .empty-icon {
    @apply w-16 h-16 mx-auto mb-4;
    @apply flex items-center justify-center;
    @apply border border-[var(--border-color)];
  }

  .empty-state h3 {
    @apply text-lg font-semibold mb-2 m-0;
    @apply text-[var(--text-primary)];
  }

  .empty-state p {
    @apply text-sm mb-6 max-w-md mx-auto m-0;
    @apply text-[var(--text-secondary)];
  }

  /* Section Label */
  .section-label {
    @apply block text-xs font-semibold uppercase tracking-wide mb-2.5;
    @apply text-[var(--text-tertiary)];
  }

  /* Action Menu */
  .action-menu {
    @apply hidden absolute top-full right-0 mt-1 min-w-[160px];
    @apply bg-white border border-[var(--border-color)] shadow-md z-10;
  }

  .action-menu.open {
    @apply block;
  }

  .action-menu button {
    @apply w-full px-4 py-2.5 text-sm text-left;
    @apply border-0 bg-transparent cursor-pointer;
    @apply text-[var(--text-primary)];
    @apply flex items-center gap-2.5;
  }

  .action-menu button:hover {
    @apply bg-gray-50;
  }

  .action-menu button.danger {
    @apply text-[var(--error)];
  }

  .action-menu button + button {
    @apply border-t border-[var(--border-color)];
  }

  /* Loading Spinner */
  .spinner {
    @apply hidden w-4 h-4 border-2 border-white border-t-transparent rounded-full;
    animation: spin 0.6s linear infinite;
  }

  .htmx-request .spinner {
    @apply inline-block;
  }

  @keyframes spin {
    to { transform: rotate(360deg); }
  }

  /* Layout Components */
  .app-header {
    @apply bg-white border-b border-[var(--border-color)];
    @apply sticky top-0 z-40;
  }

  .header-content {
    @apply max-w-[1200px] mx-auto px-6 py-4;
    @apply flex items-center justify-between;
  }

  .logo-area {
    @apply flex items-center gap-3;
  }

  .logo-icon {
    @apply w-8 h-8 border border-[var(--border-color)];
    @apply flex items-center justify-center;
  }

  .logo-text h1 {
    @apply text-lg font-semibold m-0 leading-tight;
    @apply text-[var(--text-primary)];
  }

  .logo-text p {
    @apply text-xs m-0;
    @apply text-[var(--text-tertiary)];
  }

  .header-actions {
    @apply flex gap-2;
  }

  .main-content {
    @apply max-w-[1200px] mx-auto px-6 py-8;
  }

  .page-header {
    @apply mb-8 flex justify-between items-start gap-4;
  }

  .page-header h2 {
    @apply text-2xl font-semibold m-0 mb-1;
    @apply text-[var(--text-primary)];
  }

  .page-header p {
    @apply text-sm m-0;
    @apply text-[var(--text-secondary)];
  }

  .app-footer {
    @apply border-t border-[var(--border-color)] p-6 text-center mt-16;
  }

  .app-footer p {
    @apply text-sm m-0;
    @apply text-[var(--text-tertiary)];
  }

  /* Vault Components */
  .vault-grid {
    @apply grid grid-cols-1 lg:grid-cols-2 gap-6;
  }

  .vault-card {
    @apply bg-white border border-[var(--border-color)] p-6;
    @apply transition-colors duration-150;
  }

  .vault-card:hover {
    @apply border-[var(--border-hover)];
  }

  .vault-header {
    @apply pb-5 border-b border-[var(--border-color)] mb-5;
    @apply flex justify-between items-start gap-4;
  }

  .vault-section {
    @apply mb-5;
  }

  .vault-section:last-child {
    @apply mb-0;
  }

  .sync-key-box {
    @apply bg-gray-50 border border-[var(--border-color)] p-3.5;
  }

  .sync-key-value {
    font-family: var(--font-mono);
    @apply text-xs break-all select-all;
    @apply text-[var(--text-primary)];
  }

  .warning-box {
    @apply px-3 py-3 border border-amber-400 bg-amber-50;
    @apply text-xs text-amber-800;
    @apply flex items-center gap-2;
  }

  /* Document List */
  .doc-list {
    @apply flex flex-col gap-2;
  }

  .doc-item {
    @apply block px-5 py-4 border border-[var(--border-color)];
    @apply bg-white no-underline;
    @apply text-[var(--text-primary)];
  }

  .doc-item:hover {
    @apply border-[var(--border-hover)] bg-gray-50;
  }

  .doc-item-content {
    @apply flex justify-between items-center gap-4;
  }

  .doc-info {
    @apply flex-1 min-w-0;
  }

  .doc-title {
    @apply text-base font-medium m-0 mb-1;
    @apply text-[var(--text-primary)];
    @apply overflow-hidden text-ellipsis whitespace-nowrap;
  }

  .doc-meta {
    @apply text-xs m-0;
    @apply text-[var(--text-tertiary)];
  }

  .doc-arrow {
    @apply flex-shrink-0;
    @apply text-[var(--text-tertiary)];
  }

  .home-page-select {
    @apply w-full px-2.5 py-2 text-sm;
    @apply border border-[var(--border-color)] bg-white cursor-pointer;
    @apply text-[var(--text-primary)];
  }

  .home-page-select:focus {
    @apply outline-2 outline-[var(--accent)] -outline-offset-1 border-transparent;
  }

  /* Auth Pages */
  body.auth-page {
    @apply bg-gray-50 min-h-screen;
    @apply flex items-center justify-center p-4;
  }

  body.vaults-page {
    @apply bg-gray-50 min-h-screen;
  }

  /* Login Page */
  .login-container {
    @apply w-full max-w-md;
    @apply bg-white border border-[var(--border-color)];
  }

  .login-header {
    @apply px-8 pt-8 pb-6 border-b border-[var(--border-color)];
  }

  .login-body {
    @apply p-8;
  }

  .login-container .form-field {
    @apply mb-6;
  }

  .login-container .btn-primary {
    @apply w-full;
  }

  /* Init Page */
  .init-container {
    @apply w-full max-w-[480px];
    @apply bg-white border border-[var(--border-color)];
  }

  .init-header {
    @apply px-8 pt-8 pb-6 border-b border-[var(--border-color)];
  }

  .init-body {
    @apply p-8;
  }

  .init-container .form-field {
    @apply mb-6;
  }

  .init-container .btn-primary {
    @apply w-full flex items-center justify-center gap-2;
  }

  .welcome-icon {
    @apply w-12 h-12 mx-auto mb-4;
    @apply flex items-center justify-center;
    @apply border border-[var(--border-color)];
  }

  /* Frontend Home Page */
  .site-container {
    @apply max-w-[900px] mx-auto px-6 py-12;
  }

  .site-header {
    @apply pb-8 border-b border-[var(--border-color)] mb-8;
  }

  .site-title {
    @apply text-4xl font-semibold m-0 mb-2 leading-tight;
    @apply text-[var(--text-primary)];
  }

  .site-domain {
    @apply text-sm m-0;
    @apply text-[var(--text-secondary)];
  }

  .section-title {
    @apply text-xl font-semibold m-0 mb-6;
    @apply text-[var(--text-primary)];
  }

  /* HTMX Loading States */
  .htmx-indicator,
  .create-spinner,
  .edit-spinner {
    @apply hidden;
  }

  .htmx-request .htmx-indicator,
  .htmx-request.htmx-indicator,
  .htmx-request .create-spinner,
  .htmx-request .edit-spinner {
    @apply inline-flex;
  }

  .htmx-request .delete-text,
  .htmx-request .submit-text {
    @apply hidden;
  }

  #vault-list {
    @apply transition-opacity duration-150;
  }

  .htmx-swapping #vault-list {
    @apply opacity-0;
  }

  .htmx-settling #vault-list {
    @apply opacity-100;
  }
}

/* Font rendering optimization */
body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}
