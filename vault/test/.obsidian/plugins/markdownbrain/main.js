/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MarkdownBrainPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  serverUrl: "https://api.markdownbrain.com",
  syncKey: "",
  autoSync: true
};
var SyncManager = class {
  constructor(config) {
    this.config = config;
  }
  updateConfig(config) {
    this.config = config;
  }
  async testConnection(timeout = 3e4) {
    try {
      const controller = new AbortController();
      const timeoutId = setTimeout(() => controller.abort(), timeout);
      const response = await (0, import_obsidian.requestUrl)({
        url: `${this.config.serverUrl}/obsidian/vault/info`,
        method: "GET",
        headers: {
          "Authorization": `Bearer ${this.config.syncKey}`
        },
        throw: false
      });
      clearTimeout(timeoutId);
      if (response.status === 200) {
        const data = response.json;
        return {
          success: true,
          vaultInfo: data.vault
        };
      } else {
        return {
          success: false,
          error: `HTTP ${response.status}: ${response.text || "Unknown error"}`
        };
      }
    } catch (error) {
      if ((error == null ? void 0 : error.name) === "AbortError") {
        return {
          success: false,
          error: "\u8FDE\u63A5\u8D85\u65F6\uFF0830\u79D2\uFF09"
        };
      }
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error"
      };
    }
  }
  async sync(data) {
    var _a, _b;
    console.log("[MarkdownBrain] Starting sync:", {
      path: data.path,
      action: data.action,
      hasContent: !!data.content,
      contentLength: (_a = data.content) == null ? void 0 : _a.length,
      serverUrl: this.config.serverUrl,
      hasSyncKey: !!this.config.syncKey
    });
    try {
      const requestBody = JSON.stringify(data);
      console.log("[MarkdownBrain] Request body size:", requestBody.length, "bytes");
      const response = await (0, import_obsidian.requestUrl)({
        url: `${this.config.serverUrl}/obsidian/sync`,
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${this.config.syncKey}`
        },
        body: requestBody,
        throw: false
      });
      console.log("[MarkdownBrain] Response:", {
        status: response.status,
        statusText: response.status,
        headers: response.headers,
        bodyPreview: (_b = response.text) == null ? void 0 : _b.substring(0, 200)
      });
      if (response.status === 200) {
        console.log("[MarkdownBrain] \u2713 Sync successful:", data.path);
        return { success: true };
      } else {
        const errorMsg = `HTTP ${response.status}: ${response.text || "Sync failed"}`;
        console.error("[MarkdownBrain] \u2717 Sync failed:", {
          path: data.path,
          status: response.status,
          error: errorMsg,
          responseBody: response.text
        });
        return {
          success: false,
          error: errorMsg
        };
      }
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 Sync exception:", {
        path: data.path,
        error,
        errorMessage: error instanceof Error ? error.message : "Unknown error",
        errorStack: error instanceof Error ? error.stack : void 0
      });
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error"
      };
    }
  }
  /**
   * 全量同步 - 清理孤儿文档
   * @param clientIds 客户端所有文档的 client_ids 列表
   * @returns 包含删除数量的响应
   * @complexity O(1) - 单次网络请求
   * @compatibility 降级处理 - 如果服务器返回 404，视为成功（旧服务器）
   */
  async fullSync(clientIds) {
    console.log("[MarkdownBrain] Starting full sync...", {
      clientDocCount: clientIds.length
    });
    try {
      const requestBody = { clientIds };
      const response = await (0, import_obsidian.requestUrl)({
        url: `${this.config.serverUrl}/obsidian/sync/full`,
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${this.config.syncKey}`
        },
        body: JSON.stringify(requestBody),
        throw: false
      });
      if (response.status === 404) {
        console.warn("[MarkdownBrain] Full sync not supported by server (404), skipping orphan cleanup");
        return {
          success: true,
          data: {
            "vault-id": "",
            action: "full-sync",
            "client-docs": clientIds.length,
            "deleted-count": 0,
            "remaining-docs": clientIds.length
          }
        };
      }
      if (response.status === 200) {
        const data = response.json;
        console.log("[MarkdownBrain] \u2713 Full sync successful:", {
          deletedCount: data["deleted-count"],
          remainingDocs: data["remaining-docs"]
        });
        return {
          success: true,
          data
        };
      } else {
        const errorMsg = `HTTP ${response.status}: ${response.text || "Full sync failed"}`;
        console.error("[MarkdownBrain] \u2717 Full sync failed:", {
          status: response.status,
          error: errorMsg
        });
        return {
          success: false,
          error: errorMsg
        };
      }
    } catch (error) {
      const errorMsg = error instanceof Error ? error.message : "Unknown error";
      console.error("[MarkdownBrain] \u2717 Full sync exception:", {
        error: errorMsg
      });
      return {
        success: false,
        error: errorMsg
      };
    }
  }
  destroy() {
  }
};
var MarkdownBrainPlugin = class extends import_obsidian.Plugin {
  // 跟踪待同步的文件
  constructor(app, manifest) {
    super(app, manifest);
    this.syncDebounceTimers = /* @__PURE__ */ new Map();
    this.pendingSyncs = /* @__PURE__ */ new Set();
  }
  // 生成客户端 ID（基于路径的 SHA-256 hash）
  async generateClientId(path) {
    const encoder = new TextEncoder();
    const data = encoder.encode(path);
    const hashBuffer = await crypto.subtle.digest("SHA-256", data);
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    const hashHex = hashArray.map((b) => b.toString(16).padStart(2, "0")).join("");
    return `${hashHex.substring(0, 8)}-${hashHex.substring(8, 12)}-${hashHex.substring(12, 16)}-${hashHex.substring(16, 20)}-${hashHex.substring(20, 32)}`;
  }
  // 标准化 Obsidian 链接路径
  normalizeLinkPath(link) {
    let path = link.split("#")[0].split("^")[0];
    if (!path.includes(".")) {
      path = path + ".md";
    }
    return path;
  }
  // 判断是否是媒体文件
  isMediaFile(path) {
    const mediaExtensions = [
      // 图片
      ".png",
      ".jpg",
      ".jpeg",
      ".gif",
      ".bmp",
      ".svg",
      ".webp",
      // 视频
      ".mp4",
      ".webm",
      ".ogv",
      ".mov",
      ".mkv",
      // 音频
      ".mp3",
      ".wav",
      ".m4a",
      ".ogg",
      ".3gp",
      ".flac",
      // 其他
      ".pdf"
    ];
    const ext = path.substring(path.lastIndexOf(".")).toLowerCase();
    return mediaExtensions.includes(ext);
  }
  // 获取媒体文件类型
  getMediaType(path) {
    const ext = path.substring(path.lastIndexOf(".")).toLowerCase();
    const imageExts = [".png", ".jpg", ".jpeg", ".gif", ".bmp", ".svg", ".webp"];
    const videoExts = [".mp4", ".webm", ".ogv", ".mov", ".mkv"];
    const audioExts = [".mp3", ".wav", ".m4a", ".ogg", ".3gp", ".flac"];
    if (imageExts.includes(ext)) return "image";
    if (videoExts.includes(ext)) return "video";
    if (audioExts.includes(ext)) return "audio";
    if (ext === ".pdf") return "pdf";
    return "other";
  }
  async onload() {
    var _a;
    console.log("[MarkdownBrain] ========================================");
    console.log("[MarkdownBrain] Plugin loading...");
    await this.loadSettings();
    console.log("[MarkdownBrain] Settings loaded:", {
      serverUrl: this.settings.serverUrl,
      hasSyncKey: !!this.settings.syncKey,
      syncKeyLength: (_a = this.settings.syncKey) == null ? void 0 : _a.length,
      autoSync: this.settings.autoSync
    });
    this.syncManager = new SyncManager({
      serverUrl: this.settings.serverUrl,
      syncKey: this.settings.syncKey
    });
    console.log("[MarkdownBrain] SyncManager initialized");
    this.registerEvent(
      this.app.vault.on("create", (file) => {
        if (file instanceof import_obsidian.TFile && file.extension === "md") {
          this.handleFileChange(file, "create");
        }
      })
    );
    console.log("[MarkdownBrain] Registered event: file create");
    this.registerEvent(
      this.app.vault.on("modify", (file) => {
        if (file instanceof import_obsidian.TFile && file.extension === "md") {
          this.pendingSyncs.add(file.path);
        }
      })
    );
    console.log("[MarkdownBrain] Registered event: file modify");
    this.registerEvent(
      this.app.metadataCache.on("resolved", () => {
        for (const filePath of this.pendingSyncs) {
          const file = this.app.vault.getAbstractFileByPath(filePath);
          if (file instanceof import_obsidian.TFile) {
            this.handleFileChange(file, "modify");
          }
        }
        this.pendingSyncs.clear();
      })
    );
    console.log("[MarkdownBrain] Registered event: metadata resolved");
    this.registerEvent(
      this.app.vault.on("delete", (file) => {
        if (file instanceof import_obsidian.TFile && file.extension === "md") {
          this.handleFileDelete(file);
        }
      })
    );
    console.log("[MarkdownBrain] Registered event: file delete");
    this.registerEvent(
      this.app.vault.on("rename", (file, oldPath) => {
        if (file instanceof import_obsidian.TFile && file.extension === "md") {
          this.handleFileRename(file, oldPath);
        }
      })
    );
    console.log("[MarkdownBrain] Registered event: file rename");
    this.addSettingTab(new MarkdownBrainSettingTab(this.app, this));
    console.log("[MarkdownBrain] Settings tab added");
    this.addCommand({
      id: "sync-current-file",
      name: "Sync current file",
      callback: () => {
        const file = this.app.workspace.getActiveFile();
        if (file) {
          this.handleFileChange(file, "modify");
        }
      }
    });
    this.addCommand({
      id: "sync-all-files",
      name: "Sync all files",
      callback: () => {
        this.syncAllFiles();
      }
    });
    console.log("[MarkdownBrain] Commands registered");
    console.log("[MarkdownBrain] \u2713 Plugin loaded successfully");
    console.log("[MarkdownBrain] ========================================");
  }
  async handleFileChange(file, action) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping:", file.path);
      return;
    }
    const existingTimer = this.syncDebounceTimers.get(file.path);
    if (existingTimer) {
      clearTimeout(existingTimer);
    }
    const timer = setTimeout(async () => {
      this.syncDebounceTimers.delete(file.path);
      await this.performSync(file, action);
    }, 300);
    this.syncDebounceTimers.set(file.path, timer);
  }
  async performSync(file, action) {
    var _a, _b, _c, _d;
    console.log("[MarkdownBrain] File change detected:", {
      path: file.path,
      action,
      extension: file.extension,
      size: file.stat.size
    });
    try {
      const content = await this.app.vault.read(file);
      console.log("[MarkdownBrain] File read successfully:", {
        path: file.path,
        contentLength: content.length
      });
      const cachedMetadata = this.app.metadataCache.getFileCache(file);
      const metadata = {};
      console.log("[MarkdownBrain] Raw cached metadata:", cachedMetadata);
      if (cachedMetadata) {
        const allLinks = [];
        if (cachedMetadata.links) {
          console.log("[MarkdownBrain] Found", cachedMetadata.links.length, "links in metadata");
          for (const link of cachedMetadata.links) {
            console.log("[MarkdownBrain] Processing link:", link);
            const normalizedPath = this.normalizeLinkPath(link.link);
            console.log("[MarkdownBrain] Normalized path:", normalizedPath);
            const targetClientId = await this.generateClientId(normalizedPath);
            console.log("[MarkdownBrain] Generated targetClientId:", targetClientId);
            const isMedia = this.isMediaFile(normalizedPath);
            const linkData = {
              link: normalizedPath,
              targetClientId,
              original: link.original,
              displayText: link.displayText,
              linkType: "link"
            };
            if (isMedia) {
              linkData.isMedia = true;
              linkData.mediaType = this.getMediaType(normalizedPath);
              console.log("[MarkdownBrain] Media file detected:", linkData.mediaType);
            }
            allLinks.push(linkData);
          }
        }
        if (cachedMetadata.embeds) {
          console.log("[MarkdownBrain] Found", cachedMetadata.embeds.length, "embeds in metadata");
          for (const embed of cachedMetadata.embeds) {
            console.log("[MarkdownBrain] Processing embed:", embed);
            const normalizedPath = this.normalizeLinkPath(embed.link);
            console.log("[MarkdownBrain] Normalized path:", normalizedPath);
            const targetClientId = await this.generateClientId(normalizedPath);
            console.log("[MarkdownBrain] Generated targetClientId:", targetClientId);
            const isMedia = this.isMediaFile(normalizedPath);
            const linkData = {
              link: normalizedPath,
              targetClientId,
              original: embed.original,
              linkType: "embed"
            };
            if (isMedia) {
              linkData.isMedia = true;
              linkData.mediaType = this.getMediaType(normalizedPath);
              console.log("[MarkdownBrain] Media file detected:", linkData.mediaType);
            }
            allLinks.push(linkData);
          }
        }
        if (allLinks.length > 0) {
          metadata.links = allLinks;
          console.log("[MarkdownBrain] Total links to sync:", allLinks.length);
          console.log("[MarkdownBrain] Links data:", JSON.stringify(allLinks, null, 2));
        } else {
          console.log("[MarkdownBrain] No links found in this document");
        }
        if (cachedMetadata.tags) {
          metadata.tags = cachedMetadata.tags.map((tag) => ({
            tag: tag.tag,
            position: tag.position
          }));
        }
        if (cachedMetadata.headings) {
          metadata.headings = cachedMetadata.headings.map((heading) => ({
            heading: heading.heading,
            level: heading.level,
            position: heading.position
          }));
        }
        if (cachedMetadata.frontmatter) {
          metadata.frontmatter = cachedMetadata.frontmatter;
        }
        console.log("[MarkdownBrain] Metadata extracted:", {
          path: file.path,
          linksCount: ((_a = metadata.links) == null ? void 0 : _a.length) || 0,
          tagsCount: ((_b = metadata.tags) == null ? void 0 : _b.length) || 0,
          headingsCount: ((_c = metadata.headings) == null ? void 0 : _c.length) || 0,
          hasFrontmatter: !!metadata.frontmatter
        });
      }
      const stat = file.stat;
      const hash = await this.hashString(content);
      const mtime = new Date(stat.mtime).toISOString();
      const clientId = await this.generateClientId(file.path);
      console.log("[MarkdownBrain] File metadata:", {
        path: file.path,
        clientId,
        hash,
        mtime,
        hasMetadata: !!metadata,
        linksCount: ((_d = metadata.links) == null ? void 0 : _d.length) || 0
      });
      const syncData = {
        path: file.path,
        clientId,
        clientType: "obsidian",
        content,
        hash,
        mtime,
        metadata,
        action
      };
      console.log("[MarkdownBrain] Sync data prepared:");
      console.log("[MarkdownBrain] - Path:", syncData.path);
      console.log("[MarkdownBrain] - ClientId:", syncData.clientId);
      console.log("[MarkdownBrain] - Action:", syncData.action);
      console.log("[MarkdownBrain] - Metadata:", JSON.stringify(syncData.metadata, null, 2));
      const result = await this.syncManager.sync(syncData);
      if (result.success) {
        console.log("[MarkdownBrain] \u2713 File synced successfully:", file.path);
      } else {
        console.error("[MarkdownBrain] \u2717 File sync failed:", file.path, result.error);
        new import_obsidian.Notice(`\u540C\u6B65\u5931\u8D25: ${file.path}
${result.error}`);
      }
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 File change handler error:", {
        path: file.path,
        error,
        errorMessage: error instanceof Error ? error.message : "Unknown error",
        errorStack: error instanceof Error ? error.stack : void 0
      });
      new import_obsidian.Notice(`\u540C\u6B65\u9519\u8BEF: ${error instanceof Error ? error.message : "Unknown error"}`);
    }
  }
  async handleFileDelete(file) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping delete:", file.path);
      return;
    }
    console.log("[MarkdownBrain] File deletion detected:", {
      path: file.path,
      extension: file.extension
    });
    try {
      const clientId = await this.generateClientId(file.path);
      const result = await this.syncManager.sync({
        path: file.path,
        clientId,
        clientType: "obsidian",
        action: "delete"
      });
      if (result.success) {
        console.log("[MarkdownBrain] \u2713 File deletion synced:", file.path);
      } else {
        console.error("[MarkdownBrain] \u2717 File deletion sync failed:", file.path, result.error);
      }
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 Delete sync exception:", {
        path: file.path,
        error,
        errorMessage: error instanceof Error ? error.message : "Unknown error"
      });
    }
  }
  async handleFileRename(file, oldPath) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping rename:", oldPath, "->", file.path);
      return;
    }
    console.log("[MarkdownBrain] File rename detected:", {
      oldPath,
      newPath: file.path,
      extension: file.extension
    });
    try {
      const oldClientId = await this.generateClientId(oldPath);
      console.log("[MarkdownBrain] Deleting old path:", {
        path: oldPath,
        clientId: oldClientId
      });
      const deleteResult = await this.syncManager.sync({
        path: oldPath,
        clientId: oldClientId,
        clientType: "obsidian",
        action: "delete"
      });
      if (!deleteResult.success) {
        console.error("[MarkdownBrain] \u2717 Failed to delete old path:", oldPath, deleteResult.error);
        new import_obsidian.Notice(`\u91CD\u547D\u540D\u540C\u6B65\u5931\u8D25\uFF08\u5220\u9664\u65E7\u6587\u4EF6\uFF09: ${oldPath}
${deleteResult.error}`);
        return;
      }
      console.log("[MarkdownBrain] \u2713 Old path deleted:", oldPath);
      console.log("[MarkdownBrain] Creating new path:", file.path);
      await this.performSync(file, "create");
      console.log("[MarkdownBrain] \u2713 File rename synced:", oldPath, "->", file.path);
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 Rename sync exception:", {
        oldPath,
        newPath: file.path,
        error,
        errorMessage: error instanceof Error ? error.message : "Unknown error"
      });
      new import_obsidian.Notice(`\u91CD\u547D\u540D\u540C\u6B65\u9519\u8BEF: ${error instanceof Error ? error.message : "Unknown error"}`);
    }
  }
  /**
   * 全量同步所有文件
   * @flow 收集 IDs → 清理孤儿 → 增量同步
   * @complexity O(n) where n = 文件数量
   */
  async syncAllFiles() {
    const files = this.app.vault.getMarkdownFiles();
    console.log(`[MarkdownBrain] Starting full sync for ${files.length} files`);
    new import_obsidian.Notice(`\u5F00\u59CB\u5168\u91CF\u540C\u6B65 ${files.length} \u4E2A\u6587\u4EF6...`);
    const clientIds = await this.collectClientIds(files);
    console.log(`[MarkdownBrain] Collected ${clientIds.length} client IDs`);
    await this.cleanupOrphans(clientIds);
    await this.incrementalSyncBatch(files);
  }
  /**
   * 收集所有文件的 client_ids
   * @complexity O(n) time, O(n) space
   */
  async collectClientIds(files) {
    const ids = [];
    for (const file of files) {
      try {
        const content = await this.app.vault.read(file);
        if ((content == null ? void 0 : content.trim().length) > 0) {
          ids.push(await this.generateClientId(file.path));
        }
      } catch (error) {
        console.error(`[MarkdownBrain] Failed to read ${file.path}:`, error);
      }
    }
    return ids;
  }
  /**
   * 清理孤儿文档
   * @complexity O(1) - 单次网络请求
   */
  async cleanupOrphans(clientIds) {
    var _a;
    try {
      const result = await this.syncManager.fullSync(clientIds);
      const deleted = ((_a = result.data) == null ? void 0 : _a["deleted-count"]) || 0;
      if (deleted > 0) {
        console.log(`[MarkdownBrain] \u2713 Cleaned ${deleted} orphan documents`);
        new import_obsidian.Notice(`\u6E05\u7406\u4E86 ${deleted} \u4E2A\u5B64\u513F\u6587\u6863`);
      } else if (result.success) {
        console.log("[MarkdownBrain] \u2713 No orphan documents found");
      }
    } catch (error) {
      console.error("[MarkdownBrain] Full sync error:", error);
    }
  }
  /**
   * 批量增量同步
   * @complexity O(n) with batching
   */
  async incrementalSyncBatch(files) {
    const stats = { success: 0, failed: 0, skipped: 0 };
    const batchSize = 10;
    for (let i = 0; i < files.length; i += batchSize) {
      const batch = files.slice(i, i + batchSize);
      await Promise.all(batch.map((file) => this.syncOneFile(file, stats)));
      const progress = Math.min(i + batchSize, files.length);
      new import_obsidian.Notice(`\u540C\u6B65\u8FDB\u5EA6: ${progress}/${files.length} (\u6210\u529F: ${stats.success}, \u5931\u8D25: ${stats.failed}, \u8DF3\u8FC7: ${stats.skipped})`);
    }
    const finalMsg = `\u540C\u6B65\u5B8C\u6210! \u603B\u8BA1: ${files.length}, \u6210\u529F: ${stats.success}, \u5931\u8D25: ${stats.failed}, \u8DF3\u8FC7: ${stats.skipped}`;
    console.log(`[MarkdownBrain] ${finalMsg}`);
    new import_obsidian.Notice(finalMsg, 8e3);
  }
  /**
   * 同步单个文件
   */
  async syncOneFile(file, stats) {
    try {
      const content = await this.app.vault.read(file);
      await this.performSync(file, "modify");
      stats.success++;
    } catch (error) {
      stats.failed++;
      console.error(`[MarkdownBrain] \u2717 Failed to sync ${file.path}:`, error);
    }
  }
  // MD5 哈希函数（用于检测文件内容变化）
  async hashString(str) {
    const encoder = new TextEncoder();
    const data = encoder.encode(str);
    const hashBuffer = await crypto.subtle.digest("MD5", data).catch(() => {
      return crypto.subtle.digest("SHA-256", data);
    });
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    return hashArray.map((b) => b.toString(16).padStart(2, "0")).join("");
  }
  onunload() {
    console.log("Unloading MarkdownBrain plugin");
    for (const timer of this.syncDebounceTimers.values()) {
      clearTimeout(timer);
    }
    this.syncDebounceTimers.clear();
    this.syncManager.destroy();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.syncManager.updateConfig({
      serverUrl: this.settings.serverUrl,
      syncKey: this.settings.syncKey
    });
  }
};
var MarkdownBrainSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "MarkdownBrain \u540C\u6B65\u8BBE\u7F6E" });
    new import_obsidian.Setting(containerEl).setName("\u670D\u52A1\u5668\u5730\u5740").setDesc("MarkdownBrain \u670D\u52A1\u5668 API \u5730\u5740").addText((text) => text.setPlaceholder("https://api.markdownbrain.com").setValue(this.plugin.settings.serverUrl).onChange(async (value) => {
      this.plugin.settings.serverUrl = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Sync Key").setDesc("\u4ECE\u7BA1\u7406\u540E\u53F0\u83B7\u53D6\u7684\u540C\u6B65\u5BC6\u94A5").addText((text) => text.setPlaceholder("xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx").setValue(this.plugin.settings.syncKey).onChange(async (value) => {
      this.plugin.settings.syncKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\u6D4B\u8BD5\u8FDE\u63A5").setDesc("\u6D4B\u8BD5\u4E0E\u670D\u52A1\u5668\u7684\u8FDE\u63A5\uFF0830\u79D2\u8D85\u65F6\uFF09").addButton((button) => button.setButtonText("\u6D4B\u8BD5").onClick(async () => {
      button.setDisabled(true);
      button.setButtonText("\u6D4B\u8BD5\u4E2D...");
      new import_obsidian.Notice("\u6B63\u5728\u6D4B\u8BD5\u8FDE\u63A5...");
      const result = await this.plugin.syncManager.testConnection(3e4);
      button.setDisabled(false);
      button.setButtonText("\u6D4B\u8BD5");
      if (result.success && result.vaultInfo) {
        new import_obsidian.Notice(
          `\u2705 \u8FDE\u63A5\u6210\u529F\uFF01
Vault: ${result.vaultInfo.name}
Domain: ${result.vaultInfo.domain}`,
          5e3
        );
      } else {
        new import_obsidian.Notice(`\u274C \u8FDE\u63A5\u5931\u8D25: ${result.error || "Unknown error"}`, 5e3);
      }
    }));
    new import_obsidian.Setting(containerEl).setName("\u6279\u91CF\u540C\u6B65").setDesc("\u624B\u52A8\u540C\u6B65\u6240\u6709 Markdown \u6587\u4EF6\u5230\u670D\u52A1\u5668").addButton((button) => button.setButtonText("\u5F00\u59CB\u540C\u6B65").onClick(async () => {
      button.setDisabled(true);
      button.setButtonText("\u540C\u6B65\u4E2D...");
      await this.plugin.syncAllFiles();
      button.setDisabled(false);
      button.setButtonText("\u5F00\u59CB\u540C\u6B65");
    }));
    new import_obsidian.Setting(containerEl).setName("\u81EA\u52A8\u540C\u6B65").setDesc("\u6587\u4EF6\u4FEE\u6539\u65F6\u81EA\u52A8\u540C\u6B65\u5230\u670D\u52A1\u5668").addToggle((toggle) => toggle.setValue(this.plugin.settings.autoSync).onChange(async (value) => {
      this.plugin.settings.autoSync = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vLi4vLi4vb2JzaWRpYW4tcGx1Z2luL21haW4udHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IFBsdWdpbiwgVEZpbGUsIE5vdGljZSwgUGx1Z2luU2V0dGluZ1RhYiwgQXBwLCBTZXR0aW5nLCByZXF1ZXN0VXJsLCBQbHVnaW5NYW5pZmVzdCB9IGZyb20gJ29ic2lkaWFuJztcblxuaW50ZXJmYWNlIE1hcmtkb3duQnJhaW5TZXR0aW5ncyB7XG4gICAgc2VydmVyVXJsOiBzdHJpbmc7XG4gICAgc3luY0tleTogc3RyaW5nO1xuICAgIGF1dG9TeW5jOiBib29sZWFuO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNYXJrZG93bkJyYWluU2V0dGluZ3MgPSB7XG4gICAgc2VydmVyVXJsOiAnaHR0cHM6Ly9hcGkubWFya2Rvd25icmFpbi5jb20nLFxuICAgIHN5bmNLZXk6ICcnLFxuICAgIGF1dG9TeW5jOiB0cnVlXG59O1xuXG4vLyBcdTU0MENcdTZCNjVcdTkxNERcdTdGNkVcbmludGVyZmFjZSBTeW5jQ29uZmlnIHtcbiAgICBzZXJ2ZXJVcmw6IHN0cmluZztcbiAgICBzeW5jS2V5OiBzdHJpbmc7XG59XG5cbi8vIFx1NjU4N1x1Njg2M1x1NTE0M1x1NjU3MFx1NjM2RVxuaW50ZXJmYWNlIERvY3VtZW50TWV0YWRhdGEge1xuICAgIGxpbmtzPzogQXJyYXk8e1xuICAgICAgICBsaW5rOiBzdHJpbmc7ICAgICAgICAgICAgICAvLyBcdTk0RkVcdTYzQTVcdTc2RUVcdTY4MDdcdThERUZcdTVGODRcbiAgICAgICAgdGFyZ2V0Q2xpZW50SWQ6IHN0cmluZzsgICAgLy8gXHU3NkVFXHU2ODA3XHU2NTg3XHU2ODYzXHU3Njg0IGNsaWVudF9pZFxuICAgICAgICBvcmlnaW5hbDogc3RyaW5nOyAgICAgICAgICAvLyBcdTUzOUZcdTU5Q0JcdTY1ODdcdTY3MkNcbiAgICAgICAgZGlzcGxheVRleHQ/OiBzdHJpbmc7ICAgICAgLy8gXHU2NjNFXHU3OTNBXHU2NTg3XHU2NzJDXG4gICAgICAgIGxpbmtUeXBlOiAnbGluaycgfCAnZW1iZWQnOyAvLyBcdTk0RkVcdTYzQTVcdTdDN0JcdTU3OEJcbiAgICAgICAgaXNNZWRpYT86IGJvb2xlYW47ICAgICAgICAgLy8gXHU2NjJGXHU1NDI2XHU2NjJGXHU1QTkyXHU0RjUzXHU2NTg3XHU0RUY2XG4gICAgICAgIG1lZGlhVHlwZT86ICdpbWFnZScgfCAndmlkZW8nIHwgJ2F1ZGlvJyB8ICdwZGYnIHwgJ290aGVyJzsgLy8gXHU1QTkyXHU0RjUzXHU3QzdCXHU1NzhCXG4gICAgfT47XG4gICAgdGFncz86IEFycmF5PHtcbiAgICAgICAgdGFnOiBzdHJpbmc7XG4gICAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgICAgICBzdGFydDogeyBsaW5lOiBudW1iZXI7IGNvbDogbnVtYmVyOyBvZmZzZXQ6IG51bWJlciB9O1xuICAgICAgICAgICAgZW5kOiB7IGxpbmU6IG51bWJlcjsgY29sOiBudW1iZXI7IG9mZnNldDogbnVtYmVyIH07XG4gICAgICAgIH07XG4gICAgfT47XG4gICAgaGVhZGluZ3M/OiBBcnJheTx7XG4gICAgICAgIGhlYWRpbmc6IHN0cmluZztcbiAgICAgICAgbGV2ZWw6IG51bWJlcjtcbiAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICAgIHN0YXJ0OiB7IGxpbmU6IG51bWJlcjsgY29sOiBudW1iZXI7IG9mZnNldDogbnVtYmVyIH07XG4gICAgICAgICAgICBlbmQ6IHsgbGluZTogbnVtYmVyOyBjb2w6IG51bWJlcjsgb2Zmc2V0OiBudW1iZXIgfTtcbiAgICAgICAgfTtcbiAgICB9PjtcbiAgICBmcm9udG1hdHRlcj86IFJlY29yZDxzdHJpbmcsIGFueT47XG59XG5cbi8vIFx1NTQwQ1x1NkI2NVx1NjU3MFx1NjM2RVxuaW50ZXJmYWNlIFN5bmNEYXRhIHtcbiAgICBwYXRoOiBzdHJpbmc7XG4gICAgY2xpZW50SWQ6IHN0cmluZzsgICAgICAgICAgIC8vIFx1NUJBMlx1NjIzN1x1N0FFRlx1NzUxRlx1NjIxMFx1NzY4NFx1NTUyRlx1NEUwMCBJRFxuICAgIGNsaWVudFR5cGU6IHN0cmluZzsgICAgICAgICAvLyBcdTVCQTJcdTYyMzdcdTdBRUZcdTdDN0JcdTU3OEJcdUZGMUEnb2JzaWRpYW4nXG4gICAgY29udGVudD86IHN0cmluZztcbiAgICBoYXNoPzogc3RyaW5nO1xuICAgIG10aW1lPzogc3RyaW5nO1xuICAgIG1ldGFkYXRhPzogRG9jdW1lbnRNZXRhZGF0YTtcbiAgICBhY3Rpb246ICdjcmVhdGUnIHwgJ21vZGlmeScgfCAnZGVsZXRlJztcbn1cblxuLy8gVmF1bHQgXHU0RkUxXHU2MDZGXG5pbnRlcmZhY2UgVmF1bHRJbmZvIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBkb21haW46IHN0cmluZztcbiAgICAnY3JlYXRlZC1hdCc6IHN0cmluZztcbn1cblxuLy8gRnVsbCBTeW5jIFx1OEJGN1x1NkM0MlxuaW50ZXJmYWNlIEZ1bGxTeW5jUmVxdWVzdCB7XG4gICAgY2xpZW50SWRzOiBzdHJpbmdbXTtcbn1cblxuLy8gRnVsbCBTeW5jIFx1NTRDRFx1NUU5NFxuaW50ZXJmYWNlIEZ1bGxTeW5jUmVzcG9uc2Uge1xuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XG4gICAgZGF0YT86IHtcbiAgICAgICAgJ3ZhdWx0LWlkJzogc3RyaW5nO1xuICAgICAgICBhY3Rpb246IHN0cmluZztcbiAgICAgICAgJ2NsaWVudC1kb2NzJzogbnVtYmVyO1xuICAgICAgICAnZGVsZXRlZC1jb3VudCc6IG51bWJlcjtcbiAgICAgICAgJ3JlbWFpbmluZy1kb2NzJzogbnVtYmVyO1xuICAgIH07XG4gICAgZXJyb3I/OiBzdHJpbmc7XG59XG5cbi8vIFx1NTQwQ1x1NkI2NVx1N0VERlx1OEJBMVxuaW50ZXJmYWNlIFN5bmNTdGF0cyB7XG4gICAgc3VjY2VzczogbnVtYmVyO1xuICAgIGZhaWxlZDogbnVtYmVyO1xuICAgIHNraXBwZWQ6IG51bWJlcjtcbn1cblxuLy8gXHU1NDBDXHU2QjY1XHU3QkExXHU3NDA2XHU1NjY4XG5jbGFzcyBTeW5jTWFuYWdlciB7XG4gICAgcHJpdmF0ZSBjb25maWc6IFN5bmNDb25maWc7XG5cbiAgICBjb25zdHJ1Y3Rvcihjb25maWc6IFN5bmNDb25maWcpIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgfVxuXG4gICAgdXBkYXRlQ29uZmlnKGNvbmZpZzogU3luY0NvbmZpZykge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB9XG5cbiAgICBhc3luYyB0ZXN0Q29ubmVjdGlvbih0aW1lb3V0OiBudW1iZXIgPSAzMDAwMCk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyB2YXVsdEluZm8/OiBWYXVsdEluZm87IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgdGltZW91dCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgICAgICAgICAgdXJsOiBgJHt0aGlzLmNvbmZpZy5zZXJ2ZXJVcmx9L29ic2lkaWFuL3ZhdWx0L2luZm9gLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLmNvbmZpZy5zeW5jS2V5fWBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRocm93OiBmYWxzZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuanNvbjtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2YXVsdEluZm86IGRhdGEudmF1bHRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS50ZXh0IHx8ICdVbmtub3duIGVycm9yJ31gXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICAgICAgaWYgKGVycm9yPy5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICdcdThGREVcdTYzQTVcdThEODVcdTY1RjZcdUZGMDgzMFx1NzlEMlx1RkYwOSdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBzeW5jKGRhdGE6IFN5bmNEYXRhKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBTdGFydGluZyBzeW5jOicsIHtcbiAgICAgICAgICAgIHBhdGg6IGRhdGEucGF0aCxcbiAgICAgICAgICAgIGFjdGlvbjogZGF0YS5hY3Rpb24sXG4gICAgICAgICAgICBoYXNDb250ZW50OiAhIWRhdGEuY29udGVudCxcbiAgICAgICAgICAgIGNvbnRlbnRMZW5ndGg6IGRhdGEuY29udGVudD8ubGVuZ3RoLFxuICAgICAgICAgICAgc2VydmVyVXJsOiB0aGlzLmNvbmZpZy5zZXJ2ZXJVcmwsXG4gICAgICAgICAgICBoYXNTeW5jS2V5OiAhIXRoaXMuY29uZmlnLnN5bmNLZXlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFJlcXVlc3QgYm9keSBzaXplOicsIHJlcXVlc3RCb2R5Lmxlbmd0aCwgJ2J5dGVzJyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgICAgICAgICAgdXJsOiBgJHt0aGlzLmNvbmZpZy5zZXJ2ZXJVcmx9L29ic2lkaWFuL3N5bmNgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5jb25maWcuc3luY0tleX1gXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0Qm9keSxcbiAgICAgICAgICAgICAgICB0aHJvdzogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFJlc3BvbnNlOicsIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogcmVzcG9uc2UuaGVhZGVycyxcbiAgICAgICAgICAgICAgICBib2R5UHJldmlldzogcmVzcG9uc2UudGV4dD8uc3Vic3RyaW5nKDAsIDIwMClcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFx1MjcxMyBTeW5jIHN1Y2Nlc3NmdWw6JywgZGF0YS5wYXRoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnRleHQgfHwgJ1N5bmMgZmFpbGVkJ31gO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZG93bkJyYWluXSBcdTI3MTcgU3luYyBmYWlsZWQ6Jywge1xuICAgICAgICAgICAgICAgICAgICBwYXRoOiBkYXRhLnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JNc2csXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlQm9keTogcmVzcG9uc2UudGV4dFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JNc2dcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW01hcmtkb3duQnJhaW5dIFx1MjcxNyBTeW5jIGV4Y2VwdGlvbjonLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogZGF0YS5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFx1NTE2OFx1OTFDRlx1NTQwQ1x1NkI2NSAtIFx1NkUwNVx1NzQwNlx1NUI2NFx1NTEzRlx1NjU4N1x1Njg2M1xuICAgICAqIEBwYXJhbSBjbGllbnRJZHMgXHU1QkEyXHU2MjM3XHU3QUVGXHU2MjQwXHU2NzA5XHU2NTg3XHU2ODYzXHU3Njg0IGNsaWVudF9pZHMgXHU1MjE3XHU4ODY4XG4gICAgICogQHJldHVybnMgXHU1MzA1XHU1NDJCXHU1MjIwXHU5NjY0XHU2NTcwXHU5MUNGXHU3Njg0XHU1NENEXHU1RTk0XG4gICAgICogQGNvbXBsZXhpdHkgTygxKSAtIFx1NTM1NVx1NkIyMVx1N0Y1MVx1N0VEQ1x1OEJGN1x1NkM0MlxuICAgICAqIEBjb21wYXRpYmlsaXR5IFx1OTY0RFx1N0VBN1x1NTkwNFx1NzQwNiAtIFx1NTk4Mlx1Njc5Q1x1NjcwRFx1NTJBMVx1NTY2OFx1OEZENFx1NTZERSA0MDRcdUZGMENcdTg5QzZcdTRFM0FcdTYyMTBcdTUyOUZcdUZGMDhcdTY1RTdcdTY3MERcdTUyQTFcdTU2NjhcdUZGMDlcbiAgICAgKi9cbiAgICBhc3luYyBmdWxsU3luYyhjbGllbnRJZHM6IHN0cmluZ1tdKTogUHJvbWlzZTxGdWxsU3luY1Jlc3BvbnNlPiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gU3RhcnRpbmcgZnVsbCBzeW5jLi4uJywge1xuICAgICAgICAgICAgY2xpZW50RG9jQ291bnQ6IGNsaWVudElkcy5sZW5ndGhcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5OiBGdWxsU3luY1JlcXVlc3QgPSB7IGNsaWVudElkcyB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgICAgICB1cmw6IGAke3RoaXMuY29uZmlnLnNlcnZlclVybH0vb2JzaWRpYW4vc3luYy9mdWxsYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuY29uZmlnLnN5bmNLZXl9YFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpLFxuICAgICAgICAgICAgICAgIHRocm93OiBmYWxzZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFx1NTQxMVx1NTQwRVx1NTE3Q1x1NUJCOVx1RkYxQVx1NjVFN1x1NjcwRFx1NTJBMVx1NTY2OFx1NEUwRFx1NjUyRlx1NjMwMSBmdWxsLXN5bmMgKDQwNClcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwNCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignW01hcmtkb3duQnJhaW5dIEZ1bGwgc3luYyBub3Qgc3VwcG9ydGVkIGJ5IHNlcnZlciAoNDA0KSwgc2tpcHBpbmcgb3JwaGFuIGNsZWFudXAnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAndmF1bHQtaWQnOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ2Z1bGwtc3luYycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnY2xpZW50LWRvY3MnOiBjbGllbnRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RlbGV0ZWQtY291bnQnOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3JlbWFpbmluZy1kb2NzJzogY2xpZW50SWRzLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmpzb247XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBcdTI3MTMgRnVsbCBzeW5jIHN1Y2Nlc3NmdWw6Jywge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVkQ291bnQ6IGRhdGFbJ2RlbGV0ZWQtY291bnQnXSxcbiAgICAgICAgICAgICAgICAgICAgcmVtYWluaW5nRG9jczogZGF0YVsncmVtYWluaW5nLWRvY3MnXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGFcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS50ZXh0IHx8ICdGdWxsIHN5bmMgZmFpbGVkJ31gO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZG93bkJyYWluXSBcdTI3MTcgRnVsbCBzeW5jIGZhaWxlZDonLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JNc2dcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yTXNnXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcic7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbTWFya2Rvd25CcmFpbl0gXHUyNzE3IEZ1bGwgc3luYyBleGNlcHRpb246Jywge1xuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvck1zZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvck1zZ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIC8vIENsZWFudXAgaWYgbmVlZGVkXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXJrZG93bkJyYWluUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgICBzZXR0aW5ncyE6IE1hcmtkb3duQnJhaW5TZXR0aW5ncztcbiAgICBzeW5jTWFuYWdlciE6IFN5bmNNYW5hZ2VyOyAgLy8gXHU2NTM5XHU0RTNBIHB1YmxpY1x1RkYwQ1x1NEY5Qlx1OEJCRVx1N0Y2RVx1OTc2Mlx1Njc3Rlx1NEY3Rlx1NzUyOFxuICAgIHByaXZhdGUgc3luY0RlYm91bmNlVGltZXJzOiBNYXA8c3RyaW5nLCBOb2RlSlMuVGltZW91dD47XG4gICAgcHJpdmF0ZSBwZW5kaW5nU3luY3M6IFNldDxzdHJpbmc+OyAgLy8gXHU4RERGXHU4RTJBXHU1Rjg1XHU1NDBDXHU2QjY1XHU3Njg0XHU2NTg3XHU0RUY2XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgbWFuaWZlc3Q6IFBsdWdpbk1hbmlmZXN0KSB7XG4gICAgICAgIHN1cGVyKGFwcCwgbWFuaWZlc3QpO1xuICAgICAgICB0aGlzLnN5bmNEZWJvdW5jZVRpbWVycyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5wZW5kaW5nU3luY3MgPSBuZXcgU2V0KCk7XG4gICAgfVxuXG4gICAgLy8gXHU3NTFGXHU2MjEwXHU1QkEyXHU2MjM3XHU3QUVGIElEXHVGRjA4XHU1N0ZBXHU0RThFXHU4REVGXHU1Rjg0XHU3Njg0IFNIQS0yNTYgaGFzaFx1RkYwOVxuICAgIGFzeW5jIGdlbmVyYXRlQ2xpZW50SWQocGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgICAgICBjb25zdCBkYXRhID0gZW5jb2Rlci5lbmNvZGUocGF0aCk7XG4gICAgICAgIGNvbnN0IGhhc2hCdWZmZXIgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmRpZ2VzdCgnU0hBLTI1NicsIGRhdGEpO1xuICAgICAgICBjb25zdCBoYXNoQXJyYXkgPSBBcnJheS5mcm9tKG5ldyBVaW50OEFycmF5KGhhc2hCdWZmZXIpKTtcbiAgICAgICAgY29uc3QgaGFzaEhleCA9IGhhc2hBcnJheS5tYXAoYiA9PiBiLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpKS5qb2luKCcnKTtcbiAgICAgICAgLy8gXHU2ODNDXHU1RjBGXHU1MzE2XHU0RTNBIFVVSUQgXHU2ODM3XHU1RjBGXG4gICAgICAgIHJldHVybiBgJHtoYXNoSGV4LnN1YnN0cmluZygwLCA4KX0tJHtoYXNoSGV4LnN1YnN0cmluZyg4LCAxMil9LSR7aGFzaEhleC5zdWJzdHJpbmcoMTIsIDE2KX0tJHtoYXNoSGV4LnN1YnN0cmluZygxNiwgMjApfS0ke2hhc2hIZXguc3Vic3RyaW5nKDIwLCAzMil9YDtcbiAgICB9XG5cbiAgICAvLyBcdTY4MDdcdTUxQzZcdTUzMTYgT2JzaWRpYW4gXHU5NEZFXHU2M0E1XHU4REVGXHU1Rjg0XG4gICAgbm9ybWFsaXplTGlua1BhdGgobGluazogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU1M0VGXHU4MEZEXHU3Njg0XHU5NTFBXHU3MEI5XHU1NDhDXHU1NzU3XHU1RjE1XHU3NTI4XG4gICAgICAgIGxldCBwYXRoID0gbGluay5zcGxpdCgnIycpWzBdLnNwbGl0KCdeJylbMF07XG5cbiAgICAgICAgLy8gXHU0RTBEXHU4OTgxXHU0RTNBXHU5NzVFIG1hcmtkb3duIFx1NjU4N1x1NEVGNlx1NkRGQlx1NTJBMCAubWQgXHU2MjY5XHU1QzU1XHU1NDBEXG4gICAgICAgIC8vIFx1NEZERFx1NzU1OVx1NTM5Rlx1NTlDQlx1NjI2OVx1NUM1NVx1NTQwRFx1RkYwOFx1NTk4MiAucG5nLCAuanBnLCAubXA0IFx1N0I0OVx1RkYwOVxuICAgICAgICBpZiAoIXBhdGguaW5jbHVkZXMoJy4nKSkge1xuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5XHU2MjY5XHU1QzU1XHU1NDBEXHVGRjBDXHU1MDQ3XHU4QkJFXHU2NjJGIG1hcmtkb3duIFx1NjU4N1x1NEVGNlxuICAgICAgICAgICAgcGF0aCA9IHBhdGggKyAnLm1kJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwYXRoO1xuICAgIH1cblxuICAgIC8vIFx1NTIyNFx1NjVBRFx1NjYyRlx1NTQyNlx1NjYyRlx1NUE5Mlx1NEY1M1x1NjU4N1x1NEVGNlxuICAgIGlzTWVkaWFGaWxlKHBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBtZWRpYUV4dGVuc2lvbnMgPSBbXG4gICAgICAgICAgICAvLyBcdTU2RkVcdTcyNDdcbiAgICAgICAgICAgICcucG5nJywgJy5qcGcnLCAnLmpwZWcnLCAnLmdpZicsICcuYm1wJywgJy5zdmcnLCAnLndlYnAnLFxuICAgICAgICAgICAgLy8gXHU4OUM2XHU5ODkxXG4gICAgICAgICAgICAnLm1wNCcsICcud2VibScsICcub2d2JywgJy5tb3YnLCAnLm1rdicsXG4gICAgICAgICAgICAvLyBcdTk3RjNcdTk4OTFcbiAgICAgICAgICAgICcubXAzJywgJy53YXYnLCAnLm00YScsICcub2dnJywgJy4zZ3AnLCAnLmZsYWMnLFxuICAgICAgICAgICAgLy8gXHU1MTc2XHU0RUQ2XG4gICAgICAgICAgICAnLnBkZidcbiAgICAgICAgXTtcblxuICAgICAgICBjb25zdCBleHQgPSBwYXRoLnN1YnN0cmluZyhwYXRoLmxhc3RJbmRleE9mKCcuJykpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHJldHVybiBtZWRpYUV4dGVuc2lvbnMuaW5jbHVkZXMoZXh0KTtcbiAgICB9XG5cbiAgICAvLyBcdTgzQjdcdTUzRDZcdTVBOTJcdTRGNTNcdTY1ODdcdTRFRjZcdTdDN0JcdTU3OEJcbiAgICBnZXRNZWRpYVR5cGUocGF0aDogc3RyaW5nKTogJ2ltYWdlJyB8ICd2aWRlbycgfCAnYXVkaW8nIHwgJ3BkZicgfCAnb3RoZXInIHtcbiAgICAgICAgY29uc3QgZXh0ID0gcGF0aC5zdWJzdHJpbmcocGF0aC5sYXN0SW5kZXhPZignLicpKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIGNvbnN0IGltYWdlRXh0cyA9IFsnLnBuZycsICcuanBnJywgJy5qcGVnJywgJy5naWYnLCAnLmJtcCcsICcuc3ZnJywgJy53ZWJwJ107XG4gICAgICAgIGNvbnN0IHZpZGVvRXh0cyA9IFsnLm1wNCcsICcud2VibScsICcub2d2JywgJy5tb3YnLCAnLm1rdiddO1xuICAgICAgICBjb25zdCBhdWRpb0V4dHMgPSBbJy5tcDMnLCAnLndhdicsICcubTRhJywgJy5vZ2cnLCAnLjNncCcsICcuZmxhYyddO1xuXG4gICAgICAgIGlmIChpbWFnZUV4dHMuaW5jbHVkZXMoZXh0KSkgcmV0dXJuICdpbWFnZSc7XG4gICAgICAgIGlmICh2aWRlb0V4dHMuaW5jbHVkZXMoZXh0KSkgcmV0dXJuICd2aWRlbyc7XG4gICAgICAgIGlmIChhdWRpb0V4dHMuaW5jbHVkZXMoZXh0KSkgcmV0dXJuICdhdWRpbyc7XG4gICAgICAgIGlmIChleHQgPT09ICcucGRmJykgcmV0dXJuICdwZGYnO1xuICAgICAgICByZXR1cm4gJ290aGVyJztcbiAgICB9XG5cbiAgICBhc3luYyBvbmxvYWQoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpO1xuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFBsdWdpbiBsb2FkaW5nLi4uJyk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFNldHRpbmdzIGxvYWRlZDonLCB7XG4gICAgICAgICAgICBzZXJ2ZXJVcmw6IHRoaXMuc2V0dGluZ3Muc2VydmVyVXJsLFxuICAgICAgICAgICAgaGFzU3luY0tleTogISF0aGlzLnNldHRpbmdzLnN5bmNLZXksXG4gICAgICAgICAgICBzeW5jS2V5TGVuZ3RoOiB0aGlzLnNldHRpbmdzLnN5bmNLZXk/Lmxlbmd0aCxcbiAgICAgICAgICAgIGF1dG9TeW5jOiB0aGlzLnNldHRpbmdzLmF1dG9TeW5jXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1NTQwQ1x1NkI2NVx1N0JBMVx1NzQwNlx1NTY2OFxuICAgICAgICB0aGlzLnN5bmNNYW5hZ2VyID0gbmV3IFN5bmNNYW5hZ2VyKHtcbiAgICAgICAgICAgIHNlcnZlclVybDogdGhpcy5zZXR0aW5ncy5zZXJ2ZXJVcmwsXG4gICAgICAgICAgICBzeW5jS2V5OiB0aGlzLnNldHRpbmdzLnN5bmNLZXlcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gU3luY01hbmFnZXIgaW5pdGlhbGl6ZWQnKTtcblxuICAgICAgICAvLyBcdTc2RDFcdTU0MkNcdTY1ODdcdTRFRjZcdTUyMUJcdTVFRkFcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oJ2NyZWF0ZScsIChmaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUZpbGVDaGFuZ2UoZmlsZSwgJ2NyZWF0ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gUmVnaXN0ZXJlZCBldmVudDogZmlsZSBjcmVhdGUnKTtcblxuICAgICAgICAvLyBcdTc2RDFcdTU0MkNcdTY1ODdcdTRFRjZcdTRGRUVcdTY1MzlcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oJ21vZGlmeScsIChmaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4MDdcdThCQjBcdTRFM0FcdTVGODVcdTU0MENcdTZCNjVcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nU3luY3MuYWRkKGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBSZWdpc3RlcmVkIGV2ZW50OiBmaWxlIG1vZGlmeScpO1xuXG4gICAgICAgIC8vIFx1NzZEMVx1NTQyQ1x1NTE0M1x1NjU3MFx1NjM2RVx1N0YxM1x1NUI1OFx1NjZGNFx1NjVCMFx1NUI4Q1x1NjIxMFxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLm9uKCdyZXNvbHZlZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBtZXRhZGF0YUNhY2hlIFx1NURGMlx1ODlFM1x1Njc5MFx1NUI4Q1x1NjIxMFx1RkYwQ1x1NTkwNFx1NzQwNlx1NjI0MFx1NjcwOVx1NUY4NVx1NTQwQ1x1NkI2NVx1NzY4NFx1NjU4N1x1NEVGNlxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZVBhdGggb2YgdGhpcy5wZW5kaW5nU3luY3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRmlsZUNoYW5nZShmaWxlLCAnbW9kaWZ5Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nU3luY3MuY2xlYXIoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gUmVnaXN0ZXJlZCBldmVudDogbWV0YWRhdGEgcmVzb2x2ZWQnKTtcblxuICAgICAgICAvLyBcdTc2RDFcdTU0MkNcdTY1ODdcdTRFRjZcdTUyMjBcdTk2NjRcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oJ2RlbGV0ZScsIChmaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUZpbGVEZWxldGUoZmlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBSZWdpc3RlcmVkIGV2ZW50OiBmaWxlIGRlbGV0ZScpO1xuXG4gICAgICAgIC8vIFx1NzZEMVx1NTQyQ1x1NjU4N1x1NEVGNlx1OTFDRFx1NTQ3RFx1NTQwRFxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5vbigncmVuYW1lJywgKGZpbGUsIG9sZFBhdGgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRmlsZVJlbmFtZShmaWxlLCBvbGRQYXRoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFJlZ2lzdGVyZWQgZXZlbnQ6IGZpbGUgcmVuYW1lJyk7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU4QkJFXHU3RjZFXHU5NzYyXHU2NzdGXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgTWFya2Rvd25CcmFpblNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBTZXR0aW5ncyB0YWIgYWRkZWQnKTtcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTU0N0RcdTRFRTRcdUZGMUFcdTYyNEJcdTUyQThcdTU0MENcdTZCNjVcdTVGNTNcdTUyNERcdTY1ODdcdTRFRjZcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnc3luYy1jdXJyZW50LWZpbGUnLFxuICAgICAgICAgICAgbmFtZTogJ1N5bmMgY3VycmVudCBmaWxlJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVGaWxlQ2hhbmdlKGZpbGUsICdtb2RpZnknKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTQ3RFx1NEVFNFx1RkYxQVx1NTQwQ1x1NkI2NVx1NjI0MFx1NjcwOVx1NjU4N1x1NEVGNlxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdzeW5jLWFsbC1maWxlcycsXG4gICAgICAgICAgICBuYW1lOiAnU3luYyBhbGwgZmlsZXMnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN5bmNBbGxGaWxlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBDb21tYW5kcyByZWdpc3RlcmVkJyk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBcdTI3MTMgUGx1Z2luIGxvYWRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Jyk7XG4gICAgfVxuXG4gICAgYXN5bmMgaGFuZGxlRmlsZUNoYW5nZShmaWxlOiBURmlsZSwgYWN0aW9uOiAnY3JlYXRlJyB8ICdtb2RpZnknKSB7XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5hdXRvU3luYykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBBdXRvLXN5bmMgZGlzYWJsZWQsIHNraXBwaW5nOicsIGZpbGUucGF0aCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTZFMDVcdTk2NjRcdTRFNEJcdTUyNERcdTc2ODRcdTk2MzJcdTYyOTZcdTVCOUFcdTY1RjZcdTU2NjhcbiAgICAgICAgY29uc3QgZXhpc3RpbmdUaW1lciA9IHRoaXMuc3luY0RlYm91bmNlVGltZXJzLmdldChmaWxlLnBhdGgpO1xuICAgICAgICBpZiAoZXhpc3RpbmdUaW1lcikge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGV4aXN0aW5nVGltZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHU0RjdGXHU3NTI4XHU5NjMyXHU2Mjk2XHU5MDdGXHU1MTREXHU1RkVCXHU5MDFGXHU4RkRFXHU3RUVEXHU3Njg0XHU1NDBDXHU2QjY1XG4gICAgICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN5bmNEZWJvdW5jZVRpbWVycy5kZWxldGUoZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGVyZm9ybVN5bmMoZmlsZSwgYWN0aW9uKTtcbiAgICAgICAgfSwgMzAwKTsgLy8gMzAwbXMgXHU5NjMyXHU2Mjk2XG5cbiAgICAgICAgdGhpcy5zeW5jRGVib3VuY2VUaW1lcnMuc2V0KGZpbGUucGF0aCwgdGltZXIpO1xuICAgIH1cblxuICAgIGFzeW5jIHBlcmZvcm1TeW5jKGZpbGU6IFRGaWxlLCBhY3Rpb246ICdjcmVhdGUnIHwgJ21vZGlmeScpIHtcblxuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIEZpbGUgY2hhbmdlIGRldGVjdGVkOicsIHtcbiAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgICAgICAgZXh0ZW5zaW9uOiBmaWxlLmV4dGVuc2lvbixcbiAgICAgICAgICAgIHNpemU6IGZpbGUuc3RhdC5zaXplXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBcdThCRkJcdTUzRDZcdTY1ODdcdTRFRjZcdTUxODVcdTVCQjlcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBGaWxlIHJlYWQgc3VjY2Vzc2Z1bGx5OicsIHtcbiAgICAgICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgY29udGVudExlbmd0aDogY29udGVudC5sZW5ndGhcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTY1ODdcdTRFRjZcdTUxNDNcdTY1NzBcdTYzNkUgLSBcdTRGN0ZcdTc1MjggT2JzaWRpYW4gQVBJXG4gICAgICAgICAgICBjb25zdCBjYWNoZWRNZXRhZGF0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGE6IERvY3VtZW50TWV0YWRhdGEgPSB7fTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBSYXcgY2FjaGVkIG1ldGFkYXRhOicsIGNhY2hlZE1ldGFkYXRhKTtcblxuICAgICAgICAgICAgaWYgKGNhY2hlZE1ldGFkYXRhKSB7XG4gICAgICAgICAgICAgICAgLy8gXHU2M0QwXHU1M0Q2XHU5NEZFXHU2M0E1XHU1NDhDXHU1RDRDXHU1MTY1XHVGRjBDXHU1NDA4XHU1RTc2XHU0RTNBXHU3RURGXHU0RTAwXHU3Njg0IGxpbmtzIFx1NjU3MFx1N0VDNFxuICAgICAgICAgICAgICAgIGNvbnN0IGFsbExpbmtzOiBBcnJheTx7XG4gICAgICAgICAgICAgICAgICAgIGxpbms6IHN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q2xpZW50SWQ6IHN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWw6IHN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVRleHQ/OiBzdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtUeXBlOiAnbGluaycgfCAnZW1iZWQnO1xuICAgICAgICAgICAgICAgIH0+ID0gW107XG5cbiAgICAgICAgICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTY2NkVcdTkwMUFcdTk0RkVcdTYzQTVcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVkTWV0YWRhdGEubGlua3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBGb3VuZCcsIGNhY2hlZE1ldGFkYXRhLmxpbmtzLmxlbmd0aCwgJ2xpbmtzIGluIG1ldGFkYXRhJyk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbGluayBvZiBjYWNoZWRNZXRhZGF0YS5saW5rcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBQcm9jZXNzaW5nIGxpbms6JywgbGluayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IHRoaXMubm9ybWFsaXplTGlua1BhdGgobGluay5saW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gTm9ybWFsaXplZCBwYXRoOicsIG5vcm1hbGl6ZWRQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldENsaWVudElkID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUNsaWVudElkKG5vcm1hbGl6ZWRQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gR2VuZXJhdGVkIHRhcmdldENsaWVudElkOicsIHRhcmdldENsaWVudElkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNNZWRpYSA9IHRoaXMuaXNNZWRpYUZpbGUobm9ybWFsaXplZFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlua0RhdGE6IGFueSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rOiBub3JtYWxpemVkUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRDbGllbnRJZDogdGFyZ2V0Q2xpZW50SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWw6IGxpbmsub3JpZ2luYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheVRleHQ6IGxpbmsuZGlzcGxheVRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlua1R5cGU6ICdsaW5rJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTWVkaWEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rRGF0YS5pc01lZGlhID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rRGF0YS5tZWRpYVR5cGUgPSB0aGlzLmdldE1lZGlhVHlwZShub3JtYWxpemVkUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBNZWRpYSBmaWxlIGRldGVjdGVkOicsIGxpbmtEYXRhLm1lZGlhVHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbExpbmtzLnB1c2gobGlua0RhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU1RDRDXHU1MTY1XG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlZE1ldGFkYXRhLmVtYmVkcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIEZvdW5kJywgY2FjaGVkTWV0YWRhdGEuZW1iZWRzLmxlbmd0aCwgJ2VtYmVkcyBpbiBtZXRhZGF0YScpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGVtYmVkIG9mIGNhY2hlZE1ldGFkYXRhLmVtYmVkcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBQcm9jZXNzaW5nIGVtYmVkOicsIGVtYmVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gdGhpcy5ub3JtYWxpemVMaW5rUGF0aChlbWJlZC5saW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gTm9ybWFsaXplZCBwYXRoOicsIG5vcm1hbGl6ZWRQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldENsaWVudElkID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUNsaWVudElkKG5vcm1hbGl6ZWRQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gR2VuZXJhdGVkIHRhcmdldENsaWVudElkOicsIHRhcmdldENsaWVudElkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNNZWRpYSA9IHRoaXMuaXNNZWRpYUZpbGUobm9ybWFsaXplZFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlua0RhdGE6IGFueSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rOiBub3JtYWxpemVkUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRDbGllbnRJZDogdGFyZ2V0Q2xpZW50SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWw6IGVtYmVkLm9yaWdpbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtUeXBlOiAnZW1iZWQnXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNNZWRpYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtEYXRhLmlzTWVkaWEgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtEYXRhLm1lZGlhVHlwZSA9IHRoaXMuZ2V0TWVkaWFUeXBlKG5vcm1hbGl6ZWRQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIE1lZGlhIGZpbGUgZGV0ZWN0ZWQ6JywgbGlua0RhdGEubWVkaWFUeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsTGlua3MucHVzaChsaW5rRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoYWxsTGlua3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YS5saW5rcyA9IGFsbExpbmtzO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFRvdGFsIGxpbmtzIHRvIHN5bmM6JywgYWxsTGlua3MubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBMaW5rcyBkYXRhOicsIEpTT04uc3RyaW5naWZ5KGFsbExpbmtzLCBudWxsLCAyKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBObyBsaW5rcyBmb3VuZCBpbiB0aGlzIGRvY3VtZW50Jyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gXHU2M0QwXHU1M0Q2XHU2ODA3XHU3QjdFXG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlZE1ldGFkYXRhLnRhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGEudGFncyA9IGNhY2hlZE1ldGFkYXRhLnRhZ3MubWFwKHRhZyA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiB0YWcudGFnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHRhZy5wb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gXHU2M0QwXHU1M0Q2XHU2ODA3XHU5ODk4XG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlZE1ldGFkYXRhLmhlYWRpbmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhLmhlYWRpbmdzID0gY2FjaGVkTWV0YWRhdGEuaGVhZGluZ3MubWFwKGhlYWRpbmcgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRpbmc6IGhlYWRpbmcuaGVhZGluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiBoZWFkaW5nLmxldmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGhlYWRpbmcucG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFx1NjNEMFx1NTNENiBmcm9udG1hdHRlclxuICAgICAgICAgICAgICAgIGlmIChjYWNoZWRNZXRhZGF0YS5mcm9udG1hdHRlcikge1xuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YS5mcm9udG1hdHRlciA9IGNhY2hlZE1ldGFkYXRhLmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gTWV0YWRhdGEgZXh0cmFjdGVkOicsIHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBsaW5rc0NvdW50OiBtZXRhZGF0YS5saW5rcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgIHRhZ3NDb3VudDogbWV0YWRhdGEudGFncz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRpbmdzQ291bnQ6IG1ldGFkYXRhLmhlYWRpbmdzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgaGFzRnJvbnRtYXR0ZXI6ICEhbWV0YWRhdGEuZnJvbnRtYXR0ZXJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU2NTg3XHU0RUY2XHU3RURGXHU4QkExXHU0RkUxXHU2MDZGXG4gICAgICAgICAgICBjb25zdCBzdGF0ID0gZmlsZS5zdGF0O1xuICAgICAgICAgICAgY29uc3QgaGFzaCA9IGF3YWl0IHRoaXMuaGFzaFN0cmluZyhjb250ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IG10aW1lID0gbmV3IERhdGUoc3RhdC5tdGltZSkudG9JU09TdHJpbmcoKTtcblxuICAgICAgICAgICAgLy8gXHU3NTFGXHU2MjEwXHU1QkEyXHU2MjM3XHU3QUVGIElEXG4gICAgICAgICAgICBjb25zdCBjbGllbnRJZCA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVDbGllbnRJZChmaWxlLnBhdGgpO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIEZpbGUgbWV0YWRhdGE6Jywge1xuICAgICAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgICAgICBjbGllbnRJZDogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgaGFzaDogaGFzaCxcbiAgICAgICAgICAgICAgICBtdGltZTogbXRpbWUsXG4gICAgICAgICAgICAgICAgaGFzTWV0YWRhdGE6ICEhbWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgbGlua3NDb3VudDogbWV0YWRhdGEubGlua3M/Lmxlbmd0aCB8fCAwXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gXHU1MUM2XHU1OTA3XHU1NDBDXHU2QjY1XHU2NTcwXHU2MzZFXG4gICAgICAgICAgICBjb25zdCBzeW5jRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgY2xpZW50SWQ6IGNsaWVudElkLFxuICAgICAgICAgICAgICAgIGNsaWVudFR5cGU6ICdvYnNpZGlhbicsXG4gICAgICAgICAgICAgICAgY29udGVudDogY29udGVudCxcbiAgICAgICAgICAgICAgICBoYXNoOiBoYXNoLFxuICAgICAgICAgICAgICAgIG10aW1lOiBtdGltZSxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YTogbWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb25cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gU3luYyBkYXRhIHByZXBhcmVkOicpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSAtIFBhdGg6Jywgc3luY0RhdGEucGF0aCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIC0gQ2xpZW50SWQ6Jywgc3luY0RhdGEuY2xpZW50SWQpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSAtIEFjdGlvbjonLCBzeW5jRGF0YS5hY3Rpb24pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSAtIE1ldGFkYXRhOicsIEpTT04uc3RyaW5naWZ5KHN5bmNEYXRhLm1ldGFkYXRhLCBudWxsLCAyKSk7XG5cbiAgICAgICAgICAgIC8vIFx1OEMwM1x1NzUyOFx1NTQwQ1x1NkI2NVx1NTFGRFx1NjU3MFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5zeW5jTWFuYWdlci5zeW5jKHN5bmNEYXRhKTtcblxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBcdTI3MTMgRmlsZSBzeW5jZWQgc3VjY2Vzc2Z1bGx5OicsIGZpbGUucGF0aCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZG93bkJyYWluXSBcdTI3MTcgRmlsZSBzeW5jIGZhaWxlZDonLCBmaWxlLnBhdGgsIHJlc3VsdC5lcnJvcik7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1NDBDXHU2QjY1XHU1OTMxXHU4RDI1OiAke2ZpbGUucGF0aH1cXG4ke3Jlc3VsdC5lcnJvcn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZG93bkJyYWluXSBcdTI3MTcgRmlsZSBjaGFuZ2UgaGFuZGxlciBlcnJvcjonLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdTU0MENcdTZCNjVcdTk1MTlcdThCRUY6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBoYW5kbGVGaWxlRGVsZXRlKGZpbGU6IFRGaWxlKSB7XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5hdXRvU3luYykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBBdXRvLXN5bmMgZGlzYWJsZWQsIHNraXBwaW5nIGRlbGV0ZTonLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBGaWxlIGRlbGV0aW9uIGRldGVjdGVkOicsIHtcbiAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgIGV4dGVuc2lvbjogZmlsZS5leHRlbnNpb25cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFx1NzUxRlx1NjIxMFx1NUJBMlx1NjIzN1x1N0FFRiBJRFxuICAgICAgICAgICAgY29uc3QgY2xpZW50SWQgPSBhd2FpdCB0aGlzLmdlbmVyYXRlQ2xpZW50SWQoZmlsZS5wYXRoKTtcblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5zeW5jTWFuYWdlci5zeW5jKHtcbiAgICAgICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgY2xpZW50SWQ6IGNsaWVudElkLFxuICAgICAgICAgICAgICAgIGNsaWVudFR5cGU6ICdvYnNpZGlhbicsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAnZGVsZXRlJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gXHUyNzEzIEZpbGUgZGVsZXRpb24gc3luY2VkOicsIGZpbGUucGF0aCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZG93bkJyYWluXSBcdTI3MTcgRmlsZSBkZWxldGlvbiBzeW5jIGZhaWxlZDonLCBmaWxlLnBhdGgsIHJlc3VsdC5lcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbTWFya2Rvd25CcmFpbl0gXHUyNzE3IERlbGV0ZSBzeW5jIGV4Y2VwdGlvbjonLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGhhbmRsZUZpbGVSZW5hbWUoZmlsZTogVEZpbGUsIG9sZFBhdGg6IHN0cmluZykge1xuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuYXV0b1N5bmMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gQXV0by1zeW5jIGRpc2FibGVkLCBza2lwcGluZyByZW5hbWU6Jywgb2xkUGF0aCwgJy0+JywgZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gRmlsZSByZW5hbWUgZGV0ZWN0ZWQ6Jywge1xuICAgICAgICAgICAgb2xkUGF0aDogb2xkUGF0aCxcbiAgICAgICAgICAgIG5ld1BhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgIGV4dGVuc2lvbjogZmlsZS5leHRlbnNpb25cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIDEuIFx1NTIyMFx1OTY2NFx1NjVFN1x1OERFRlx1NUY4NFx1NzY4NFx1NjU4N1x1Njg2M1xuICAgICAgICAgICAgY29uc3Qgb2xkQ2xpZW50SWQgPSBhd2FpdCB0aGlzLmdlbmVyYXRlQ2xpZW50SWQob2xkUGF0aCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIERlbGV0aW5nIG9sZCBwYXRoOicsIHtcbiAgICAgICAgICAgICAgICBwYXRoOiBvbGRQYXRoLFxuICAgICAgICAgICAgICAgIGNsaWVudElkOiBvbGRDbGllbnRJZFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGRlbGV0ZVJlc3VsdCA9IGF3YWl0IHRoaXMuc3luY01hbmFnZXIuc3luYyh7XG4gICAgICAgICAgICAgICAgcGF0aDogb2xkUGF0aCxcbiAgICAgICAgICAgICAgICBjbGllbnRJZDogb2xkQ2xpZW50SWQsXG4gICAgICAgICAgICAgICAgY2xpZW50VHlwZTogJ29ic2lkaWFuJyxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdkZWxldGUnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFkZWxldGVSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZG93bkJyYWluXSBcdTI3MTcgRmFpbGVkIHRvIGRlbGV0ZSBvbGQgcGF0aDonLCBvbGRQYXRoLCBkZWxldGVSZXN1bHQuZXJyb3IpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1OTFDRFx1NTQ3RFx1NTQwRFx1NTQwQ1x1NkI2NVx1NTkzMVx1OEQyNVx1RkYwOFx1NTIyMFx1OTY2NFx1NjVFN1x1NjU4N1x1NEVGNlx1RkYwOTogJHtvbGRQYXRofVxcbiR7ZGVsZXRlUmVzdWx0LmVycm9yfWApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBcdTI3MTMgT2xkIHBhdGggZGVsZXRlZDonLCBvbGRQYXRoKTtcblxuICAgICAgICAgICAgLy8gMi4gXHU1MjFCXHU1RUZBXHU2NUIwXHU4REVGXHU1Rjg0XHU3Njg0XHU2NTg3XHU2ODYzXHVGRjA4XHU0RjdGXHU3NTI4IHBlcmZvcm1TeW5jXHVGRjBDXHU1QjgzXHU0RjFBXHU4QkZCXHU1M0Q2XHU1MTg1XHU1QkI5XHU1NDhDXHU1MTQzXHU2NTcwXHU2MzZFXHVGRjA5XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIENyZWF0aW5nIG5ldyBwYXRoOicsIGZpbGUucGF0aCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBlcmZvcm1TeW5jKGZpbGUsICdjcmVhdGUnKTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBcdTI3MTMgRmlsZSByZW5hbWUgc3luY2VkOicsIG9sZFBhdGgsICctPicsIGZpbGUucGF0aCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbTWFya2Rvd25CcmFpbl0gXHUyNzE3IFJlbmFtZSBzeW5jIGV4Y2VwdGlvbjonLCB7XG4gICAgICAgICAgICAgICAgb2xkUGF0aDogb2xkUGF0aCxcbiAgICAgICAgICAgICAgICBuZXdQYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU5MUNEXHU1NDdEXHU1NDBEXHU1NDBDXHU2QjY1XHU5NTE5XHU4QkVGOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXHU1MTY4XHU5MUNGXHU1NDBDXHU2QjY1XHU2MjQwXHU2NzA5XHU2NTg3XHU0RUY2XG4gICAgICogQGZsb3cgXHU2NTM2XHU5NkM2IElEcyBcdTIxOTIgXHU2RTA1XHU3NDA2XHU1QjY0XHU1MTNGIFx1MjE5MiBcdTU4OUVcdTkxQ0ZcdTU0MENcdTZCNjVcbiAgICAgKiBAY29tcGxleGl0eSBPKG4pIHdoZXJlIG4gPSBcdTY1ODdcdTRFRjZcdTY1NzBcdTkxQ0ZcbiAgICAgKi9cbiAgICBhc3luYyBzeW5jQWxsRmlsZXMoKSB7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBjb25zb2xlLmxvZyhgW01hcmtkb3duQnJhaW5dIFN0YXJ0aW5nIGZ1bGwgc3luYyBmb3IgJHtmaWxlcy5sZW5ndGh9IGZpbGVzYCk7XG4gICAgICAgIG5ldyBOb3RpY2UoYFx1NUYwMFx1NTlDQlx1NTE2OFx1OTFDRlx1NTQwQ1x1NkI2NSAke2ZpbGVzLmxlbmd0aH0gXHU0RTJBXHU2NTg3XHU0RUY2Li4uYCk7XG5cbiAgICAgICAgLy8gXHU2QjY1XHU5QUE0IDE6IFx1NjUzNlx1OTZDNiBjbGllbnRfaWRzXG4gICAgICAgIGNvbnN0IGNsaWVudElkcyA9IGF3YWl0IHRoaXMuY29sbGVjdENsaWVudElkcyhmaWxlcyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbTWFya2Rvd25CcmFpbl0gQ29sbGVjdGVkICR7Y2xpZW50SWRzLmxlbmd0aH0gY2xpZW50IElEc2ApO1xuXG4gICAgICAgIC8vIFx1NkI2NVx1OUFBNCAyOiBcdTZFMDVcdTc0MDZcdTVCNjRcdTUxM0ZcdTY1ODdcdTY4NjMgKE8oMSkgXHU1MzU1XHU2QjIxXHU4QkY3XHU2QzQyKVxuICAgICAgICBhd2FpdCB0aGlzLmNsZWFudXBPcnBoYW5zKGNsaWVudElkcyk7XG5cbiAgICAgICAgLy8gXHU2QjY1XHU5QUE0IDM6IFx1NTg5RVx1OTFDRlx1NTQwQ1x1NkI2NVxuICAgICAgICBhd2FpdCB0aGlzLmluY3JlbWVudGFsU3luY0JhdGNoKGZpbGVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcdTY1MzZcdTk2QzZcdTYyNDBcdTY3MDlcdTY1ODdcdTRFRjZcdTc2ODQgY2xpZW50X2lkc1xuICAgICAqIEBjb21wbGV4aXR5IE8obikgdGltZSwgTyhuKSBzcGFjZVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgY29sbGVjdENsaWVudElkcyhmaWxlczogVEZpbGVbXSk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICAgICAgY29uc3QgaWRzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICAgICAgLy8gXHU1M0VBXHU1MzA1XHU1NDJCXHU5NzVFXHU3QTdBXHU2NTg3XHU0RUY2XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQ/LnRyaW0oKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlkcy5wdXNoKGF3YWl0IHRoaXMuZ2VuZXJhdGVDbGllbnRJZChmaWxlLnBhdGgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtNYXJrZG93bkJyYWluXSBGYWlsZWQgdG8gcmVhZCAke2ZpbGUucGF0aH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpZHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXHU2RTA1XHU3NDA2XHU1QjY0XHU1MTNGXHU2NTg3XHU2ODYzXG4gICAgICogQGNvbXBsZXhpdHkgTygxKSAtIFx1NTM1NVx1NkIyMVx1N0Y1MVx1N0VEQ1x1OEJGN1x1NkM0MlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgY2xlYW51cE9ycGhhbnMoY2xpZW50SWRzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5zeW5jTWFuYWdlci5mdWxsU3luYyhjbGllbnRJZHMpO1xuICAgICAgICAgICAgY29uc3QgZGVsZXRlZCA9IHJlc3VsdC5kYXRhPy5bJ2RlbGV0ZWQtY291bnQnXSB8fCAwO1xuXG4gICAgICAgICAgICBpZiAoZGVsZXRlZCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW01hcmtkb3duQnJhaW5dIFx1MjcxMyBDbGVhbmVkICR7ZGVsZXRlZH0gb3JwaGFuIGRvY3VtZW50c2ApO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NkUwNVx1NzQwNlx1NEU4NiAke2RlbGV0ZWR9IFx1NEUyQVx1NUI2NFx1NTEzRlx1NjU4N1x1Njg2M2ApO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gXHUyNzEzIE5vIG9ycGhhbiBkb2N1bWVudHMgZm91bmQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIEZ1bGwtc3luYyBcdTU5MzFcdThEMjVcdTRFMERcdTRFMkRcdTY1QURcdTZENDFcdTdBMEJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZG93bkJyYWluXSBGdWxsIHN5bmMgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXHU2Mjc5XHU5MUNGXHU1ODlFXHU5MUNGXHU1NDBDXHU2QjY1XG4gICAgICogQGNvbXBsZXhpdHkgTyhuKSB3aXRoIGJhdGNoaW5nXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBpbmNyZW1lbnRhbFN5bmNCYXRjaChmaWxlczogVEZpbGVbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzdGF0czogU3luY1N0YXRzID0geyBzdWNjZXNzOiAwLCBmYWlsZWQ6IDAsIHNraXBwZWQ6IDAgfTtcbiAgICAgICAgY29uc3QgYmF0Y2hTaXplID0gMTA7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkgKz0gYmF0Y2hTaXplKSB7XG4gICAgICAgICAgICBjb25zdCBiYXRjaCA9IGZpbGVzLnNsaWNlKGksIGkgKyBiYXRjaFNpemUpO1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoYmF0Y2gubWFwKGZpbGUgPT4gdGhpcy5zeW5jT25lRmlsZShmaWxlLCBzdGF0cykpKTtcblxuICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLm1pbihpICsgYmF0Y2hTaXplLCBmaWxlcy5sZW5ndGgpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1NDBDXHU2QjY1XHU4RkRCXHU1RUE2OiAke3Byb2dyZXNzfS8ke2ZpbGVzLmxlbmd0aH0gKFx1NjIxMFx1NTI5RjogJHtzdGF0cy5zdWNjZXNzfSwgXHU1OTMxXHU4RDI1OiAke3N0YXRzLmZhaWxlZH0sIFx1OERGM1x1OEZDNzogJHtzdGF0cy5za2lwcGVkfSlgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZpbmFsTXNnID0gYFx1NTQwQ1x1NkI2NVx1NUI4Q1x1NjIxMCEgXHU2MDNCXHU4QkExOiAke2ZpbGVzLmxlbmd0aH0sIFx1NjIxMFx1NTI5RjogJHtzdGF0cy5zdWNjZXNzfSwgXHU1OTMxXHU4RDI1OiAke3N0YXRzLmZhaWxlZH0sIFx1OERGM1x1OEZDNzogJHtzdGF0cy5za2lwcGVkfWA7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbTWFya2Rvd25CcmFpbl0gJHtmaW5hbE1zZ31gKTtcbiAgICAgICAgbmV3IE5vdGljZShmaW5hbE1zZywgODAwMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXHU1NDBDXHU2QjY1XHU1MzU1XHU0RTJBXHU2NTg3XHU0RUY2XG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBzeW5jT25lRmlsZShmaWxlOiBURmlsZSwgc3RhdHM6IFN5bmNTdGF0cyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGVyZm9ybVN5bmMoZmlsZSwgJ21vZGlmeScpO1xuICAgICAgICAgICAgc3RhdHMuc3VjY2VzcysrO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgc3RhdHMuZmFpbGVkKys7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbTWFya2Rvd25CcmFpbl0gXHUyNzE3IEZhaWxlZCB0byBzeW5jICR7ZmlsZS5wYXRofTpgLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNRDUgXHU1NEM4XHU1RTBDXHU1MUZEXHU2NTcwXHVGRjA4XHU3NTI4XHU0RThFXHU2OEMwXHU2RDRCXHU2NTg3XHU0RUY2XHU1MTg1XHU1QkI5XHU1M0Q4XHU1MzE2XHVGRjA5XG4gICAgYXN5bmMgaGFzaFN0cmluZyhzdHI6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbiAgICAgICAgY29uc3QgZGF0YSA9IGVuY29kZXIuZW5jb2RlKHN0cik7XG4gICAgICAgIGNvbnN0IGhhc2hCdWZmZXIgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmRpZ2VzdCgnTUQ1JywgZGF0YSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDIE1ENSBcdTRFMERcdTUzRUZcdTc1MjhcdUZGMENcdTk2NERcdTdFQTdcdTRGN0ZcdTc1MjggU0hBLTI1NlxuICAgICAgICAgICAgcmV0dXJuIGNyeXB0by5zdWJ0bGUuZGlnZXN0KCdTSEEtMjU2JywgZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBoYXNoQXJyYXkgPSBBcnJheS5mcm9tKG5ldyBVaW50OEFycmF5KGhhc2hCdWZmZXIpKTtcbiAgICAgICAgcmV0dXJuIGhhc2hBcnJheS5tYXAoYiA9PiBiLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpKS5qb2luKCcnKTtcbiAgICB9XG5cbiAgICBvbnVubG9hZCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1VubG9hZGluZyBNYXJrZG93bkJyYWluIHBsdWdpbicpO1xuICAgICAgICAvLyBcdTZFMDVcdTc0MDZcdTYyNDBcdTY3MDlcdTk2MzJcdTYyOTZcdTVCOUFcdTY1RjZcdTU2NjhcbiAgICAgICAgZm9yIChjb25zdCB0aW1lciBvZiB0aGlzLnN5bmNEZWJvdW5jZVRpbWVycy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN5bmNEZWJvdW5jZVRpbWVycy5jbGVhcigpO1xuICAgICAgICB0aGlzLnN5bmNNYW5hZ2VyLmRlc3Ryb3koKTtcbiAgICB9XG5cbiAgICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU1NDBDXHU2QjY1XHU3QkExXHU3NDA2XHU1NjY4XHU5MTREXHU3RjZFXG4gICAgICAgIHRoaXMuc3luY01hbmFnZXIudXBkYXRlQ29uZmlnKHtcbiAgICAgICAgICAgIHNlcnZlclVybDogdGhpcy5zZXR0aW5ncy5zZXJ2ZXJVcmwsXG4gICAgICAgICAgICBzeW5jS2V5OiB0aGlzLnNldHRpbmdzLnN5bmNLZXlcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vLyBcdThCQkVcdTdGNkVcdTk3NjJcdTY3N0ZcbmNsYXNzIE1hcmtkb3duQnJhaW5TZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gICAgcGx1Z2luOiBNYXJrZG93bkJyYWluUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTWFya2Rvd25CcmFpblBsdWdpbikge1xuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnTWFya2Rvd25CcmFpbiBcdTU0MENcdTZCNjVcdThCQkVcdTdGNkUnIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1NjcwRFx1NTJBMVx1NTY2OFx1NTczMFx1NTc0MCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnTWFya2Rvd25CcmFpbiBcdTY3MERcdTUyQTFcdTU2NjggQVBJIFx1NTczMFx1NTc0MCcpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2h0dHBzOi8vYXBpLm1hcmtkb3duYnJhaW4uY29tJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VydmVyVXJsKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VydmVyVXJsID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdTeW5jIEtleScpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU0RUNFXHU3QkExXHU3NDA2XHU1NDBFXHU1M0YwXHU4M0I3XHU1M0Q2XHU3Njg0XHU1NDBDXHU2QjY1XHU1QkM2XHU5NEE1JylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcigneHh4eHh4eHgteHh4eC14eHh4LXh4eHgteHh4eHh4eHh4eHh4JylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc3luY0tleSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNLZXkgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIFx1NkQ0Qlx1OEJENVx1OEZERVx1NjNBNVx1NjMwOVx1OTRBRVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTZENEJcdThCRDVcdThGREVcdTYzQTUnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1NkQ0Qlx1OEJENVx1NEUwRVx1NjcwRFx1NTJBMVx1NTY2OFx1NzY4NFx1OEZERVx1NjNBNVx1RkYwODMwXHU3OUQyXHU4RDg1XHU2NUY2XHVGRjA5JylcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdcdTZENEJcdThCRDUnKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHU2RDRCXHU4QkQ1XHU0RTJELi4uJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2QjYzXHU1NzI4XHU2RDRCXHU4QkQ1XHU4RkRFXHU2M0E1Li4uJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wbHVnaW4uc3luY01hbmFnZXIudGVzdENvbm5lY3Rpb24oMzAwMDApO1xuXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdTZENEJcdThCRDUnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0LnZhdWx0SW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXHUyNzA1IFx1OEZERVx1NjNBNVx1NjIxMFx1NTI5Rlx1RkYwMVxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBWYXVsdDogJHtyZXN1bHQudmF1bHRJbmZvLm5hbWV9XFxuYCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYERvbWFpbjogJHtyZXN1bHQudmF1bHRJbmZvLmRvbWFpbn1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDUwMDBcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTI3NEMgXHU4RkRFXHU2M0E1XHU1OTMxXHU4RDI1OiAke3Jlc3VsdC5lcnJvciB8fCAnVW5rbm93biBlcnJvcid9YCwgNTAwMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gXHU2Mjc5XHU5MUNGXHU1NDBDXHU2QjY1XHU2MzA5XHU5NEFFXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1NjI3OVx1OTFDRlx1NTQwQ1x1NkI2NScpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU2MjRCXHU1MkE4XHU1NDBDXHU2QjY1XHU2MjQwXHU2NzA5IE1hcmtkb3duIFx1NjU4N1x1NEVGNlx1NTIzMFx1NjcwRFx1NTJBMVx1NTY2OCcpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHU1RjAwXHU1OUNCXHU1NDBDXHU2QjY1JylcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1NTQwQ1x1NkI2NVx1NEUyRC4uLicpO1xuXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnN5bmNBbGxGaWxlcygpO1xuXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdTVGMDBcdTU5Q0JcdTU0MENcdTZCNjUnKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHU4MUVBXHU1MkE4XHU1NDBDXHU2QjY1JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdTY1ODdcdTRFRjZcdTRGRUVcdTY1MzlcdTY1RjZcdTgxRUFcdTUyQThcdTU0MENcdTZCNjVcdTUyMzBcdTY3MERcdTUyQTFcdTU2NjgnKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9TeW5jKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1N5bmMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQWtHO0FBUWxHLElBQU0sbUJBQTBDO0FBQUEsRUFDNUMsV0FBVztBQUFBLEVBQ1gsU0FBUztBQUFBLEVBQ1QsVUFBVTtBQUNkO0FBbUZBLElBQU0sY0FBTixNQUFrQjtBQUFBLEVBR2QsWUFBWSxRQUFvQjtBQUM1QixTQUFLLFNBQVM7QUFBQSxFQUNsQjtBQUFBLEVBRUEsYUFBYSxRQUFvQjtBQUM3QixTQUFLLFNBQVM7QUFBQSxFQUNsQjtBQUFBLEVBRUEsTUFBTSxlQUFlLFVBQWtCLEtBQTZFO0FBQ2hILFFBQUk7QUFDQSxZQUFNLGFBQWEsSUFBSSxnQkFBZ0I7QUFDdkMsWUFBTSxZQUFZLFdBQVcsTUFBTSxXQUFXLE1BQU0sR0FBRyxPQUFPO0FBRTlELFlBQU0sV0FBVyxVQUFNLDRCQUFXO0FBQUEsUUFDOUIsS0FBSyxHQUFHLEtBQUssT0FBTyxTQUFTO0FBQUEsUUFDN0IsUUFBUTtBQUFBLFFBQ1IsU0FBUztBQUFBLFVBQ0wsaUJBQWlCLFVBQVUsS0FBSyxPQUFPLE9BQU87QUFBQSxRQUNsRDtBQUFBLFFBQ0EsT0FBTztBQUFBLE1BQ1gsQ0FBQztBQUVELG1CQUFhLFNBQVM7QUFFdEIsVUFBSSxTQUFTLFdBQVcsS0FBSztBQUN6QixjQUFNLE9BQU8sU0FBUztBQUN0QixlQUFPO0FBQUEsVUFDSCxTQUFTO0FBQUEsVUFDVCxXQUFXLEtBQUs7QUFBQSxRQUNwQjtBQUFBLE1BQ0osT0FBTztBQUNILGVBQU87QUFBQSxVQUNILFNBQVM7QUFBQSxVQUNULE9BQU8sUUFBUSxTQUFTLE1BQU0sS0FBSyxTQUFTLFFBQVEsZUFBZTtBQUFBLFFBQ3ZFO0FBQUEsTUFDSjtBQUFBLElBQ0osU0FBUyxPQUFZO0FBQ2pCLFdB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
