/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MarkdownBrainPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian5 = require("obsidian");

// src/core/client-id.ts
var import_obsidian = require("obsidian");
var CLIENT_ID_KEY = "markdownbrain-id";
async function getOrCreateClientId(file, content, app) {
  var _a;
  const cache = app.metadataCache.getFileCache(file);
  if ((_a = cache == null ? void 0 : cache.frontmatter) == null ? void 0 : _a[CLIENT_ID_KEY]) {
    return String(cache.frontmatter[CLIENT_ID_KEY]).trim();
  }
  const fileContent = await app.vault.read(file);
  const latestContent = fileContent || content;
  const frontmatterMatch = latestContent.match(/^---\n([\s\S]*?)\n---/);
  if (frontmatterMatch) {
    try {
      const frontmatter = (0, import_obsidian.parseYaml)(frontmatterMatch[1]);
      if (frontmatter == null ? void 0 : frontmatter[CLIENT_ID_KEY]) {
        return String(frontmatter[CLIENT_ID_KEY]).trim();
      }
    } catch (e) {
    }
  }
  const newId = crypto.randomUUID();
  await app.fileManager.processFrontMatter(file, (frontmatter) => {
    frontmatter[CLIENT_ID_KEY] = newId;
  });
  return newId;
}

// src/domain/types.ts
var DEFAULT_SETTINGS = {
  serverUrl: "https://api.markdownbrain.com",
  syncKey: "",
  autoSync: true
};

// src/utils/resource.ts
var RESOURCE_EXTENSIONS = /* @__PURE__ */ new Set([
  // Images
  "png",
  "jpg",
  "jpeg",
  "gif",
  "webp",
  "svg",
  "bmp",
  "ico",
  // Documents
  "pdf",
  // Audio
  "mp3",
  "ogg",
  "wav",
  // Video
  "mp4",
  "webm"
]);
function isResourceFile(file) {
  return RESOURCE_EXTENSIONS.has(file.extension.toLowerCase());
}

// src/utils/mime.ts
var MIME_TYPES = {
  // Images
  "png": "image/png",
  "jpg": "image/jpeg",
  "jpeg": "image/jpeg",
  "gif": "image/gif",
  "webp": "image/webp",
  "svg": "image/svg+xml",
  "bmp": "image/bmp",
  "ico": "image/x-icon",
  // Documents
  "pdf": "application/pdf",
  // Audio
  "mp3": "audio/mpeg",
  "ogg": "audio/ogg",
  "wav": "audio/wav",
  // Video
  "mp4": "video/mp4",
  "webm": "video/webm"
};
function getContentType(extension) {
  const ext = extension.toLowerCase();
  return MIME_TYPES[ext] || "application/octet-stream";
}

// src/utils/encoding.ts
async function arrayBufferToBase64(buffer) {
  const bytes = new Uint8Array(buffer);
  let binary = "";
  for (let i = 0; i < bytes.byteLength; i++) {
    binary += String.fromCharCode(bytes[i]);
  }
  return btoa(binary);
}

// src/utils/hash.ts
async function sha256Hash(buffer) {
  const hashBuffer = await crypto.subtle.digest("SHA-256", buffer);
  const hashArray = Array.from(new Uint8Array(hashBuffer));
  return hashArray.map((b) => b.toString(16).padStart(2, "0")).join("");
}
async function hashString(str) {
  const encoder = new TextEncoder();
  const data = encoder.encode(str);
  return sha256Hash(data.buffer);
}

// src/api/sync-api.ts
var SyncApiClient = class {
  constructor(config, httpClient) {
    this.config = config;
    this.http = httpClient;
  }
  updateConfig(config) {
    this.config = config;
  }
  async testConnection(timeout = 3e4) {
    try {
      const response = await this.http.request({
        url: `${this.config.serverUrl}/obsidian/vault/info`,
        method: "GET",
        headers: {
          "Authorization": `Bearer ${this.config.syncKey}`
        }
      });
      if (response.status === 200) {
        const data = response.json;
        return {
          success: true,
          vaultInfo: data.vault
        };
      } else {
        return {
          success: false,
          error: `HTTP ${response.status}: ${response.text || "Unknown error"}`
        };
      }
    } catch (error) {
      if (error && typeof error === "object" && "name" in error && error.name === "AbortError") {
        return {
          success: false,
          error: `\u8FDE\u63A5\u8D85\u65F6\uFF08${timeout / 1e3}\u79D2\uFF09`
        };
      }
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error"
      };
    }
  }
  async syncNote(data) {
    var _a, _b;
    console.log("[MarkdownBrain] Starting sync:", {
      path: data.path,
      action: data.action,
      hasContent: !!data.content,
      contentLength: (_a = data.content) == null ? void 0 : _a.length,
      serverUrl: this.config.serverUrl,
      hasSyncKey: !!this.config.syncKey
    });
    try {
      const requestBody = JSON.stringify(data);
      console.log("[MarkdownBrain] Request body size:", requestBody.length, "bytes");
      const response = await this.http.request({
        url: `${this.config.serverUrl}/obsidian/sync`,
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${this.config.syncKey}`
        },
        body: requestBody
      });
      console.log("[MarkdownBrain] Response:", {
        status: response.status,
        bodyPreview: (_b = response.text) == null ? void 0 : _b.substring(0, 200)
      });
      if (response.status === 200) {
        console.log("[MarkdownBrain] \u2713 Sync successful:", data.path);
        return { success: true };
      } else {
        const errorMsg = `HTTP ${response.status}: ${response.text || "Sync failed"}`;
        console.error("[MarkdownBrain] \u2717 Sync failed:", {
          path: data.path,
          status: response.status,
          error: errorMsg,
          responseBody: response.text
        });
        return {
          success: false,
          error: errorMsg
        };
      }
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 Sync exception:", {
        path: data.path,
        error,
        errorMessage: error instanceof Error ? error.message : "Unknown error",
        errorStack: error instanceof Error ? error.stack : void 0
      });
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error"
      };
    }
  }
  async fullSync(clientIds) {
    console.log("[MarkdownBrain] Starting full sync...", {
      clientNoteCount: clientIds.length
    });
    try {
      const requestBody = { clientIds };
      const response = await this.http.request({
        url: `${this.config.serverUrl}/obsidian/sync/full`,
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${this.config.syncKey}`
        },
        body: JSON.stringify(requestBody)
      });
      if (response.status === 404) {
        console.warn("[MarkdownBrain] Full sync not supported by server (404), skipping orphan cleanup");
        return {
          success: true,
          data: {
            "vault-id": "",
            action: "full-sync",
            "client-notes": clientIds.length,
            "deleted-count": 0,
            "remaining-notes": clientIds.length
          }
        };
      }
      if (response.status === 200) {
        const data = response.json;
        console.log("[MarkdownBrain] \u2713 Full sync successful:", {
          deletedCount: data == null ? void 0 : data["deleted-count"],
          remainingNotes: data == null ? void 0 : data["remaining-notes"]
        });
        return {
          success: true,
          data
        };
      } else {
        const errorMsg = `HTTP ${response.status}: ${response.text || "Full sync failed"}`;
        console.error("[MarkdownBrain] \u2717 Full sync failed:", {
          status: response.status,
          error: errorMsg
        });
        return {
          success: false,
          error: errorMsg
        };
      }
    } catch (error) {
      const errorMsg = error instanceof Error ? error.message : "Unknown error";
      console.error("[MarkdownBrain] \u2717 Full sync exception:", {
        error: errorMsg
      });
      return {
        success: false,
        error: errorMsg
      };
    }
  }
  async syncResource(data) {
    console.log("[MarkdownBrain] Starting resource sync:", {
      path: data.path,
      action: data.action,
      contentType: data.contentType,
      sizeBytes: data.sizeBytes
    });
    try {
      const response = await this.http.request({
        url: `${this.config.serverUrl}/obsidian/resources/sync`,
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${this.config.syncKey}`
        },
        body: JSON.stringify(data)
      });
      if (response.status === 200) {
        console.log("[MarkdownBrain] \u2713 Resource sync successful:", data.path);
        return { success: true };
      } else {
        const errorMsg = `HTTP ${response.status}: ${response.text || "Resource sync failed"}`;
        console.error("[MarkdownBrain] \u2717 Resource sync failed:", {
          path: data.path,
          status: response.status,
          error: errorMsg
        });
        return { success: false, error: errorMsg };
      }
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 Resource sync exception:", {
        path: data.path,
        error: error instanceof Error ? error.message : "Unknown error"
      });
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error"
      };
    }
  }
  destroy() {
  }
};

// src/api/obsidian-http-client.ts
var import_obsidian2 = require("obsidian");
var ObsidianHttpClient = class {
  async request(req) {
    const response = await (0, import_obsidian2.requestUrl)({
      url: req.url,
      method: req.method,
      headers: req.headers,
      body: req.body,
      throw: false
    });
    return {
      status: response.status,
      json: response.json,
      text: response.text
    };
  }
};

// src/services/debounce.ts
var defaultTimerFactory = {
  setTimeout: (callback, delay) => setTimeout(callback, delay),
  clearTimeout: (id) => clearTimeout(id)
};
var DebounceService = class {
  constructor(timerFactory = defaultTimerFactory) {
    this.timers = /* @__PURE__ */ new Map();
    this.timerFactory = timerFactory;
  }
  /**
   * Schedule a debounced callback for the given key
   * If a timer already exists for the key, it will be cancelled and replaced
   */
  debounce(key, callback, delay) {
    const existingTimer = this.timers.get(key);
    if (existingTimer !== void 0) {
      this.timerFactory.clearTimeout(existingTimer);
    }
    const timer = this.timerFactory.setTimeout(() => {
      this.timers.delete(key);
      callback();
    }, delay);
    this.timers.set(key, timer);
  }
  /**
   * Cancel a specific debounced operation by key
   */
  cancel(key) {
    const timer = this.timers.get(key);
    if (timer !== void 0) {
      this.timerFactory.clearTimeout(timer);
      this.timers.delete(key);
    }
  }
  /**
   * Clear all pending timers
   */
  clearAll() {
    for (const timer of this.timers.values()) {
      this.timerFactory.clearTimeout(timer);
    }
    this.timers.clear();
  }
  /**
   * Check if a key has a pending timer
   */
  has(key) {
    return this.timers.has(key);
  }
};

// src/services/client-id-cache.ts
var ClientIdCache = class {
  constructor() {
    this.cache = /* @__PURE__ */ new Map();
  }
  /**
   * Get client ID for a file path
   */
  get(path) {
    return this.cache.get(path);
  }
  /**
   * Set client ID for a file path
   */
  set(path, clientId) {
    this.cache.set(path, clientId);
  }
  /**
   * Check if a path has a cached client ID
   */
  has(path) {
    return this.cache.has(path);
  }
  /**
   * Remove client ID for a file path
   */
  delete(path) {
    this.cache.delete(path);
  }
  /**
   * Handle file rename - moves client ID from old path to new path
   */
  rename(oldPath, newPath) {
    const clientId = this.cache.get(oldPath);
    if (clientId !== void 0) {
      this.cache.delete(oldPath);
      this.cache.set(newPath, clientId);
    }
  }
  /**
   * Clear all cached entries
   */
  clear() {
    this.cache.clear();
  }
  /**
   * Get number of cached entries
   */
  get size() {
    return this.cache.size;
  }
  /**
   * Get all entries as array of [path, clientId] tuples
   */
  entries() {
    return Array.from(this.cache.entries());
  }
  /**
   * Get all client IDs
   */
  getAllClientIds() {
    return Array.from(this.cache.values());
  }
  /**
   * Build cache from entries (replaces existing cache)
   */
  buildFromEntries(entries) {
    this.cache.clear();
    for (const [path, clientId] of entries) {
      this.cache.set(path, clientId);
    }
  }
};

// src/services/metadata-extractor.ts
function extractNoteMetadata(cached) {
  if (!cached) {
    return {};
  }
  const metadata = {};
  if (cached.tags) {
    metadata.tags = cached.tags.map((tag) => ({
      tag: tag.tag,
      position: tag.position
    }));
  }
  if (cached.headings) {
    metadata.headings = cached.headings.map((heading) => ({
      heading: heading.heading,
      level: heading.level,
      position: heading.position
    }));
  }
  if (cached.frontmatter) {
    metadata.frontmatter = cached.frontmatter;
  }
  return metadata;
}

// src/plugin/settings-tab.ts
var import_obsidian3 = require("obsidian");
var MarkdownBrainSettingTab = class extends import_obsidian3.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "MarkdownBrain \u540C\u6B65\u8BBE\u7F6E" });
    new import_obsidian3.Setting(containerEl).setName("\u670D\u52A1\u5668\u5730\u5740").setDesc("MarkdownBrain \u670D\u52A1\u5668 API \u5730\u5740").addText((text) => text.setPlaceholder("https://api.markdownbrain.com").setValue(this.plugin.settings.serverUrl).onChange(async (value) => {
      this.plugin.settings.serverUrl = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Sync Key").setDesc("\u4ECE\u7BA1\u7406\u540E\u53F0\u83B7\u53D6\u7684\u540C\u6B65\u5BC6\u94A5").addText((text) => text.setPlaceholder("xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx").setValue(this.plugin.settings.syncKey).onChange(async (value) => {
      this.plugin.settings.syncKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("\u6D4B\u8BD5\u8FDE\u63A5").setDesc("\u6D4B\u8BD5\u4E0E\u670D\u52A1\u5668\u7684\u8FDE\u63A5\uFF0830\u79D2\u8D85\u65F6\uFF09").addButton((button) => button.setButtonText("\u6D4B\u8BD5").onClick(async () => {
      button.setDisabled(true);
      button.setButtonText("\u6D4B\u8BD5\u4E2D...");
      new import_obsidian3.Notice("\u6B63\u5728\u6D4B\u8BD5\u8FDE\u63A5...");
      const result = await this.plugin.syncManager.testConnection(3e4);
      button.setDisabled(false);
      button.setButtonText("\u6D4B\u8BD5");
      if (result.success && result.vaultInfo) {
        new import_obsidian3.Notice(
          `\u2705 \u8FDE\u63A5\u6210\u529F\uFF01
Vault: ${result.vaultInfo.name}
Domain: ${result.vaultInfo.domain}`,
          5e3
        );
      } else {
        new import_obsidian3.Notice(`\u274C \u8FDE\u63A5\u5931\u8D25: ${result.error || "Unknown error"}`, 5e3);
      }
    }));
    new import_obsidian3.Setting(containerEl).setName("\u6279\u91CF\u540C\u6B65").setDesc("\u624B\u52A8\u540C\u6B65\u6240\u6709 Markdown \u6587\u4EF6\u5230\u670D\u52A1\u5668").addButton((button) => button.setButtonText("\u5F00\u59CB\u540C\u6B65").onClick(async () => {
      button.setDisabled(true);
      button.setButtonText("\u540C\u6B65\u4E2D...");
      await this.plugin.syncAllFiles();
      button.setDisabled(false);
      button.setButtonText("\u5F00\u59CB\u540C\u6B65");
    }));
    new import_obsidian3.Setting(containerEl).setName("\u81EA\u52A8\u540C\u6B65").setDesc("\u6587\u4EF6\u4FEE\u6539\u65F6\u81EA\u52A8\u540C\u6B65\u5230\u670D\u52A1\u5668").addToggle((toggle) => toggle.setValue(this.plugin.settings.autoSync).onChange(async (value) => {
      this.plugin.settings.autoSync = value;
      await this.plugin.saveSettings();
    }));
  }
};

// src/plugin/events.ts
var import_obsidian4 = require("obsidian");
function registerFileEvents(app, handlers, pendingSyncs, registerEvent) {
  registerEvent(
    app.vault.on("create", (file) => {
      if (file instanceof import_obsidian4.TFile) {
        if (file.extension === "md") {
          handlers.onFileChange(file, "create");
        } else if (isResourceFile(file)) {
          handlers.onResourceChange(file, "upsert");
        }
      }
    })
  );
  registerEvent(
    app.vault.on("modify", (file) => {
      if (file instanceof import_obsidian4.TFile) {
        if (file.extension === "md") {
          pendingSyncs.add(file.path);
        } else if (isResourceFile(file)) {
          handlers.onResourceChange(file, "upsert");
        }
      }
    })
  );
  registerEvent(
    app.metadataCache.on("resolved", () => {
      pendingSyncs.forEach((filePath) => {
        const file = app.vault.getAbstractFileByPath(filePath);
        if (file instanceof import_obsidian4.TFile) {
          handlers.onFileChange(file, "modify");
        }
      });
      pendingSyncs.clear();
      handlers.onMetadataResolved();
    })
  );
  registerEvent(
    app.vault.on("delete", (file) => {
      if (file instanceof import_obsidian4.TFile) {
        if (file.extension === "md") {
          handlers.onFileDelete(file);
        } else if (isResourceFile(file)) {
          handlers.onResourceDelete(file);
        }
      }
    })
  );
  registerEvent(
    app.vault.on("rename", (file, oldPath) => {
      if (file instanceof import_obsidian4.TFile) {
        if (file.extension === "md") {
          handlers.onFileRename(file, oldPath);
        } else if (isResourceFile(file)) {
          handlers.onResourceRename(file, oldPath);
        }
      }
    })
  );
}

// src/main.ts
var MarkdownBrainPlugin = class extends import_obsidian5.Plugin {
  constructor(app, manifest) {
    super(app, manifest);
    this.debounceService = new DebounceService();
    this.pendingSyncs = /* @__PURE__ */ new Set();
    this.clientIdCache = new ClientIdCache();
  }
  async onload() {
    var _a;
    console.log("[MarkdownBrain] ========================================");
    console.log("[MarkdownBrain] Plugin loading...");
    await this.loadSettings();
    console.log("[MarkdownBrain] Settings loaded:", {
      serverUrl: this.settings.serverUrl,
      hasSyncKey: !!this.settings.syncKey,
      syncKeyLength: (_a = this.settings.syncKey) == null ? void 0 : _a.length,
      autoSync: this.settings.autoSync
    });
    const httpClient = new ObsidianHttpClient();
    this.syncManager = new SyncApiClient({
      serverUrl: this.settings.serverUrl,
      syncKey: this.settings.syncKey
    }, httpClient);
    console.log("[MarkdownBrain] SyncManager initialized");
    registerFileEvents(
      this.app,
      {
        onFileChange: (file, action) => this.handleFileChange(file, action),
        onFileDelete: (file) => this.handleFileDelete(file),
        onFileRename: (file, oldPath) => this.handleFileRename(file, oldPath),
        onResourceChange: (file, action) => this.handleResourceChange(file, action),
        onResourceDelete: (file) => this.handleResourceDelete(file),
        onResourceRename: (file, oldPath) => this.handleResourceRename(file, oldPath),
        onMetadataResolved: () => {
        }
      },
      {
        add: (path) => this.pendingSyncs.add(path),
        clear: () => this.pendingSyncs.clear(),
        forEach: (cb) => this.pendingSyncs.forEach(cb)
      },
      (event) => this.registerEvent(event)
    );
    console.log("[MarkdownBrain] File events registered");
    this.addSettingTab(new MarkdownBrainSettingTab(this.app, this));
    console.log("[MarkdownBrain] Settings tab added");
    this.addCommand({
      id: "sync-current-file",
      name: "Sync current file",
      callback: () => {
        const file = this.app.workspace.getActiveFile();
        if (file) {
          this.handleFileChange(file, "modify");
        }
      }
    });
    this.addCommand({
      id: "sync-all-files",
      name: "Sync all files",
      callback: () => {
        this.syncAllFiles();
      }
    });
    console.log("[MarkdownBrain] Commands registered");
    await this.buildClientIdCache();
    console.log("[MarkdownBrain] \u2713 Plugin loaded successfully");
    console.log("[MarkdownBrain] ========================================");
  }
  async buildClientIdCache() {
    var _a;
    const files = this.app.vault.getMarkdownFiles();
    let cached = 0;
    for (const file of files) {
      const cache = this.app.metadataCache.getFileCache(file);
      const clientId = (_a = cache == null ? void 0 : cache.frontmatter) == null ? void 0 : _a[CLIENT_ID_KEY];
      if (clientId) {
        this.clientIdCache.set(file.path, String(clientId).trim());
        cached++;
      }
    }
    console.log(`[MarkdownBrain] ClientId cache built: ${cached}/${files.length} files`);
  }
  async handleFileChange(file, action) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping:", file.path);
      return;
    }
    this.debounceService.debounce(file.path, async () => {
      await this.performSync(file, action);
    }, 300);
  }
  async performSync(file, action) {
    var _a, _b;
    console.log("[MarkdownBrain] File change detected:", {
      path: file.path,
      action,
      extension: file.extension,
      size: file.stat.size
    });
    try {
      const content = await this.app.vault.read(file);
      console.log("[MarkdownBrain] File read successfully:", {
        path: file.path,
        contentLength: content.length
      });
      const cachedMetadata = this.app.metadataCache.getFileCache(file);
      const metadata = extractNoteMetadata(cachedMetadata);
      console.log("[MarkdownBrain] Metadata extracted:", {
        path: file.path,
        tagsCount: ((_a = metadata.tags) == null ? void 0 : _a.length) || 0,
        headingsCount: ((_b = metadata.headings) == null ? void 0 : _b.length) || 0,
        hasFrontmatter: !!metadata.frontmatter
      });
      const stat = file.stat;
      const hash = await hashString(content);
      const mtime = new Date(stat.mtime).toISOString();
      const clientId = await getOrCreateClientId(file, content, this.app);
      console.log("[MarkdownBrain] File metadata:", {
        path: file.path,
        clientId,
        hash,
        mtime
      });
      const syncData = {
        path: file.path,
        clientId,
        clientType: "obsidian",
        content,
        hash,
        mtime,
        metadata,
        action
      };
      const result = await this.syncManager.syncNote(syncData);
      if (result.success) {
        this.clientIdCache.set(file.path, clientId);
        console.log("[MarkdownBrain] \u2713 File synced successfully:", file.path);
      } else {
        console.error("[MarkdownBrain] \u2717 File sync failed:", file.path, result.error);
        new import_obsidian5.Notice(`\u540C\u6B65\u5931\u8D25: ${file.path}
${result.error}`);
      }
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 File change handler error:", {
        path: file.path,
        error,
        errorMessage: error instanceof Error ? error.message : "Unknown error",
        errorStack: error instanceof Error ? error.stack : void 0
      });
      new import_obsidian5.Notice(`\u540C\u6B65\u9519\u8BEF: ${error instanceof Error ? error.message : "Unknown error"}`);
    }
  }
  async handleFileDelete(file) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping delete:", file.path);
      return;
    }
    console.log("[MarkdownBrain] File deletion detected:", {
      path: file.path,
      extension: file.extension
    });
    const clientId = this.clientIdCache.get(file.path);
    if (!clientId) {
      console.warn("[MarkdownBrain] Cannot sync deletion - clientId not in cache:", file.path);
      return;
    }
    const result = await this.syncManager.syncNote({
      path: file.path,
      clientId,
      clientType: "obsidian",
      action: "delete"
    });
    if (result.success) {
      this.clientIdCache.delete(file.path);
      console.log("[MarkdownBrain] \u2713 File deletion synced:", file.path);
    } else {
      console.error("[MarkdownBrain] \u2717 File deletion sync failed:", file.path, result.error);
    }
  }
  async handleFileRename(file, oldPath) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping rename:", oldPath, "->", file.path);
      return;
    }
    console.log("[MarkdownBrain] File rename detected:", {
      oldPath,
      newPath: file.path,
      extension: file.extension
    });
    this.clientIdCache.rename(oldPath, file.path);
    try {
      console.log("[MarkdownBrain] Syncing rename with frontmatter UUID");
      await this.performSync(file, "modify");
      console.log("[MarkdownBrain] \u2713 File rename synced:", oldPath, "->", file.path);
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 Rename sync exception:", {
        oldPath,
        newPath: file.path,
        error,
        errorMessage: error instanceof Error ? error.message : "Unknown error"
      });
      new import_obsidian5.Notice(`\u91CD\u547D\u540D\u540C\u6B65\u9519\u8BEF: ${error instanceof Error ? error.message : "Unknown error"}`);
    }
  }
  async handleResourceChange(file, action) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping resource:", file.path);
      return;
    }
    this.debounceService.debounce(file.path, async () => {
      await this.performResourceSync(file, action);
    }, 500);
  }
  async performResourceSync(file, action) {
    console.log("[MarkdownBrain] Resource change detected:", {
      path: file.path,
      action,
      extension: file.extension,
      size: file.stat.size
    });
    try {
      const buffer = await this.app.vault.readBinary(file);
      const content = await arrayBufferToBase64(buffer);
      const sha256 = await sha256Hash(buffer);
      const syncData = {
        path: file.path,
        content,
        contentType: getContentType(file.extension),
        sha256,
        sizeBytes: buffer.byteLength,
        action
      };
      const result = await this.syncManager.syncResource(syncData);
      if (result.success) {
        console.log("[MarkdownBrain] \u2713 Resource synced successfully:", file.path);
      } else {
        console.error("[MarkdownBrain] \u2717 Resource sync failed:", file.path, result.error);
        new import_obsidian5.Notice(`\u8D44\u6E90\u540C\u6B65\u5931\u8D25: ${file.path}
${result.error}`);
      }
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 Resource sync exception:", {
        path: file.path,
        error: error instanceof Error ? error.message : "Unknown error"
      });
      new import_obsidian5.Notice(`\u8D44\u6E90\u540C\u6B65\u9519\u8BEF: ${error instanceof Error ? error.message : "Unknown error"}`);
    }
  }
  async handleResourceDelete(file) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping resource delete:", file.path);
      return;
    }
    console.log("[MarkdownBrain] Resource deletion detected:", file.path);
    const result = await this.syncManager.syncResource({
      path: file.path,
      contentType: getContentType(file.extension),
      action: "delete"
    });
    if (result.success) {
      console.log("[MarkdownBrain] \u2713 Resource deletion synced:", file.path);
    } else {
      console.error("[MarkdownBrain] \u2717 Resource deletion sync failed:", file.path, result.error);
    }
  }
  async handleResourceRename(file, oldPath) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping resource rename:", oldPath, "->", file.path);
      return;
    }
    console.log("[MarkdownBrain] Resource rename detected:", oldPath, "->", file.path);
    await this.syncManager.syncResource({
      path: oldPath,
      contentType: getContentType(file.extension),
      action: "delete"
    });
    await this.performResourceSync(file, "upsert");
  }
  /**
   * 全量同步所有文件
   * @flow 收集 IDs → 清理孤儿 → 增量同步
   * @complexity O(n) where n = 文件数量
   */
  async syncAllFiles() {
    const files = this.app.vault.getMarkdownFiles();
    console.log(`[MarkdownBrain] Starting full sync for ${files.length} files`);
    new import_obsidian5.Notice(`\u5F00\u59CB\u5168\u91CF\u540C\u6B65 ${files.length} \u4E2A\u6587\u4EF6...`);
    const clientIds = await this.collectClientIds(files);
    console.log(`[MarkdownBrain] Collected ${clientIds.length} client IDs`);
    await this.cleanupOrphans(clientIds);
    await this.incrementalSyncBatch(files);
  }
  /**
   * 收集所有文件的 client_ids
   * @complexity O(n) time, O(n) space
   */
  async collectClientIds(files) {
    const ids = [];
    for (const file of files) {
      try {
        const content = await this.app.vault.read(file);
        if ((content == null ? void 0 : content.trim().length) > 0) {
          ids.push(await getOrCreateClientId(file, content, this.app));
        }
      } catch (error) {
        console.error(`[MarkdownBrain] Failed to read ${file.path}:`, error);
      }
    }
    return ids;
  }
  /**
   * 清理孤儿笔记
   * @complexity O(1) - 单次网络请求
   */
  async cleanupOrphans(clientIds) {
    var _a;
    try {
      const result = await this.syncManager.fullSync(clientIds);
      const deleted = ((_a = result.data) == null ? void 0 : _a["deleted-count"]) || 0;
      if (deleted > 0) {
        console.log(`[MarkdownBrain] \u2713 Cleaned ${deleted} orphan notes`);
        new import_obsidian5.Notice(`\u6E05\u7406\u4E86 ${deleted} \u4E2A\u5B64\u513F\u7B14\u8BB0`);
      } else if (result.success) {
        console.log("[MarkdownBrain] \u2713 No orphan notes found");
      }
    } catch (error) {
      console.error("[MarkdownBrain] Full sync error:", error);
    }
  }
  /**
   * 批量增量同步
   * @complexity O(n) with batching
   */
  async incrementalSyncBatch(files) {
    const stats = { success: 0, failed: 0, skipped: 0 };
    const batchSize = 10;
    for (let i = 0; i < files.length; i += batchSize) {
      const batch = files.slice(i, i + batchSize);
      await Promise.all(batch.map((file) => this.syncOneFile(file, stats)));
      const progress = Math.min(i + batchSize, files.length);
      new import_obsidian5.Notice(`\u540C\u6B65\u8FDB\u5EA6: ${progress}/${files.length} (\u6210\u529F: ${stats.success}, \u5931\u8D25: ${stats.failed}, \u8DF3\u8FC7: ${stats.skipped})`);
    }
    const finalMsg = `\u540C\u6B65\u5B8C\u6210! \u603B\u8BA1: ${files.length}, \u6210\u529F: ${stats.success}, \u5931\u8D25: ${stats.failed}, \u8DF3\u8FC7: ${stats.skipped}`;
    console.log(`[MarkdownBrain] ${finalMsg}`);
    new import_obsidian5.Notice(finalMsg, 8e3);
  }
  /**
   * 同步单个文件
   */
  async syncOneFile(file, stats) {
    try {
      await this.performSync(file, "modify");
      stats.success++;
    } catch (error) {
      stats.failed++;
      console.error(`[MarkdownBrain] \u2717 Failed to sync ${file.path}:`, error);
    }
  }
  onunload() {
    console.log("Unloading MarkdownBrain plugin");
    this.debounceService.clearAll();
    this.syncManager.destroy();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.syncManager.updateConfig({
      serverUrl: this.settings.serverUrl,
      syncKey: this.settings.syncKey
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vLi4vLi4vb2JzaWRpYW4tcGx1Z2luL3NyYy9tYWluLnRzIiwgIi4uLy4uLy4uLy4uLy4uL29ic2lkaWFuLXBsdWdpbi9zcmMvY29yZS9jbGllbnQtaWQudHMiLCAiLi4vLi4vLi4vLi4vLi4vb2JzaWRpYW4tcGx1Z2luL3NyYy9kb21haW4vdHlwZXMudHMiLCAiLi4vLi4vLi4vLi4vLi4vb2JzaWRpYW4tcGx1Z2luL3NyYy91dGlscy9yZXNvdXJjZS50cyIsICIuLi8uLi8uLi8uLi8uLi9vYnNpZGlhbi1wbHVnaW4vc3JjL3V0aWxzL21pbWUudHMiLCAiLi4vLi4vLi4vLi4vLi4vb2JzaWRpYW4tcGx1Z2luL3NyYy91dGlscy9lbmNvZGluZy50cyIsICIuLi8uLi8uLi8uLi8uLi9vYnNpZGlhbi1wbHVnaW4vc3JjL3V0aWxzL2hhc2gudHMiLCAiLi4vLi4vLi4vLi4vLi4vb2JzaWRpYW4tcGx1Z2luL3NyYy9hcGkvc3luYy1hcGkudHMiLCAiLi4vLi4vLi4vLi4vLi4vb2JzaWRpYW4tcGx1Z2luL3NyYy9hcGkvb2JzaWRpYW4taHR0cC1jbGllbnQudHMiLCAiLi4vLi4vLi4vLi4vLi4vb2JzaWRpYW4tcGx1Z2luL3NyYy9zZXJ2aWNlcy9kZWJvdW5jZS50cyIsICIuLi8uLi8uLi8uLi8uLi9vYnNpZGlhbi1wbHVnaW4vc3JjL3NlcnZpY2VzL2NsaWVudC1pZC1jYWNoZS50cyIsICIuLi8uLi8uLi8uLi8uLi9vYnNpZGlhbi1wbHVnaW4vc3JjL3NlcnZpY2VzL21ldGFkYXRhLWV4dHJhY3Rvci50cyIsICIuLi8uLi8uLi8uLi8uLi9vYnNpZGlhbi1wbHVnaW4vc3JjL3BsdWdpbi9zZXR0aW5ncy10YWIudHMiLCAiLi4vLi4vLi4vLi4vLi4vb2JzaWRpYW4tcGx1Z2luL3NyYy9wbHVnaW4vZXZlbnRzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBBcHAsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5NYW5pZmVzdCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBDTElFTlRfSURfS0VZLCBnZXRPckNyZWF0ZUNsaWVudElkIH0gZnJvbSAnLi9jb3JlL2NsaWVudC1pZCc7XG5pbXBvcnQge1xuICAgIE1hcmtkb3duQnJhaW5TZXR0aW5ncyxcbiAgICBERUZBVUxUX1NFVFRJTkdTLFxuICAgIFN5bmNTdGF0cyxcbiAgICBSZXNvdXJjZVN5bmNEYXRhLFxufSBmcm9tICcuL2RvbWFpbi90eXBlcyc7XG5pbXBvcnQgeyBpc1Jlc291cmNlRmlsZSwgZ2V0Q29udGVudFR5cGUsIGFycmF5QnVmZmVyVG9CYXNlNjQsIHNoYTI1Nkhhc2gsIGhhc2hTdHJpbmcgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7IFN5bmNBcGlDbGllbnQsIE9ic2lkaWFuSHR0cENsaWVudCB9IGZyb20gJy4vYXBpJztcbmltcG9ydCB7IERlYm91bmNlU2VydmljZSwgQ2xpZW50SWRDYWNoZSwgZXh0cmFjdE5vdGVNZXRhZGF0YSB9IGZyb20gJy4vc2VydmljZXMnO1xuaW1wb3J0IHsgTWFya2Rvd25CcmFpblNldHRpbmdUYWIsIHJlZ2lzdGVyRmlsZUV2ZW50cyB9IGZyb20gJy4vcGx1Z2luJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFya2Rvd25CcmFpblBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gICAgc2V0dGluZ3MhOiBNYXJrZG93bkJyYWluU2V0dGluZ3M7XG4gICAgc3luY01hbmFnZXIhOiBTeW5jQXBpQ2xpZW50O1xuICAgIHByaXZhdGUgZGVib3VuY2VTZXJ2aWNlOiBEZWJvdW5jZVNlcnZpY2U7XG4gICAgcHJpdmF0ZSBwZW5kaW5nU3luY3M6IFNldDxzdHJpbmc+O1xuICAgIHByaXZhdGUgY2xpZW50SWRDYWNoZTogQ2xpZW50SWRDYWNoZTtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBtYW5pZmVzdDogUGx1Z2luTWFuaWZlc3QpIHtcbiAgICAgICAgc3VwZXIoYXBwLCBtYW5pZmVzdCk7XG4gICAgICAgIHRoaXMuZGVib3VuY2VTZXJ2aWNlID0gbmV3IERlYm91bmNlU2VydmljZSgpO1xuICAgICAgICB0aGlzLnBlbmRpbmdTeW5jcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgdGhpcy5jbGllbnRJZENhY2hlID0gbmV3IENsaWVudElkQ2FjaGUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBvbmxvYWQoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpO1xuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFBsdWdpbiBsb2FkaW5nLi4uJyk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFNldHRpbmdzIGxvYWRlZDonLCB7XG4gICAgICAgICAgICBzZXJ2ZXJVcmw6IHRoaXMuc2V0dGluZ3Muc2VydmVyVXJsLFxuICAgICAgICAgICAgaGFzU3luY0tleTogISF0aGlzLnNldHRpbmdzLnN5bmNLZXksXG4gICAgICAgICAgICBzeW5jS2V5TGVuZ3RoOiB0aGlzLnNldHRpbmdzLnN5bmNLZXk/Lmxlbmd0aCxcbiAgICAgICAgICAgIGF1dG9TeW5jOiB0aGlzLnNldHRpbmdzLmF1dG9TeW5jXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1NTQwQ1x1NkI2NVx1N0JBMVx1NzQwNlx1NTY2OFxuICAgICAgICBjb25zdCBodHRwQ2xpZW50ID0gbmV3IE9ic2lkaWFuSHR0cENsaWVudCgpO1xuICAgICAgICB0aGlzLnN5bmNNYW5hZ2VyID0gbmV3IFN5bmNBcGlDbGllbnQoe1xuICAgICAgICAgICAgc2VydmVyVXJsOiB0aGlzLnNldHRpbmdzLnNlcnZlclVybCxcbiAgICAgICAgICAgIHN5bmNLZXk6IHRoaXMuc2V0dGluZ3Muc3luY0tleVxuICAgICAgICB9LCBodHRwQ2xpZW50KTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBTeW5jTWFuYWdlciBpbml0aWFsaXplZCcpO1xuXG4gICAgICAgIHJlZ2lzdGVyRmlsZUV2ZW50cyhcbiAgICAgICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG9uRmlsZUNoYW5nZTogKGZpbGUsIGFjdGlvbikgPT4gdGhpcy5oYW5kbGVGaWxlQ2hhbmdlKGZpbGUsIGFjdGlvbiksXG4gICAgICAgICAgICAgICAgb25GaWxlRGVsZXRlOiAoZmlsZSkgPT4gdGhpcy5oYW5kbGVGaWxlRGVsZXRlKGZpbGUpLFxuICAgICAgICAgICAgICAgIG9uRmlsZVJlbmFtZTogKGZpbGUsIG9sZFBhdGgpID0+IHRoaXMuaGFuZGxlRmlsZVJlbmFtZShmaWxlLCBvbGRQYXRoKSxcbiAgICAgICAgICAgICAgICBvblJlc291cmNlQ2hhbmdlOiAoZmlsZSwgYWN0aW9uKSA9PiB0aGlzLmhhbmRsZVJlc291cmNlQ2hhbmdlKGZpbGUsIGFjdGlvbiksXG4gICAgICAgICAgICAgICAgb25SZXNvdXJjZURlbGV0ZTogKGZpbGUpID0+IHRoaXMuaGFuZGxlUmVzb3VyY2VEZWxldGUoZmlsZSksXG4gICAgICAgICAgICAgICAgb25SZXNvdXJjZVJlbmFtZTogKGZpbGUsIG9sZFBhdGgpID0+IHRoaXMuaGFuZGxlUmVzb3VyY2VSZW5hbWUoZmlsZSwgb2xkUGF0aCksXG4gICAgICAgICAgICAgICAgb25NZXRhZGF0YVJlc29sdmVkOiAoKSA9PiB7fSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYWRkOiAocGF0aCkgPT4gdGhpcy5wZW5kaW5nU3luY3MuYWRkKHBhdGgpLFxuICAgICAgICAgICAgICAgIGNsZWFyOiAoKSA9PiB0aGlzLnBlbmRpbmdTeW5jcy5jbGVhcigpLFxuICAgICAgICAgICAgICAgIGZvckVhY2g6IChjYikgPT4gdGhpcy5wZW5kaW5nU3luY3MuZm9yRWFjaChjYiksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgKGV2ZW50KSA9PiB0aGlzLnJlZ2lzdGVyRXZlbnQoZXZlbnQpXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gRmlsZSBldmVudHMgcmVnaXN0ZXJlZCcpO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1OEJCRVx1N0Y2RVx1OTc2Mlx1Njc3RlxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IE1hcmtkb3duQnJhaW5TZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gU2V0dGluZ3MgdGFiIGFkZGVkJyk7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1NDdEXHU0RUU0XHVGRjFBXHU2MjRCXHU1MkE4XHU1NDBDXHU2QjY1XHU1RjUzXHU1MjREXHU2NTg3XHU0RUY2XG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ3N5bmMtY3VycmVudC1maWxlJyxcbiAgICAgICAgICAgIG5hbWU6ICdTeW5jIGN1cnJlbnQgZmlsZScsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICAgICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRmlsZUNoYW5nZShmaWxlLCAnbW9kaWZ5Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTU0N0RcdTRFRTRcdUZGMUFcdTU0MENcdTZCNjVcdTYyNDBcdTY3MDlcdTY1ODdcdTRFRjZcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnc3luYy1hbGwtZmlsZXMnLFxuICAgICAgICAgICAgbmFtZTogJ1N5bmMgYWxsIGZpbGVzJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zeW5jQWxsRmlsZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gQ29tbWFuZHMgcmVnaXN0ZXJlZCcpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuYnVpbGRDbGllbnRJZENhY2hlKCk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBcdTI3MTMgUGx1Z2luIGxvYWRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Jyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBidWlsZENsaWVudElkQ2FjaGUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBsZXQgY2FjaGVkID0gMDtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudElkID0gY2FjaGU/LmZyb250bWF0dGVyPy5bQ0xJRU5UX0lEX0tFWV07XG4gICAgICAgICAgICBpZiAoY2xpZW50SWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudElkQ2FjaGUuc2V0KGZpbGUucGF0aCwgU3RyaW5nKGNsaWVudElkKS50cmltKCkpO1xuICAgICAgICAgICAgICAgIGNhY2hlZCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhgW01hcmtkb3duQnJhaW5dIENsaWVudElkIGNhY2hlIGJ1aWx0OiAke2NhY2hlZH0vJHtmaWxlcy5sZW5ndGh9IGZpbGVzYCk7XG4gICAgfVxuXG4gICAgYXN5bmMgaGFuZGxlRmlsZUNoYW5nZShmaWxlOiBURmlsZSwgYWN0aW9uOiAnY3JlYXRlJyB8ICdtb2RpZnknKSB7XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5hdXRvU3luYykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBBdXRvLXN5bmMgZGlzYWJsZWQsIHNraXBwaW5nOicsIGZpbGUucGF0aCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTRGN0ZcdTc1MjhcdTk2MzJcdTYyOTZcdTkwN0ZcdTUxNERcdTVGRUJcdTkwMUZcdThGREVcdTdFRURcdTc2ODRcdTU0MENcdTZCNjVcbiAgICAgICAgdGhpcy5kZWJvdW5jZVNlcnZpY2UuZGVib3VuY2UoZmlsZS5wYXRoLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBlcmZvcm1TeW5jKGZpbGUsIGFjdGlvbik7XG4gICAgICAgIH0sIDMwMCk7XG4gICAgfVxuXG4gICAgYXN5bmMgcGVyZm9ybVN5bmMoZmlsZTogVEZpbGUsIGFjdGlvbjogJ2NyZWF0ZScgfCAnbW9kaWZ5Jykge1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gRmlsZSBjaGFuZ2UgZGV0ZWN0ZWQ6Jywge1xuICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICAgICAgICBleHRlbnNpb246IGZpbGUuZXh0ZW5zaW9uLFxuICAgICAgICAgICAgc2l6ZTogZmlsZS5zdGF0LnNpemVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBGaWxlIHJlYWQgc3VjY2Vzc2Z1bGx5OicsIHtcbiAgICAgICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgY29udGVudExlbmd0aDogY29udGVudC5sZW5ndGhcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBjYWNoZWRNZXRhZGF0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBleHRyYWN0Tm90ZU1ldGFkYXRhKGNhY2hlZE1ldGFkYXRhKTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBNZXRhZGF0YSBleHRyYWN0ZWQ6Jywge1xuICAgICAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgICAgICB0YWdzQ291bnQ6IG1ldGFkYXRhLnRhZ3M/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICAgICAgIGhlYWRpbmdzQ291bnQ6IG1ldGFkYXRhLmhlYWRpbmdzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgICBoYXNGcm9udG1hdHRlcjogISFtZXRhZGF0YS5mcm9udG1hdHRlclxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHN0YXQgPSBmaWxlLnN0YXQ7XG4gICAgICAgICAgICBjb25zdCBoYXNoID0gYXdhaXQgaGFzaFN0cmluZyhjb250ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IG10aW1lID0gbmV3IERhdGUoc3RhdC5tdGltZSkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudElkID0gYXdhaXQgZ2V0T3JDcmVhdGVDbGllbnRJZChmaWxlLCBjb250ZW50LCB0aGlzLmFwcCk7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gRmlsZSBtZXRhZGF0YTonLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgICAgIGNsaWVudElkOiBjbGllbnRJZCxcbiAgICAgICAgICAgICAgICBoYXNoOiBoYXNoLFxuICAgICAgICAgICAgICAgIG10aW1lOiBtdGltZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHN5bmNEYXRhID0ge1xuICAgICAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgICAgICBjbGllbnRJZDogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgY2xpZW50VHlwZTogJ29ic2lkaWFuJyxcbiAgICAgICAgICAgICAgICBjb250ZW50OiBjb250ZW50LFxuICAgICAgICAgICAgICAgIGhhc2g6IGhhc2gsXG4gICAgICAgICAgICAgICAgbXRpbWU6IG10aW1lLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBtZXRhZGF0YSxcbiAgICAgICAgICAgICAgICBhY3Rpb246IGFjdGlvblxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5zeW5jTWFuYWdlci5zeW5jTm90ZShzeW5jRGF0YSk7XG5cbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50SWRDYWNoZS5zZXQoZmlsZS5wYXRoLCBjbGllbnRJZCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBcdTI3MTMgRmlsZSBzeW5jZWQgc3VjY2Vzc2Z1bGx5OicsIGZpbGUucGF0aCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZG93bkJyYWluXSBcdTI3MTcgRmlsZSBzeW5jIGZhaWxlZDonLCBmaWxlLnBhdGgsIHJlc3VsdC5lcnJvcik7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1NDBDXHU2QjY1XHU1OTMxXHU4RDI1OiAke2ZpbGUucGF0aH1cXG4ke3Jlc3VsdC5lcnJvcn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZG93bkJyYWluXSBcdTI3MTcgRmlsZSBjaGFuZ2UgaGFuZGxlciBlcnJvcjonLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdTU0MENcdTZCNjVcdTk1MTlcdThCRUY6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBoYW5kbGVGaWxlRGVsZXRlKGZpbGU6IFRGaWxlKSB7XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5hdXRvU3luYykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBBdXRvLXN5bmMgZGlzYWJsZWQsIHNraXBwaW5nIGRlbGV0ZTonLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBGaWxlIGRlbGV0aW9uIGRldGVjdGVkOicsIHtcbiAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgIGV4dGVuc2lvbjogZmlsZS5leHRlbnNpb25cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgY2xpZW50SWQgPSB0aGlzLmNsaWVudElkQ2FjaGUuZ2V0KGZpbGUucGF0aCk7XG5cbiAgICAgICAgaWYgKCFjbGllbnRJZCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdbTWFya2Rvd25CcmFpbl0gQ2Fubm90IHN5bmMgZGVsZXRpb24gLSBjbGllbnRJZCBub3QgaW4gY2FjaGU6JywgZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc3luY01hbmFnZXIuc3luY05vdGUoe1xuICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgY2xpZW50SWQ6IGNsaWVudElkLFxuICAgICAgICAgICAgY2xpZW50VHlwZTogJ29ic2lkaWFuJyxcbiAgICAgICAgICAgIGFjdGlvbjogJ2RlbGV0ZSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICB0aGlzLmNsaWVudElkQ2FjaGUuZGVsZXRlKGZpbGUucGF0aCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFx1MjcxMyBGaWxlIGRlbGV0aW9uIHN5bmNlZDonLCBmaWxlLnBhdGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW01hcmtkb3duQnJhaW5dIFx1MjcxNyBGaWxlIGRlbGV0aW9uIHN5bmMgZmFpbGVkOicsIGZpbGUucGF0aCwgcmVzdWx0LmVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGhhbmRsZUZpbGVSZW5hbWUoZmlsZTogVEZpbGUsIG9sZFBhdGg6IHN0cmluZykge1xuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuYXV0b1N5bmMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gQXV0by1zeW5jIGRpc2FibGVkLCBza2lwcGluZyByZW5hbWU6Jywgb2xkUGF0aCwgJy0+JywgZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gRmlsZSByZW5hbWUgZGV0ZWN0ZWQ6Jywge1xuICAgICAgICAgICAgb2xkUGF0aDogb2xkUGF0aCxcbiAgICAgICAgICAgIG5ld1BhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgIGV4dGVuc2lvbjogZmlsZS5leHRlbnNpb25cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5jbGllbnRJZENhY2hlLnJlbmFtZShvbGRQYXRoLCBmaWxlLnBhdGgpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFN5bmNpbmcgcmVuYW1lIHdpdGggZnJvbnRtYXR0ZXIgVVVJRCcpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wZXJmb3JtU3luYyhmaWxlLCAnbW9kaWZ5Jyk7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gXHUyNzEzIEZpbGUgcmVuYW1lIHN5bmNlZDonLCBvbGRQYXRoLCAnLT4nLCBmaWxlLnBhdGgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW01hcmtkb3duQnJhaW5dIFx1MjcxNyBSZW5hbWUgc3luYyBleGNlcHRpb246Jywge1xuICAgICAgICAgICAgICAgIG9sZFBhdGg6IG9sZFBhdGgsXG4gICAgICAgICAgICAgICAgbmV3UGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1OTFDRFx1NTQ3RFx1NTQwRFx1NTQwQ1x1NkI2NVx1OTUxOVx1OEJFRjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGhhbmRsZVJlc291cmNlQ2hhbmdlKGZpbGU6IFRGaWxlLCBhY3Rpb246ICd1cHNlcnQnKSB7XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5hdXRvU3luYykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBBdXRvLXN5bmMgZGlzYWJsZWQsIHNraXBwaW5nIHJlc291cmNlOicsIGZpbGUucGF0aCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRlYm91bmNlU2VydmljZS5kZWJvdW5jZShmaWxlLnBhdGgsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGVyZm9ybVJlc291cmNlU3luYyhmaWxlLCBhY3Rpb24pO1xuICAgICAgICB9LCA1MDApO1xuICAgIH1cblxuICAgIGFzeW5jIHBlcmZvcm1SZXNvdXJjZVN5bmMoZmlsZTogVEZpbGUsIGFjdGlvbjogJ3Vwc2VydCcpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBSZXNvdXJjZSBjaGFuZ2UgZGV0ZWN0ZWQ6Jywge1xuICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICAgICAgICBleHRlbnNpb246IGZpbGUuZXh0ZW5zaW9uLFxuICAgICAgICAgICAgc2l6ZTogZmlsZS5zdGF0LnNpemVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWRCaW5hcnkoZmlsZSk7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgYXJyYXlCdWZmZXJUb0Jhc2U2NChidWZmZXIpO1xuICAgICAgICAgICAgY29uc3Qgc2hhMjU2ID0gYXdhaXQgc2hhMjU2SGFzaChidWZmZXIpO1xuXG4gICAgICAgICAgICBjb25zdCBzeW5jRGF0YTogUmVzb3VyY2VTeW5jRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgY29udGVudDogY29udGVudCxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogZ2V0Q29udGVudFR5cGUoZmlsZS5leHRlbnNpb24pLFxuICAgICAgICAgICAgICAgIHNoYTI1Njogc2hhMjU2LFxuICAgICAgICAgICAgICAgIHNpemVCeXRlczogYnVmZmVyLmJ5dGVMZW5ndGgsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb25cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc3luY01hbmFnZXIuc3luY1Jlc291cmNlKHN5bmNEYXRhKTtcblxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBcdTI3MTMgUmVzb3VyY2Ugc3luY2VkIHN1Y2Nlc3NmdWxseTonLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbTWFya2Rvd25CcmFpbl0gXHUyNzE3IFJlc291cmNlIHN5bmMgZmFpbGVkOicsIGZpbGUucGF0aCwgcmVzdWx0LmVycm9yKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdThENDRcdTZFOTBcdTU0MENcdTZCNjVcdTU5MzFcdThEMjU6ICR7ZmlsZS5wYXRofVxcbiR7cmVzdWx0LmVycm9yfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW01hcmtkb3duQnJhaW5dIFx1MjcxNyBSZXNvdXJjZSBzeW5jIGV4Y2VwdGlvbjonLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdThENDRcdTZFOTBcdTU0MENcdTZCNjVcdTk1MTlcdThCRUY6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBoYW5kbGVSZXNvdXJjZURlbGV0ZShmaWxlOiBURmlsZSkge1xuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuYXV0b1N5bmMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gQXV0by1zeW5jIGRpc2FibGVkLCBza2lwcGluZyByZXNvdXJjZSBkZWxldGU6JywgZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gUmVzb3VyY2UgZGVsZXRpb24gZGV0ZWN0ZWQ6JywgZmlsZS5wYXRoKTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnN5bmNNYW5hZ2VyLnN5bmNSZXNvdXJjZSh7XG4gICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICBjb250ZW50VHlwZTogZ2V0Q29udGVudFR5cGUoZmlsZS5leHRlbnNpb24pLFxuICAgICAgICAgICAgYWN0aW9uOiAnZGVsZXRlJ1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gXHUyNzEzIFJlc291cmNlIGRlbGV0aW9uIHN5bmNlZDonLCBmaWxlLnBhdGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW01hcmtkb3duQnJhaW5dIFx1MjcxNyBSZXNvdXJjZSBkZWxldGlvbiBzeW5jIGZhaWxlZDonLCBmaWxlLnBhdGgsIHJlc3VsdC5lcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBoYW5kbGVSZXNvdXJjZVJlbmFtZShmaWxlOiBURmlsZSwgb2xkUGF0aDogc3RyaW5nKSB7XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5hdXRvU3luYykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBBdXRvLXN5bmMgZGlzYWJsZWQsIHNraXBwaW5nIHJlc291cmNlIHJlbmFtZTonLCBvbGRQYXRoLCAnLT4nLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBSZXNvdXJjZSByZW5hbWUgZGV0ZWN0ZWQ6Jywgb2xkUGF0aCwgJy0+JywgZmlsZS5wYXRoKTtcblxuICAgICAgICBhd2FpdCB0aGlzLnN5bmNNYW5hZ2VyLnN5bmNSZXNvdXJjZSh7XG4gICAgICAgICAgICBwYXRoOiBvbGRQYXRoLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IGdldENvbnRlbnRUeXBlKGZpbGUuZXh0ZW5zaW9uKSxcbiAgICAgICAgICAgIGFjdGlvbjogJ2RlbGV0ZSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wZXJmb3JtUmVzb3VyY2VTeW5jKGZpbGUsICd1cHNlcnQnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcdTUxNjhcdTkxQ0ZcdTU0MENcdTZCNjVcdTYyNDBcdTY3MDlcdTY1ODdcdTRFRjZcbiAgICAgKiBAZmxvdyBcdTY1MzZcdTk2QzYgSURzIFx1MjE5MiBcdTZFMDVcdTc0MDZcdTVCNjRcdTUxM0YgXHUyMTkyIFx1NTg5RVx1OTFDRlx1NTQwQ1x1NkI2NVxuICAgICAqIEBjb21wbGV4aXR5IE8obikgd2hlcmUgbiA9IFx1NjU4N1x1NEVGNlx1NjU3MFx1OTFDRlxuICAgICAqL1xuICAgIGFzeW5jIHN5bmNBbGxGaWxlcygpIHtcbiAgICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbTWFya2Rvd25CcmFpbl0gU3RhcnRpbmcgZnVsbCBzeW5jIGZvciAke2ZpbGVzLmxlbmd0aH0gZmlsZXNgKTtcbiAgICAgICAgbmV3IE5vdGljZShgXHU1RjAwXHU1OUNCXHU1MTY4XHU5MUNGXHU1NDBDXHU2QjY1ICR7ZmlsZXMubGVuZ3RofSBcdTRFMkFcdTY1ODdcdTRFRjYuLi5gKTtcblxuICAgICAgICAvLyBcdTZCNjVcdTlBQTQgMTogXHU2NTM2XHU5NkM2IGNsaWVudF9pZHNcbiAgICAgICAgY29uc3QgY2xpZW50SWRzID0gYXdhaXQgdGhpcy5jb2xsZWN0Q2xpZW50SWRzKGZpbGVzKTtcbiAgICAgICAgY29uc29sZS5sb2coYFtNYXJrZG93bkJyYWluXSBDb2xsZWN0ZWQgJHtjbGllbnRJZHMubGVuZ3RofSBjbGllbnQgSURzYCk7XG5cbiAgICAgICAgLy8gXHU2QjY1XHU5QUE0IDI6IFx1NkUwNVx1NzQwNlx1NUI2NFx1NTEzRlx1NjU4N1x1Njg2MyAoTygxKSBcdTUzNTVcdTZCMjFcdThCRjdcdTZDNDIpXG4gICAgICAgIGF3YWl0IHRoaXMuY2xlYW51cE9ycGhhbnMoY2xpZW50SWRzKTtcblxuICAgICAgICAvLyBcdTZCNjVcdTlBQTQgMzogXHU1ODlFXHU5MUNGXHU1NDBDXHU2QjY1XG4gICAgICAgIGF3YWl0IHRoaXMuaW5jcmVtZW50YWxTeW5jQmF0Y2goZmlsZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFx1NjUzNlx1OTZDNlx1NjI0MFx1NjcwOVx1NjU4N1x1NEVGNlx1NzY4NCBjbGllbnRfaWRzXG4gICAgICogQGNvbXBsZXhpdHkgTyhuKSB0aW1lLCBPKG4pIHNwYWNlXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBjb2xsZWN0Q2xpZW50SWRzKGZpbGVzOiBURmlsZVtdKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgICAgICBjb25zdCBpZHM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgICAgICAvLyBcdTUzRUFcdTUzMDVcdTU0MkJcdTk3NUVcdTdBN0FcdTY1ODdcdTRFRjZcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudD8udHJpbSgpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWRzLnB1c2goYXdhaXQgZ2V0T3JDcmVhdGVDbGllbnRJZChmaWxlLCBjb250ZW50LCB0aGlzLmFwcCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW01hcmtkb3duQnJhaW5dIEZhaWxlZCB0byByZWFkICR7ZmlsZS5wYXRofTpgLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlkcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcdTZFMDVcdTc0MDZcdTVCNjRcdTUxM0ZcdTdCMTRcdThCQjBcbiAgICAgKiBAY29tcGxleGl0eSBPKDEpIC0gXHU1MzU1XHU2QjIxXHU3RjUxXHU3RURDXHU4QkY3XHU2QzQyXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBjbGVhbnVwT3JwaGFucyhjbGllbnRJZHM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnN5bmNNYW5hZ2VyLmZ1bGxTeW5jKGNsaWVudElkcyk7XG4gICAgICAgICAgICBjb25zdCBkZWxldGVkID0gcmVzdWx0LmRhdGE/LlsnZGVsZXRlZC1jb3VudCddIHx8IDA7XG5cbiAgICAgICAgICAgIGlmIChkZWxldGVkID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbTWFya2Rvd25CcmFpbl0gXHUyNzEzIENsZWFuZWQgJHtkZWxldGVkfSBvcnBoYW4gbm90ZXNgKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTZFMDVcdTc0MDZcdTRFODYgJHtkZWxldGVkfSBcdTRFMkFcdTVCNjRcdTUxM0ZcdTdCMTRcdThCQjBgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFx1MjcxMyBObyBvcnBoYW4gbm90ZXMgZm91bmQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIEZ1bGwtc3luYyBcdTU5MzFcdThEMjVcdTRFMERcdTRFMkRcdTY1QURcdTZENDFcdTdBMEJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZG93bkJyYWluXSBGdWxsIHN5bmMgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXHU2Mjc5XHU5MUNGXHU1ODlFXHU5MUNGXHU1NDBDXHU2QjY1XG4gICAgICogQGNvbXBsZXhpdHkgTyhuKSB3aXRoIGJhdGNoaW5nXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBpbmNyZW1lbnRhbFN5bmNCYXRjaChmaWxlczogVEZpbGVbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzdGF0czogU3luY1N0YXRzID0geyBzdWNjZXNzOiAwLCBmYWlsZWQ6IDAsIHNraXBwZWQ6IDAgfTtcbiAgICAgICAgY29uc3QgYmF0Y2hTaXplID0gMTA7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkgKz0gYmF0Y2hTaXplKSB7XG4gICAgICAgICAgICBjb25zdCBiYXRjaCA9IGZpbGVzLnNsaWNlKGksIGkgKyBiYXRjaFNpemUpO1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoYmF0Y2gubWFwKGZpbGUgPT4gdGhpcy5zeW5jT25lRmlsZShmaWxlLCBzdGF0cykpKTtcblxuICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLm1pbihpICsgYmF0Y2hTaXplLCBmaWxlcy5sZW5ndGgpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1NDBDXHU2QjY1XHU4RkRCXHU1RUE2OiAke3Byb2dyZXNzfS8ke2ZpbGVzLmxlbmd0aH0gKFx1NjIxMFx1NTI5RjogJHtzdGF0cy5zdWNjZXNzfSwgXHU1OTMxXHU4RDI1OiAke3N0YXRzLmZhaWxlZH0sIFx1OERGM1x1OEZDNzogJHtzdGF0cy5za2lwcGVkfSlgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZpbmFsTXNnID0gYFx1NTQwQ1x1NkI2NVx1NUI4Q1x1NjIxMCEgXHU2MDNCXHU4QkExOiAke2ZpbGVzLmxlbmd0aH0sIFx1NjIxMFx1NTI5RjogJHtzdGF0cy5zdWNjZXNzfSwgXHU1OTMxXHU4RDI1OiAke3N0YXRzLmZhaWxlZH0sIFx1OERGM1x1OEZDNzogJHtzdGF0cy5za2lwcGVkfWA7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbTWFya2Rvd25CcmFpbl0gJHtmaW5hbE1zZ31gKTtcbiAgICAgICAgbmV3IE5vdGljZShmaW5hbE1zZywgODAwMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXHU1NDBDXHU2QjY1XHU1MzU1XHU0RTJBXHU2NTg3XHU0RUY2XG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBzeW5jT25lRmlsZShmaWxlOiBURmlsZSwgc3RhdHM6IFN5bmNTdGF0cyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGVyZm9ybVN5bmMoZmlsZSwgJ21vZGlmeScpO1xuICAgICAgICAgICAgc3RhdHMuc3VjY2VzcysrO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgc3RhdHMuZmFpbGVkKys7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbTWFya2Rvd25CcmFpbl0gXHUyNzE3IEZhaWxlZCB0byBzeW5jICR7ZmlsZS5wYXRofTpgLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbnVubG9hZCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1VubG9hZGluZyBNYXJrZG93bkJyYWluIHBsdWdpbicpO1xuICAgICAgICAvLyBcdTZFMDVcdTc0MDZcdTYyNDBcdTY3MDlcdTk2MzJcdTYyOTZcdTVCOUFcdTY1RjZcdTU2NjhcbiAgICAgICAgdGhpcy5kZWJvdW5jZVNlcnZpY2UuY2xlYXJBbGwoKTtcbiAgICAgICAgdGhpcy5zeW5jTWFuYWdlci5kZXN0cm95KCk7XG4gICAgfVxuXG4gICAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgICAgIHRoaXMuc3luY01hbmFnZXIudXBkYXRlQ29uZmlnKHtcbiAgICAgICAgICAgIHNlcnZlclVybDogdGhpcy5zZXR0aW5ncy5zZXJ2ZXJVcmwsXG4gICAgICAgICAgICBzeW5jS2V5OiB0aGlzLnNldHRpbmdzLnN5bmNLZXlcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IFRGaWxlLCBBcHAsIHBhcnNlWWFtbCB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNvbnN0IENMSUVOVF9JRF9LRVkgPSAnbWFya2Rvd25icmFpbi1pZCc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPckNyZWF0ZUNsaWVudElkKFxuICBmaWxlOiBURmlsZSxcbiAgY29udGVudDogc3RyaW5nLFxuICBhcHA6IEFwcFxuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgY2FjaGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gIGlmIChjYWNoZT8uZnJvbnRtYXR0ZXI/LltDTElFTlRfSURfS0VZXSkge1xuICAgIHJldHVybiBTdHJpbmcoY2FjaGUuZnJvbnRtYXR0ZXJbQ0xJRU5UX0lEX0tFWV0pLnRyaW0oKTtcbiAgfVxuXG4gIGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gIGNvbnN0IGxhdGVzdENvbnRlbnQgPSBmaWxlQ29udGVudCB8fCBjb250ZW50O1xuXG4gIGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBsYXRlc3RDb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XG4gIGlmIChmcm9udG1hdHRlck1hdGNoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZyb250bWF0dGVyID0gcGFyc2VZYW1sKGZyb250bWF0dGVyTWF0Y2hbMV0pO1xuICAgICAgaWYgKGZyb250bWF0dGVyPy5bQ0xJRU5UX0lEX0tFWV0pIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZyhmcm9udG1hdHRlcltDTElFTlRfSURfS0VZXSkudHJpbSgpO1xuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gWUFNTCBwYXJzZSBlcnJvciwgd2lsbCBnZW5lcmF0ZSBuZXcgSURcbiAgICB9XG4gIH1cblxuICBjb25zdCBuZXdJZCA9IGNyeXB0by5yYW5kb21VVUlEKCk7XG5cbiAgYXdhaXQgYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihmaWxlLCAoZnJvbnRtYXR0ZXIpID0+IHtcbiAgICBmcm9udG1hdHRlcltDTElFTlRfSURfS0VZXSA9IG5ld0lkO1xuICB9KTtcblxuICByZXR1cm4gbmV3SWQ7XG59XG4iLCAiLyoqXG4gKiBEb21haW4gdHlwZXMgZm9yIE1hcmtkb3duQnJhaW4gT2JzaWRpYW4gUGx1Z2luXG4gKiBcbiAqIEFsbCBpbnRlcmZhY2VzIGFuZCB0eXBlcyBleHRyYWN0ZWQgZnJvbSBtYWluLnRzIGZvciBiZXR0ZXIgbW9kdWxhcml0eS5cbiAqIE5vIHJ1bnRpbWUgZGVwZW5kZW5jaWVzIC0gcHVyZSB0eXBlIGRlZmluaXRpb25zLlxuICovXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBTZXR0aW5nc1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBNYXJrZG93bkJyYWluU2V0dGluZ3Mge1xuICBzZXJ2ZXJVcmw6IHN0cmluZztcbiAgc3luY0tleTogc3RyaW5nO1xuICBhdXRvU3luYzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE1hcmtkb3duQnJhaW5TZXR0aW5ncyA9IHtcbiAgc2VydmVyVXJsOiAnaHR0cHM6Ly9hcGkubWFya2Rvd25icmFpbi5jb20nLFxuICBzeW5jS2V5OiAnJyxcbiAgYXV0b1N5bmM6IHRydWVcbn07XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBTeW5jIENvbmZpZ3VyYXRpb25cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3luY0NvbmZpZyB7XG4gIHNlcnZlclVybDogc3RyaW5nO1xuICBzeW5jS2V5OiBzdHJpbmc7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBOb3RlIE1ldGFkYXRhIChleHRyYWN0ZWQgZnJvbSBPYnNpZGlhbidzIG1ldGFkYXRhQ2FjaGUpXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgaW50ZXJmYWNlIFBvc2l0aW9uIHtcbiAgc3RhcnQ6IHsgbGluZTogbnVtYmVyOyBjb2w6IG51bWJlcjsgb2Zmc2V0OiBudW1iZXIgfTtcbiAgZW5kOiB7IGxpbmU6IG51bWJlcjsgY29sOiBudW1iZXI7IG9mZnNldDogbnVtYmVyIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGFnSW5mbyB7XG4gIHRhZzogc3RyaW5nO1xuICBwb3NpdGlvbjogUG9zaXRpb247XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGVhZGluZ0luZm8ge1xuICBoZWFkaW5nOiBzdHJpbmc7XG4gIGxldmVsOiBudW1iZXI7XG4gIHBvc2l0aW9uOiBQb3NpdGlvbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBOb3RlTWV0YWRhdGEge1xuICB0YWdzPzogVGFnSW5mb1tdO1xuICBoZWFkaW5ncz86IEhlYWRpbmdJbmZvW107XG4gIGZyb250bWF0dGVyPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBTeW5jIERhdGEgUGF5bG9hZHNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCB0eXBlIFN5bmNBY3Rpb24gPSAnY3JlYXRlJyB8ICdtb2RpZnknIHwgJ2RlbGV0ZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3luY0RhdGEge1xuICBwYXRoOiBzdHJpbmc7XG4gIGNsaWVudElkOiBzdHJpbmc7XG4gIGNsaWVudFR5cGU6IHN0cmluZztcbiAgY29udGVudD86IHN0cmluZztcbiAgaGFzaD86IHN0cmluZztcbiAgbXRpbWU/OiBzdHJpbmc7XG4gIG1ldGFkYXRhPzogTm90ZU1ldGFkYXRhO1xuICBhY3Rpb246IFN5bmNBY3Rpb247XG59XG5cbmV4cG9ydCB0eXBlIFJlc291cmNlQWN0aW9uID0gJ3Vwc2VydCcgfCAnZGVsZXRlJztcblxuZXhwb3J0IGludGVyZmFjZSBSZXNvdXJjZVN5bmNEYXRhIHtcbiAgcGF0aDogc3RyaW5nO1xuICBjb250ZW50Pzogc3RyaW5nOyAgICAgICAgLy8gYmFzZTY0IGVuY29kZWRcbiAgY29udGVudFR5cGU6IHN0cmluZztcbiAgc2hhMjU2Pzogc3RyaW5nO1xuICBzaXplQnl0ZXM/OiBudW1iZXI7XG4gIGFjdGlvbjogUmVzb3VyY2VBY3Rpb247XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBBUEkgUmVzcG9uc2VzXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0SW5mbyB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZG9tYWluOiBzdHJpbmc7XG4gICdjcmVhdGVkLWF0Jzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRlc3RDb25uZWN0aW9uUmVzdWx0IHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgdmF1bHRJbmZvPzogVmF1bHRJbmZvO1xuICBlcnJvcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTeW5jUmVzdWx0IHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgZXJyb3I/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRnVsbFN5bmNSZXF1ZXN0IHtcbiAgY2xpZW50SWRzOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGdWxsU3luY1Jlc3BvbnNlRGF0YSB7XG4gICd2YXVsdC1pZCc6IHN0cmluZztcbiAgYWN0aW9uOiBzdHJpbmc7XG4gICdjbGllbnQtbm90ZXMnOiBudW1iZXI7XG4gICdkZWxldGVkLWNvdW50JzogbnVtYmVyO1xuICAncmVtYWluaW5nLW5vdGVzJzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZ1bGxTeW5jUmVzcG9uc2Uge1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBkYXRhPzogRnVsbFN5bmNSZXNwb25zZURhdGE7XG4gIGVycm9yPzogc3RyaW5nO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU3luYyBTdGF0aXN0aWNzXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgaW50ZXJmYWNlIFN5bmNTdGF0cyB7XG4gIHN1Y2Nlc3M6IG51bWJlcjtcbiAgZmFpbGVkOiBudW1iZXI7XG4gIHNraXBwZWQ6IG51bWJlcjtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBvcnQgSW50ZXJmYWNlcyAoZm9yIGRlcGVuZGVuY3kgaW5qZWN0aW9uKVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBMb2dnZXJQb3J0IHtcbiAgaW5mbyhtZXNzYWdlOiBzdHJpbmcsIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik6IHZvaWQ7XG4gIHdhcm4obWVzc2FnZTogc3RyaW5nLCBkYXRhPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pOiB2b2lkO1xuICBlcnJvcihtZXNzYWdlOiBzdHJpbmcsIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik6IHZvaWQ7XG4gIGRlYnVnKG1lc3NhZ2U6IHN0cmluZywgZGF0YT86IFJlY29yZDxzdHJpbmcsIHVua25vd24+KTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBOb3RpY2VQb3J0IHtcbiAgc2hvdyhtZXNzYWdlOiBzdHJpbmcsIHRpbWVvdXRNcz86IG51bWJlcik6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZUluZm8ge1xuICBwYXRoOiBzdHJpbmc7XG4gIGV4dGVuc2lvbjogc3RyaW5nO1xuICBzdGF0OiB7XG4gICAgbXRpbWU6IG51bWJlcjtcbiAgICBjdGltZTogbnVtYmVyO1xuICAgIHNpemU6IG51bWJlcjtcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdFBvcnQge1xuICBnZXRNYXJrZG93bkZpbGVzKCk6IEZpbGVJbmZvW107XG4gIHJlYWRUZXh0KGZpbGU6IEZpbGVJbmZvKTogUHJvbWlzZTxzdHJpbmc+O1xuICByZWFkQmluYXJ5KGZpbGU6IEZpbGVJbmZvKTogUHJvbWlzZTxBcnJheUJ1ZmZlcj47XG4gIHN0YXQoZmlsZTogRmlsZUluZm8pOiB7IG10aW1lOiBudW1iZXI7IHNpemU6IG51bWJlciB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhY2hlZE1ldGFkYXRhIHtcbiAgdGFncz86IEFycmF5PHsgdGFnOiBzdHJpbmc7IHBvc2l0aW9uOiBQb3NpdGlvbiB9PjtcbiAgaGVhZGluZ3M/OiBBcnJheTx7IGhlYWRpbmc6IHN0cmluZzsgbGV2ZWw6IG51bWJlcjsgcG9zaXRpb246IFBvc2l0aW9uIH0+O1xuICBmcm9udG1hdHRlcj86IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1ldGFkYXRhUG9ydCB7XG4gIGdldEZpbGVDYWNoZShwYXRoOiBzdHJpbmcpOiBDYWNoZWRNZXRhZGF0YSB8IG51bGw7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBBUEkgQ2xpZW50IEludGVyZmFjZVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBTeW5jQXBpIHtcbiAgdGVzdENvbm5lY3Rpb24odGltZW91dD86IG51bWJlcik6IFByb21pc2U8VGVzdENvbm5lY3Rpb25SZXN1bHQ+O1xuICBzeW5jTm90ZShkYXRhOiBTeW5jRGF0YSk6IFByb21pc2U8U3luY1Jlc3VsdD47XG4gIGZ1bGxTeW5jKGNsaWVudElkczogc3RyaW5nW10pOiBQcm9taXNlPEZ1bGxTeW5jUmVzcG9uc2U+O1xuICBzeW5jUmVzb3VyY2UoZGF0YTogUmVzb3VyY2VTeW5jRGF0YSk6IFByb21pc2U8U3luY1Jlc3VsdD47XG59XG4iLCAiLyoqXG4gKiBSZXNvdXJjZSBmaWxlIHV0aWxpdGllc1xuICogXG4gKiBQdXJlIGZ1bmN0aW9ucyBmb3IgZGV0ZXJtaW5pbmcgaWYgYSBmaWxlIGlzIGEgcmVzb3VyY2UgKGltYWdlLCBwZGYsIGF1ZGlvLCB2aWRlbykuXG4gKiBObyBPYnNpZGlhbiBkZXBlbmRlbmNpZXMgLSBmdWxseSB1bml0LXRlc3RhYmxlLlxuICovXG5cbi8qKlxuICogU2V0IG9mIHN1cHBvcnRlZCByZXNvdXJjZSBmaWxlIGV4dGVuc2lvbnNcbiAqL1xuZXhwb3J0IGNvbnN0IFJFU09VUkNFX0VYVEVOU0lPTlMgPSBuZXcgU2V0KFtcbiAgLy8gSW1hZ2VzXG4gICdwbmcnLCAnanBnJywgJ2pwZWcnLCAnZ2lmJywgJ3dlYnAnLCAnc3ZnJywgJ2JtcCcsICdpY28nLFxuICAvLyBEb2N1bWVudHNcbiAgJ3BkZicsXG4gIC8vIEF1ZGlvXG4gICdtcDMnLCAnb2dnJywgJ3dhdicsXG4gIC8vIFZpZGVvXG4gICdtcDQnLCAnd2VibSdcbl0pO1xuXG4vKipcbiAqIEZpbGUtbGlrZSBvYmplY3Qgd2l0aCBleHRlbnNpb24gcHJvcGVydHlcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGaWxlV2l0aEV4dGVuc2lvbiB7XG4gIGV4dGVuc2lvbjogc3RyaW5nO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgZmlsZSBpcyBhIHJlc291cmNlIGZpbGUgYmFzZWQgb24gaXRzIGV4dGVuc2lvblxuICogQHBhcmFtIGZpbGUgLSBPYmplY3Qgd2l0aCBleHRlbnNpb24gcHJvcGVydHlcbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIGZpbGUgaXMgYSByZXNvdXJjZSAoaW1hZ2UsIHBkZiwgYXVkaW8sIHZpZGVvKVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNSZXNvdXJjZUZpbGUoZmlsZTogRmlsZVdpdGhFeHRlbnNpb24pOiBib29sZWFuIHtcbiAgcmV0dXJuIFJFU09VUkNFX0VYVEVOU0lPTlMuaGFzKGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkpO1xufVxuIiwgIi8qKlxuICogTUlNRSB0eXBlIHV0aWxpdGllc1xuICogXG4gKiBQdXJlIGZ1bmN0aW9ucyBmb3IgZGV0ZXJtaW5pbmcgTUlNRSB0eXBlcyBmcm9tIGZpbGUgZXh0ZW5zaW9ucy5cbiAqIE5vIE9ic2lkaWFuIGRlcGVuZGVuY2llcyAtIGZ1bGx5IHVuaXQtdGVzdGFibGUuXG4gKi9cblxuLyoqXG4gKiBNYXBwaW5nIG9mIGZpbGUgZXh0ZW5zaW9ucyB0byBNSU1FIHR5cGVzXG4gKi9cbmV4cG9ydCBjb25zdCBNSU1FX1RZUEVTOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAvLyBJbWFnZXNcbiAgJ3BuZyc6ICdpbWFnZS9wbmcnLFxuICAnanBnJzogJ2ltYWdlL2pwZWcnLFxuICAnanBlZyc6ICdpbWFnZS9qcGVnJyxcbiAgJ2dpZic6ICdpbWFnZS9naWYnLFxuICAnd2VicCc6ICdpbWFnZS93ZWJwJyxcbiAgJ3N2Zyc6ICdpbWFnZS9zdmcreG1sJyxcbiAgJ2JtcCc6ICdpbWFnZS9ibXAnLFxuICAnaWNvJzogJ2ltYWdlL3gtaWNvbicsXG4gIC8vIERvY3VtZW50c1xuICAncGRmJzogJ2FwcGxpY2F0aW9uL3BkZicsXG4gIC8vIEF1ZGlvXG4gICdtcDMnOiAnYXVkaW8vbXBlZycsXG4gICdvZ2cnOiAnYXVkaW8vb2dnJyxcbiAgJ3dhdic6ICdhdWRpby93YXYnLFxuICAvLyBWaWRlb1xuICAnbXA0JzogJ3ZpZGVvL21wNCcsXG4gICd3ZWJtJzogJ3ZpZGVvL3dlYm0nXG59O1xuXG4vKipcbiAqIEdldCBNSU1FIHR5cGUgZm9yIGEgZmlsZSBleHRlbnNpb25cbiAqIEBwYXJhbSBleHRlbnNpb24gLSBGaWxlIGV4dGVuc2lvbiAod2l0aCBvciB3aXRob3V0IGRvdClcbiAqIEByZXR1cm5zIE1JTUUgdHlwZSBzdHJpbmcsIG9yICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nIGZvciB1bmtub3duIGV4dGVuc2lvbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnRlbnRUeXBlKGV4dGVuc2lvbjogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgZXh0ID0gZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiBNSU1FX1RZUEVTW2V4dF0gfHwgJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSc7XG59XG4iLCAiLyoqXG4gKiBFbmNvZGluZyB1dGlsaXRpZXNcbiAqIFxuICogUHVyZSBmdW5jdGlvbnMgZm9yIGVuY29kaW5nIGJpbmFyeSBkYXRhLlxuICogTm8gT2JzaWRpYW4gZGVwZW5kZW5jaWVzIC0gZnVsbHkgdW5pdC10ZXN0YWJsZS5cbiAqL1xuXG4vKipcbiAqIENvbnZlcnQgQXJyYXlCdWZmZXIgdG8gYmFzZTY0IHN0cmluZ1xuICogQHBhcmFtIGJ1ZmZlciAtIEFycmF5QnVmZmVyIHRvIGVuY29kZVxuICogQHJldHVybnMgQmFzZTY0IGVuY29kZWQgc3RyaW5nXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhcnJheUJ1ZmZlclRvQmFzZTY0KGJ1ZmZlcjogQXJyYXlCdWZmZXIpOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gIGxldCBiaW5hcnkgPSAnJztcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlcy5ieXRlTGVuZ3RoOyBpKyspIHtcbiAgICBiaW5hcnkgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSk7XG4gIH1cbiAgcmV0dXJuIGJ0b2EoYmluYXJ5KTtcbn1cbiIsICIvKipcbiAqIEhhc2ggdXRpbGl0aWVzXG4gKiBcbiAqIFB1cmUgZnVuY3Rpb25zIGZvciBoYXNoaW5nIGRhdGEgdXNpbmcgV2ViIENyeXB0byBBUEkuXG4gKiBObyBPYnNpZGlhbiBkZXBlbmRlbmNpZXMgLSBmdWxseSB1bml0LXRlc3RhYmxlLlxuICovXG5cbi8qKlxuICogQ29tcHV0ZSBTSEEtMjU2IGhhc2ggb2YgYW4gQXJyYXlCdWZmZXJcbiAqIEBwYXJhbSBidWZmZXIgLSBBcnJheUJ1ZmZlciB0byBoYXNoXG4gKiBAcmV0dXJucyBIZXgtZW5jb2RlZCBTSEEtMjU2IGhhc2ggKDY0IGNoYXJhY3RlcnMpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaGEyNTZIYXNoKGJ1ZmZlcjogQXJyYXlCdWZmZXIpOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCBoYXNoQnVmZmVyID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5kaWdlc3QoJ1NIQS0yNTYnLCBidWZmZXIpO1xuICBjb25zdCBoYXNoQXJyYXkgPSBBcnJheS5mcm9tKG5ldyBVaW50OEFycmF5KGhhc2hCdWZmZXIpKTtcbiAgcmV0dXJuIGhhc2hBcnJheS5tYXAoYiA9PiBiLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpKS5qb2luKCcnKTtcbn1cblxuLyoqXG4gKiBDb21wdXRlIFNIQS0yNTYgaGFzaCBvZiBhIHN0cmluZ1xuICogQHBhcmFtIHN0ciAtIFN0cmluZyB0byBoYXNoXG4gKiBAcmV0dXJucyBIZXgtZW5jb2RlZCBTSEEtMjU2IGhhc2ggKDY0IGNoYXJhY3RlcnMpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNoU3RyaW5nKHN0cjogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICBjb25zdCBkYXRhID0gZW5jb2Rlci5lbmNvZGUoc3RyKTtcbiAgcmV0dXJuIHNoYTI1Nkhhc2goZGF0YS5idWZmZXIpO1xufVxuIiwgIi8qKlxuICogU3luYyBBUEkgQ2xpZW50XG4gKiBcbiAqIEhUVFAgQVBJIGNsaWVudCBmb3IgTWFya2Rvd25CcmFpbiBzZXJ2ZXIuXG4gKiBVc2VzIEh0dHBDbGllbnQgaW50ZXJmYWNlIGZvciB0ZXN0YWJpbGl0eSAoY2FuIG1vY2sgT2JzaWRpYW4ncyByZXF1ZXN0VXJsKS5cbiAqL1xuXG5pbXBvcnQgdHlwZSB7XG4gIFN5bmNDb25maWcsXG4gIFN5bmNEYXRhLFxuICBSZXNvdXJjZVN5bmNEYXRhLFxuICBUZXN0Q29ubmVjdGlvblJlc3VsdCxcbiAgU3luY1Jlc3VsdCxcbiAgRnVsbFN5bmNSZXNwb25zZSxcbiAgRnVsbFN5bmNSZXF1ZXN0LFxuICBTeW5jQXBpLFxufSBmcm9tICcuLi9kb21haW4vdHlwZXMnO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSFRUUCBDbGllbnQgSW50ZXJmYWNlIChmb3IgZGVwZW5kZW5jeSBpbmplY3Rpb24pXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgaW50ZXJmYWNlIEh0dHBSZXNwb25zZSB7XG4gIHN0YXR1czogbnVtYmVyO1xuICBqc29uOiB1bmtub3duO1xuICB0ZXh0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSHR0cFJlcXVlc3Qge1xuICB1cmw6IHN0cmluZztcbiAgbWV0aG9kOiAnR0VUJyB8ICdQT1NUJyB8ICdQVVQnIHwgJ0RFTEVURSc7XG4gIGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIGJvZHk/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSHR0cENsaWVudCB7XG4gIHJlcXVlc3QocmVxOiBIdHRwUmVxdWVzdCk6IFByb21pc2U8SHR0cFJlc3BvbnNlPjtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFN5bmMgQVBJIENsaWVudCBJbXBsZW1lbnRhdGlvblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNsYXNzIFN5bmNBcGlDbGllbnQgaW1wbGVtZW50cyBTeW5jQXBpIHtcbiAgcHJpdmF0ZSBjb25maWc6IFN5bmNDb25maWc7XG4gIHByaXZhdGUgaHR0cDogSHR0cENsaWVudDtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFN5bmNDb25maWcsIGh0dHBDbGllbnQ6IEh0dHBDbGllbnQpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLmh0dHAgPSBodHRwQ2xpZW50O1xuICB9XG5cbiAgdXBkYXRlQ29uZmlnKGNvbmZpZzogU3luY0NvbmZpZyk6IHZvaWQge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICB9XG5cbiAgYXN5bmMgdGVzdENvbm5lY3Rpb24odGltZW91dDogbnVtYmVyID0gMzAwMDApOiBQcm9taXNlPFRlc3RDb25uZWN0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5odHRwLnJlcXVlc3Qoe1xuICAgICAgICB1cmw6IGAke3RoaXMuY29uZmlnLnNlcnZlclVybH0vb2JzaWRpYW4vdmF1bHQvaW5mb2AsXG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLmNvbmZpZy5zeW5jS2V5fWBcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuanNvbiBhcyB7IHZhdWx0OiBUZXN0Q29ubmVjdGlvblJlc3VsdFsndmF1bHRJbmZvJ10gfTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIHZhdWx0SW5mbzogZGF0YS52YXVsdFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnRleHQgfHwgJ1Vua25vd24gZXJyb3InfWBcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgaWYgKGVycm9yICYmIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgJ25hbWUnIGluIGVycm9yICYmIGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBgXHU4RkRFXHU2M0E1XHU4RDg1XHU2NUY2XHVGRjA4JHt0aW1lb3V0IC8gMTAwMH1cdTc5RDJcdUZGMDlgXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHN5bmNOb3RlKGRhdGE6IFN5bmNEYXRhKTogUHJvbWlzZTxTeW5jUmVzdWx0PiB7XG4gICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBTdGFydGluZyBzeW5jOicsIHtcbiAgICAgIHBhdGg6IGRhdGEucGF0aCxcbiAgICAgIGFjdGlvbjogZGF0YS5hY3Rpb24sXG4gICAgICBoYXNDb250ZW50OiAhIWRhdGEuY29udGVudCxcbiAgICAgIGNvbnRlbnRMZW5ndGg6IGRhdGEuY29udGVudD8ubGVuZ3RoLFxuICAgICAgc2VydmVyVXJsOiB0aGlzLmNvbmZpZy5zZXJ2ZXJVcmwsXG4gICAgICBoYXNTeW5jS2V5OiAhIXRoaXMuY29uZmlnLnN5bmNLZXlcbiAgICB9KTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXF1ZXN0Qm9keSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBSZXF1ZXN0IGJvZHkgc2l6ZTonLCByZXF1ZXN0Qm9keS5sZW5ndGgsICdieXRlcycpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuaHR0cC5yZXF1ZXN0KHtcbiAgICAgICAgdXJsOiBgJHt0aGlzLmNvbmZpZy5zZXJ2ZXJVcmx9L29ic2lkaWFuL3N5bmNgLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5jb25maWcuc3luY0tleX1gXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IHJlcXVlc3RCb2R5XG4gICAgICB9KTtcblxuICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBSZXNwb25zZTonLCB7XG4gICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICBib2R5UHJldmlldzogcmVzcG9uc2UudGV4dD8uc3Vic3RyaW5nKDAsIDIwMClcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBcdTI3MTMgU3luYyBzdWNjZXNzZnVsOicsIGRhdGEucGF0aCk7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGVycm9yTXNnID0gYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnRleHQgfHwgJ1N5bmMgZmFpbGVkJ31gO1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbTWFya2Rvd25CcmFpbl0gXHUyNzE3IFN5bmMgZmFpbGVkOicsIHtcbiAgICAgICAgICBwYXRoOiBkYXRhLnBhdGgsXG4gICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgZXJyb3I6IGVycm9yTXNnLFxuICAgICAgICAgIHJlc3BvbnNlQm9keTogcmVzcG9uc2UudGV4dFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogZXJyb3JNc2dcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW01hcmtkb3duQnJhaW5dIFx1MjcxNyBTeW5jIGV4Y2VwdGlvbjonLCB7XG4gICAgICAgIHBhdGg6IGRhdGEucGF0aCxcbiAgICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgICBlcnJvck1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBmdWxsU3luYyhjbGllbnRJZHM6IHN0cmluZ1tdKTogUHJvbWlzZTxGdWxsU3luY1Jlc3BvbnNlPiB7XG4gICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBTdGFydGluZyBmdWxsIHN5bmMuLi4nLCB7XG4gICAgICBjbGllbnROb3RlQ291bnQ6IGNsaWVudElkcy5sZW5ndGhcbiAgICB9KTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXF1ZXN0Qm9keTogRnVsbFN5bmNSZXF1ZXN0ID0geyBjbGllbnRJZHMgfTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5odHRwLnJlcXVlc3Qoe1xuICAgICAgICB1cmw6IGAke3RoaXMuY29uZmlnLnNlcnZlclVybH0vb2JzaWRpYW4vc3luYy9mdWxsYCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuY29uZmlnLnN5bmNLZXl9YFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSlcbiAgICAgIH0pO1xuXG4gICAgICAvLyBCYWNrd2FyZCBjb21wYXRpYmlsaXR5OiBvbGQgc2VydmVycyBkb24ndCBzdXBwb3J0IGZ1bGwtc3luYyAoNDA0KVxuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICAgIGNvbnNvbGUud2FybignW01hcmtkb3duQnJhaW5dIEZ1bGwgc3luYyBub3Qgc3VwcG9ydGVkIGJ5IHNlcnZlciAoNDA0KSwgc2tpcHBpbmcgb3JwaGFuIGNsZWFudXAnKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICd2YXVsdC1pZCc6ICcnLFxuICAgICAgICAgICAgYWN0aW9uOiAnZnVsbC1zeW5jJyxcbiAgICAgICAgICAgICdjbGllbnQtbm90ZXMnOiBjbGllbnRJZHMubGVuZ3RoLFxuICAgICAgICAgICAgJ2RlbGV0ZWQtY291bnQnOiAwLFxuICAgICAgICAgICAgJ3JlbWFpbmluZy1ub3Rlcyc6IGNsaWVudElkcy5sZW5ndGhcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuanNvbiBhcyBGdWxsU3luY1Jlc3BvbnNlWydkYXRhJ107XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gXHUyNzEzIEZ1bGwgc3luYyBzdWNjZXNzZnVsOicsIHtcbiAgICAgICAgICBkZWxldGVkQ291bnQ6IGRhdGE/LlsnZGVsZXRlZC1jb3VudCddLFxuICAgICAgICAgIHJlbWFpbmluZ05vdGVzOiBkYXRhPy5bJ3JlbWFpbmluZy1ub3RlcyddXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YTogZGF0YVxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2UudGV4dCB8fCAnRnVsbCBzeW5jIGZhaWxlZCd9YDtcbiAgICAgICAgY29uc29sZS5lcnJvcignW01hcmtkb3duQnJhaW5dIFx1MjcxNyBGdWxsIHN5bmMgZmFpbGVkOicsIHtcbiAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICBlcnJvcjogZXJyb3JNc2dcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IGVycm9yTXNnXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcic7XG4gICAgICBjb25zb2xlLmVycm9yKCdbTWFya2Rvd25CcmFpbl0gXHUyNzE3IEZ1bGwgc3luYyBleGNlcHRpb246Jywge1xuICAgICAgICBlcnJvcjogZXJyb3JNc2dcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvck1zZ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBzeW5jUmVzb3VyY2UoZGF0YTogUmVzb3VyY2VTeW5jRGF0YSk6IFByb21pc2U8U3luY1Jlc3VsdD4ge1xuICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gU3RhcnRpbmcgcmVzb3VyY2Ugc3luYzonLCB7XG4gICAgICBwYXRoOiBkYXRhLnBhdGgsXG4gICAgICBhY3Rpb246IGRhdGEuYWN0aW9uLFxuICAgICAgY29udGVudFR5cGU6IGRhdGEuY29udGVudFR5cGUsXG4gICAgICBzaXplQnl0ZXM6IGRhdGEuc2l6ZUJ5dGVzXG4gICAgfSk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmh0dHAucmVxdWVzdCh7XG4gICAgICAgIHVybDogYCR7dGhpcy5jb25maWcuc2VydmVyVXJsfS9vYnNpZGlhbi9yZXNvdXJjZXMvc3luY2AsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLmNvbmZpZy5zeW5jS2V5fWBcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBcdTI3MTMgUmVzb3VyY2Ugc3luYyBzdWNjZXNzZnVsOicsIGRhdGEucGF0aCk7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGVycm9yTXNnID0gYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnRleHQgfHwgJ1Jlc291cmNlIHN5bmMgZmFpbGVkJ31gO1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbTWFya2Rvd25CcmFpbl0gXHUyNzE3IFJlc291cmNlIHN5bmMgZmFpbGVkOicsIHtcbiAgICAgICAgICBwYXRoOiBkYXRhLnBhdGgsXG4gICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgZXJyb3I6IGVycm9yTXNnXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yTXNnIH07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZG93bkJyYWluXSBcdTI3MTcgUmVzb3VyY2Ugc3luYyBleGNlcHRpb246Jywge1xuICAgICAgICBwYXRoOiBkYXRhLnBhdGgsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgfSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgLy8gQ2xlYW51cCBpZiBuZWVkZWRcbiAgfVxufVxuIiwgIi8qKlxuICogT2JzaWRpYW4gSFRUUCBDbGllbnQgQWRhcHRlclxuICogXG4gKiBJbXBsZW1lbnRzIEh0dHBDbGllbnQgaW50ZXJmYWNlIHVzaW5nIE9ic2lkaWFuJ3MgcmVxdWVzdFVybC5cbiAqL1xuXG5pbXBvcnQgeyByZXF1ZXN0VXJsIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgeyBIdHRwQ2xpZW50LCBIdHRwUmVxdWVzdCwgSHR0cFJlc3BvbnNlIH0gZnJvbSAnLi9zeW5jLWFwaSc7XG5cbmV4cG9ydCBjbGFzcyBPYnNpZGlhbkh0dHBDbGllbnQgaW1wbGVtZW50cyBIdHRwQ2xpZW50IHtcbiAgYXN5bmMgcmVxdWVzdChyZXE6IEh0dHBSZXF1ZXN0KTogUHJvbWlzZTxIdHRwUmVzcG9uc2U+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgdXJsOiByZXEudXJsLFxuICAgICAgbWV0aG9kOiByZXEubWV0aG9kLFxuICAgICAgaGVhZGVyczogcmVxLmhlYWRlcnMsXG4gICAgICBib2R5OiByZXEuYm9keSxcbiAgICAgIHRocm93OiBmYWxzZVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAganNvbjogcmVzcG9uc2UuanNvbixcbiAgICAgIHRleHQ6IHJlc3BvbnNlLnRleHRcbiAgICB9O1xuICB9XG59XG4iLCAiLyoqXG4gKiBUaW1lciBmYWN0b3J5IGludGVyZmFjZSBmb3IgZGVwZW5kZW5jeSBpbmplY3Rpb25cbiAqIEFsbG93cyB0ZXN0aW5nIHdpdGggbW9jayB0aW1lcnNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUaW1lckZhY3Rvcnkge1xuICAgIHNldFRpbWVvdXQ6IChjYWxsYmFjazogKCkgPT4gdm9pZCwgZGVsYXk6IG51bWJlcikgPT4gUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD47XG4gICAgY2xlYXJUaW1lb3V0OiAoaWQ6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+KSA9PiB2b2lkO1xufVxuXG4vKipcbiAqIERlZmF1bHQgdGltZXIgZmFjdG9yeSB1c2luZyBnbG9iYWwgc2V0VGltZW91dC9jbGVhclRpbWVvdXRcbiAqL1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRUaW1lckZhY3Rvcnk6IFRpbWVyRmFjdG9yeSA9IHtcbiAgICBzZXRUaW1lb3V0OiAoY2FsbGJhY2ssIGRlbGF5KSA9PiBzZXRUaW1lb3V0KGNhbGxiYWNrLCBkZWxheSksXG4gICAgY2xlYXJUaW1lb3V0OiAoaWQpID0+IGNsZWFyVGltZW91dChpZCksXG59O1xuXG4vKipcbiAqIERlYm91bmNlIHNlcnZpY2UgZm9yIG1hbmFnaW5nIG11bHRpcGxlIGRlYm91bmNlZCBvcGVyYXRpb25zIGJ5IGtleVxuICogXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIGNvbnN0IGRlYm91bmNlID0gbmV3IERlYm91bmNlU2VydmljZSgpO1xuICogXG4gKiAvLyBEZWJvdW5jZSBmaWxlIHN5bmMgYnkgcGF0aFxuICogZGVib3VuY2UuZGVib3VuY2UoZmlsZS5wYXRoLCAoKSA9PiBzeW5jRmlsZShmaWxlKSwgMzAwKTtcbiAqIFxuICogLy8gQ2xlYXIgYWxsIG9uIHVubG9hZFxuICogZGVib3VuY2UuY2xlYXJBbGwoKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgRGVib3VuY2VTZXJ2aWNlIHtcbiAgICBwcml2YXRlIHRpbWVyczogTWFwPHN0cmluZywgUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4+O1xuICAgIHByaXZhdGUgdGltZXJGYWN0b3J5OiBUaW1lckZhY3Rvcnk7XG5cbiAgICBjb25zdHJ1Y3Rvcih0aW1lckZhY3Rvcnk6IFRpbWVyRmFjdG9yeSA9IGRlZmF1bHRUaW1lckZhY3RvcnkpIHtcbiAgICAgICAgdGhpcy50aW1lcnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMudGltZXJGYWN0b3J5ID0gdGltZXJGYWN0b3J5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlIGEgZGVib3VuY2VkIGNhbGxiYWNrIGZvciB0aGUgZ2l2ZW4ga2V5XG4gICAgICogSWYgYSB0aW1lciBhbHJlYWR5IGV4aXN0cyBmb3IgdGhlIGtleSwgaXQgd2lsbCBiZSBjYW5jZWxsZWQgYW5kIHJlcGxhY2VkXG4gICAgICovXG4gICAgZGVib3VuY2Uoa2V5OiBzdHJpbmcsIGNhbGxiYWNrOiAoKSA9PiB2b2lkLCBkZWxheTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIC8vIENhbmNlbCBleGlzdGluZyB0aW1lciBmb3IgdGhpcyBrZXlcbiAgICAgICAgY29uc3QgZXhpc3RpbmdUaW1lciA9IHRoaXMudGltZXJzLmdldChrZXkpO1xuICAgICAgICBpZiAoZXhpc3RpbmdUaW1lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnRpbWVyRmFjdG9yeS5jbGVhclRpbWVvdXQoZXhpc3RpbmdUaW1lcik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTY2hlZHVsZSBuZXcgdGltZXJcbiAgICAgICAgY29uc3QgdGltZXIgPSB0aGlzLnRpbWVyRmFjdG9yeS5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGltZXJzLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfSwgZGVsYXkpO1xuXG4gICAgICAgIHRoaXMudGltZXJzLnNldChrZXksIHRpbWVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYW5jZWwgYSBzcGVjaWZpYyBkZWJvdW5jZWQgb3BlcmF0aW9uIGJ5IGtleVxuICAgICAqL1xuICAgIGNhbmNlbChrZXk6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCB0aW1lciA9IHRoaXMudGltZXJzLmdldChrZXkpO1xuICAgICAgICBpZiAodGltZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy50aW1lckZhY3RvcnkuY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgICAgIHRoaXMudGltZXJzLmRlbGV0ZShrZXkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYXIgYWxsIHBlbmRpbmcgdGltZXJzXG4gICAgICovXG4gICAgY2xlYXJBbGwoKTogdm9pZCB7XG4gICAgICAgIGZvciAoY29uc3QgdGltZXIgb2YgdGhpcy50aW1lcnMudmFsdWVzKCkpIHtcbiAgICAgICAgICAgIHRoaXMudGltZXJGYWN0b3J5LmNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50aW1lcnMuY2xlYXIoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhIGtleSBoYXMgYSBwZW5kaW5nIHRpbWVyXG4gICAgICovXG4gICAgaGFzKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVycy5oYXMoa2V5KTtcbiAgICB9XG59XG4iLCAiLyoqXG4gKiBDYWNoZSBmb3IgbWFwcGluZyBmaWxlIHBhdGhzIHRvIGNsaWVudCBJRHNcbiAqIFxuICogUHJvdmlkZXMgZmFzdCBsb29rdXAgYW5kIGhhbmRsZXMgcGF0aCByZW5hbWVzIGdyYWNlZnVsbHkuXG4gKiBVc2VkIHRvIHRyYWNrIGNsaWVudCBJRHMgd2l0aG91dCByZS1yZWFkaW5nIGZpbGUgY29udGVudC9mcm9udG1hdHRlci5cbiAqIFxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBjb25zdCBjYWNoZSA9IG5ldyBDbGllbnRJZENhY2hlKCk7XG4gKiBcbiAqIC8vIE9uIHN5bmMgc3VjY2Vzc1xuICogY2FjaGUuc2V0KGZpbGUucGF0aCwgY2xpZW50SWQpO1xuICogXG4gKiAvLyBPbiBmaWxlIGRlbGV0ZVxuICogY29uc3QgY2xpZW50SWQgPSBjYWNoZS5nZXQoZmlsZS5wYXRoKTtcbiAqIGNhY2hlLmRlbGV0ZShmaWxlLnBhdGgpO1xuICogXG4gKiAvLyBPbiBmaWxlIHJlbmFtZVxuICogY2FjaGUucmVuYW1lKG9sZFBhdGgsIG5ld1BhdGgpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBDbGllbnRJZENhY2hlIHtcbiAgICBwcml2YXRlIGNhY2hlOiBNYXA8c3RyaW5nLCBzdHJpbmc+O1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGNsaWVudCBJRCBmb3IgYSBmaWxlIHBhdGhcbiAgICAgKi9cbiAgICBnZXQocGF0aDogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGUuZ2V0KHBhdGgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBjbGllbnQgSUQgZm9yIGEgZmlsZSBwYXRoXG4gICAgICovXG4gICAgc2V0KHBhdGg6IHN0cmluZywgY2xpZW50SWQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmNhY2hlLnNldChwYXRoLCBjbGllbnRJZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYSBwYXRoIGhhcyBhIGNhY2hlZCBjbGllbnQgSURcbiAgICAgKi9cbiAgICBoYXMocGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlLmhhcyhwYXRoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgY2xpZW50IElEIGZvciBhIGZpbGUgcGF0aFxuICAgICAqL1xuICAgIGRlbGV0ZShwYXRoOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jYWNoZS5kZWxldGUocGF0aCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIGZpbGUgcmVuYW1lIC0gbW92ZXMgY2xpZW50IElEIGZyb20gb2xkIHBhdGggdG8gbmV3IHBhdGhcbiAgICAgKi9cbiAgICByZW5hbWUob2xkUGF0aDogc3RyaW5nLCBuZXdQYXRoOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY2xpZW50SWQgPSB0aGlzLmNhY2hlLmdldChvbGRQYXRoKTtcbiAgICAgICAgaWYgKGNsaWVudElkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUuZGVsZXRlKG9sZFBhdGgpO1xuICAgICAgICAgICAgdGhpcy5jYWNoZS5zZXQobmV3UGF0aCwgY2xpZW50SWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYXIgYWxsIGNhY2hlZCBlbnRyaWVzXG4gICAgICovXG4gICAgY2xlYXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY2FjaGUuY2xlYXIoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbnVtYmVyIG9mIGNhY2hlZCBlbnRyaWVzXG4gICAgICovXG4gICAgZ2V0IHNpemUoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGUuc2l6ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGVudHJpZXMgYXMgYXJyYXkgb2YgW3BhdGgsIGNsaWVudElkXSB0dXBsZXNcbiAgICAgKi9cbiAgICBlbnRyaWVzKCk6IEFycmF5PFtzdHJpbmcsIHN0cmluZ10+IHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5jYWNoZS5lbnRyaWVzKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgY2xpZW50IElEc1xuICAgICAqL1xuICAgIGdldEFsbENsaWVudElkcygpOiBzdHJpbmdbXSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuY2FjaGUudmFsdWVzKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEJ1aWxkIGNhY2hlIGZyb20gZW50cmllcyAocmVwbGFjZXMgZXhpc3RpbmcgY2FjaGUpXG4gICAgICovXG4gICAgYnVpbGRGcm9tRW50cmllcyhlbnRyaWVzOiBBcnJheTxbc3RyaW5nLCBzdHJpbmddPik6IHZvaWQge1xuICAgICAgICB0aGlzLmNhY2hlLmNsZWFyKCk7XG4gICAgICAgIGZvciAoY29uc3QgW3BhdGgsIGNsaWVudElkXSBvZiBlbnRyaWVzKSB7XG4gICAgICAgICAgICB0aGlzLmNhY2hlLnNldChwYXRoLCBjbGllbnRJZCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgTm90ZU1ldGFkYXRhIH0gZnJvbSAnLi4vZG9tYWluL3R5cGVzJztcblxuLyoqXG4gKiBNaW5pbWFsIHJlcHJlc2VudGF0aW9uIG9mIE9ic2lkaWFuJ3MgQ2FjaGVkTWV0YWRhdGFcbiAqIFVzZWQgZm9yIHR5cGUtc2FmZSBleHRyYWN0aW9uIHdpdGhvdXQgZnVsbCBPYnNpZGlhbiBkZXBlbmRlbmN5XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgT2JzaWRpYW5DYWNoZWRNZXRhZGF0YSB7XG4gICAgdGFncz86IEFycmF5PHtcbiAgICAgICAgdGFnOiBzdHJpbmc7XG4gICAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgICAgICBzdGFydDogeyBsaW5lOiBudW1iZXI7IGNvbDogbnVtYmVyOyBvZmZzZXQ6IG51bWJlciB9O1xuICAgICAgICAgICAgZW5kOiB7IGxpbmU6IG51bWJlcjsgY29sOiBudW1iZXI7IG9mZnNldDogbnVtYmVyIH07XG4gICAgICAgIH07XG4gICAgfT47XG4gICAgaGVhZGluZ3M/OiBBcnJheTx7XG4gICAgICAgIGhlYWRpbmc6IHN0cmluZztcbiAgICAgICAgbGV2ZWw6IG51bWJlcjtcbiAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICAgIHN0YXJ0OiB7IGxpbmU6IG51bWJlcjsgY29sOiBudW1iZXI7IG9mZnNldDogbnVtYmVyIH07XG4gICAgICAgICAgICBlbmQ6IHsgbGluZTogbnVtYmVyOyBjb2w6IG51bWJlcjsgb2Zmc2V0OiBudW1iZXIgfTtcbiAgICAgICAgfTtcbiAgICB9PjtcbiAgICBmcm9udG1hdHRlcj86IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xufVxuXG4vKipcbiAqIEV4dHJhY3Qgbm90ZSBtZXRhZGF0YSBmcm9tIE9ic2lkaWFuJ3MgY2FjaGVkIG1ldGFkYXRhXG4gKiBcbiAqIFB1cmUgZnVuY3Rpb24gLSBubyBzaWRlIGVmZmVjdHMsIGVhc2lseSB0ZXN0YWJsZVxuICogXG4gKiBAcGFyYW0gY2FjaGVkIC0gT2JzaWRpYW4ncyBDYWNoZWRNZXRhZGF0YSAob3IgbnVsbC91bmRlZmluZWQpXG4gKiBAcmV0dXJucyBOb3RlTWV0YWRhdGEgd2l0aCB0YWdzLCBoZWFkaW5ncywgYW5kIGZyb250bWF0dGVyXG4gKiBcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgY2FjaGVkID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICogY29uc3QgbWV0YWRhdGEgPSBleHRyYWN0Tm90ZU1ldGFkYXRhKGNhY2hlZCk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3ROb3RlTWV0YWRhdGEoY2FjaGVkOiBPYnNpZGlhbkNhY2hlZE1ldGFkYXRhIHwgbnVsbCB8IHVuZGVmaW5lZCk6IE5vdGVNZXRhZGF0YSB7XG4gICAgaWYgKCFjYWNoZWQpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cblxuICAgIGNvbnN0IG1ldGFkYXRhOiBOb3RlTWV0YWRhdGEgPSB7fTtcblxuICAgIGlmIChjYWNoZWQudGFncykge1xuICAgICAgICBtZXRhZGF0YS50YWdzID0gY2FjaGVkLnRhZ3MubWFwKHRhZyA9PiAoe1xuICAgICAgICAgICAgdGFnOiB0YWcudGFnLFxuICAgICAgICAgICAgcG9zaXRpb246IHRhZy5wb3NpdGlvbixcbiAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIGlmIChjYWNoZWQuaGVhZGluZ3MpIHtcbiAgICAgICAgbWV0YWRhdGEuaGVhZGluZ3MgPSBjYWNoZWQuaGVhZGluZ3MubWFwKGhlYWRpbmcgPT4gKHtcbiAgICAgICAgICAgIGhlYWRpbmc6IGhlYWRpbmcuaGVhZGluZyxcbiAgICAgICAgICAgIGxldmVsOiBoZWFkaW5nLmxldmVsLFxuICAgICAgICAgICAgcG9zaXRpb246IGhlYWRpbmcucG9zaXRpb24sXG4gICAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBpZiAoY2FjaGVkLmZyb250bWF0dGVyKSB7XG4gICAgICAgIG1ldGFkYXRhLmZyb250bWF0dGVyID0gY2FjaGVkLmZyb250bWF0dGVyO1xuICAgIH1cblxuICAgIHJldHVybiBtZXRhZGF0YTtcbn1cbiIsICJpbXBvcnQgeyBBcHAsIE5vdGljZSwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIE1hcmtkb3duQnJhaW5QbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5cbmV4cG9ydCBjbGFzcyBNYXJrZG93bkJyYWluU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogTWFya2Rvd25CcmFpblBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE1hcmtkb3duQnJhaW5QbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ01hcmtkb3duQnJhaW4gXHU1NDBDXHU2QjY1XHU4QkJFXHU3RjZFJyB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTY3MERcdTUyQTFcdTU2NjhcdTU3MzBcdTU3NDAnKVxuICAgICAgICAgICAgLnNldERlc2MoJ01hcmtkb3duQnJhaW4gXHU2NzBEXHU1MkExXHU1NjY4IEFQSSBcdTU3MzBcdTU3NDAnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdodHRwczovL2FwaS5tYXJrZG93bmJyYWluLmNvbScpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNlcnZlclVybClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNlcnZlclVybCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnU3luYyBLZXknKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1NEVDRVx1N0JBMVx1NzQwNlx1NTQwRVx1NTNGMFx1ODNCN1x1NTNENlx1NzY4NFx1NTQwQ1x1NkI2NVx1NUJDNlx1OTRBNScpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ3h4eHh4eHh4LXh4eHgteHh4eC14eHh4LXh4eHh4eHh4eHh4eCcpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNLZXkpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeW5jS2V5ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTZENEJcdThCRDVcdThGREVcdTYzQTUnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1NkQ0Qlx1OEJENVx1NEUwRVx1NjcwRFx1NTJBMVx1NTY2OFx1NzY4NFx1OEZERVx1NjNBNVx1RkYwODMwXHU3OUQyXHU4RDg1XHU2NUY2XHVGRjA5JylcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdcdTZENEJcdThCRDUnKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHU2RDRCXHU4QkQ1XHU0RTJELi4uJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2QjYzXHU1NzI4XHU2RDRCXHU4QkQ1XHU4RkRFXHU2M0E1Li4uJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wbHVnaW4uc3luY01hbmFnZXIudGVzdENvbm5lY3Rpb24oMzAwMDApO1xuXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdTZENEJcdThCRDUnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0LnZhdWx0SW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXHUyNzA1IFx1OEZERVx1NjNBNVx1NjIxMFx1NTI5Rlx1RkYwMVxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBWYXVsdDogJHtyZXN1bHQudmF1bHRJbmZvLm5hbWV9XFxuYCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYERvbWFpbjogJHtyZXN1bHQudmF1bHRJbmZvLmRvbWFpbn1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDUwMDBcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTI3NEMgXHU4RkRFXHU2M0E1XHU1OTMxXHU4RDI1OiAke3Jlc3VsdC5lcnJvciB8fCAnVW5rbm93biBlcnJvcid9YCwgNTAwMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHU2Mjc5XHU5MUNGXHU1NDBDXHU2QjY1JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdTYyNEJcdTUyQThcdTU0MENcdTZCNjVcdTYyNDBcdTY3MDkgTWFya2Rvd24gXHU2NTg3XHU0RUY2XHU1MjMwXHU2NzBEXHU1MkExXHU1NjY4JylcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdcdTVGMDBcdTU5Q0JcdTU0MENcdTZCNjUnKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHU1NDBDXHU2QjY1XHU0RTJELi4uJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc3luY0FsbEZpbGVzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1NUYwMFx1NTlDQlx1NTQwQ1x1NkI2NScpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTgxRUFcdTUyQThcdTU0MENcdTZCNjUnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1NjU4N1x1NEVGNlx1NEZFRVx1NjUzOVx1NjVGNlx1ODFFQVx1NTJBOFx1NTQwQ1x1NkI2NVx1NTIzMFx1NjcwRFx1NTJBMVx1NTY2OCcpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1N5bmMpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvU3luYyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IFRGaWxlLCBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBpc1Jlc291cmNlRmlsZSB9IGZyb20gJy4uL3V0aWxzJztcblxuZXhwb3J0IHR5cGUgRmlsZUV2ZW50Q2FsbGJhY2sgPSAoZmlsZTogVEZpbGUsIGFjdGlvbjogJ2NyZWF0ZScgfCAnbW9kaWZ5JykgPT4gdm9pZDtcbmV4cG9ydCB0eXBlIEZpbGVEZWxldGVDYWxsYmFjayA9IChmaWxlOiBURmlsZSkgPT4gdm9pZDtcbmV4cG9ydCB0eXBlIEZpbGVSZW5hbWVDYWxsYmFjayA9IChmaWxlOiBURmlsZSwgb2xkUGF0aDogc3RyaW5nKSA9PiB2b2lkO1xuZXhwb3J0IHR5cGUgUmVzb3VyY2VFdmVudENhbGxiYWNrID0gKGZpbGU6IFRGaWxlLCBhY3Rpb246ICd1cHNlcnQnKSA9PiB2b2lkO1xuZXhwb3J0IHR5cGUgUmVzb3VyY2VEZWxldGVDYWxsYmFjayA9IChmaWxlOiBURmlsZSkgPT4gdm9pZDtcbmV4cG9ydCB0eXBlIFJlc291cmNlUmVuYW1lQ2FsbGJhY2sgPSAoZmlsZTogVEZpbGUsIG9sZFBhdGg6IHN0cmluZykgPT4gdm9pZDtcbmV4cG9ydCB0eXBlIE1ldGFkYXRhUmVzb2x2ZWRDYWxsYmFjayA9ICgpID0+IHZvaWQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXZlbnRIYW5kbGVycyB7XG4gICAgb25GaWxlQ2hhbmdlOiBGaWxlRXZlbnRDYWxsYmFjaztcbiAgICBvbkZpbGVEZWxldGU6IEZpbGVEZWxldGVDYWxsYmFjaztcbiAgICBvbkZpbGVSZW5hbWU6IEZpbGVSZW5hbWVDYWxsYmFjaztcbiAgICBvblJlc291cmNlQ2hhbmdlOiBSZXNvdXJjZUV2ZW50Q2FsbGJhY2s7XG4gICAgb25SZXNvdXJjZURlbGV0ZTogUmVzb3VyY2VEZWxldGVDYWxsYmFjaztcbiAgICBvblJlc291cmNlUmVuYW1lOiBSZXNvdXJjZVJlbmFtZUNhbGxiYWNrO1xuICAgIG9uTWV0YWRhdGFSZXNvbHZlZDogTWV0YWRhdGFSZXNvbHZlZENhbGxiYWNrO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBlbmRpbmdTeW5jc01hbmFnZXIge1xuICAgIGFkZChwYXRoOiBzdHJpbmcpOiB2b2lkO1xuICAgIGNsZWFyKCk6IHZvaWQ7XG4gICAgZm9yRWFjaChjYWxsYmFjazogKHBhdGg6IHN0cmluZykgPT4gdm9pZCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckZpbGVFdmVudHMoXG4gICAgYXBwOiBBcHAsXG4gICAgaGFuZGxlcnM6IEV2ZW50SGFuZGxlcnMsXG4gICAgcGVuZGluZ1N5bmNzOiBQZW5kaW5nU3luY3NNYW5hZ2VyLFxuICAgIHJlZ2lzdGVyRXZlbnQ6IChldmVudDogUmV0dXJuVHlwZTx0eXBlb2YgYXBwLnZhdWx0Lm9uPikgPT4gdm9pZFxuKTogdm9pZCB7XG4gICAgcmVnaXN0ZXJFdmVudChcbiAgICAgICAgYXBwLnZhdWx0Lm9uKCdjcmVhdGUnLCAoZmlsZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykge1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVycy5vbkZpbGVDaGFuZ2UoZmlsZSwgJ2NyZWF0ZScpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNvdXJjZUZpbGUoZmlsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlcnMub25SZXNvdXJjZUNoYW5nZShmaWxlLCAndXBzZXJ0Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICk7XG5cbiAgICByZWdpc3RlckV2ZW50KFxuICAgICAgICBhcHAudmF1bHQub24oJ21vZGlmeScsIChmaWxlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdTeW5jcy5hZGQoZmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlzUmVzb3VyY2VGaWxlKGZpbGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXJzLm9uUmVzb3VyY2VDaGFuZ2UoZmlsZSwgJ3Vwc2VydCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgcmVnaXN0ZXJFdmVudChcbiAgICAgICAgYXBwLm1ldGFkYXRhQ2FjaGUub24oJ3Jlc29sdmVkJywgKCkgPT4ge1xuICAgICAgICAgICAgcGVuZGluZ1N5bmNzLmZvckVhY2goKGZpbGVQYXRoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlcnMub25GaWxlQ2hhbmdlKGZpbGUsICdtb2RpZnknKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHBlbmRpbmdTeW5jcy5jbGVhcigpO1xuICAgICAgICAgICAgaGFuZGxlcnMub25NZXRhZGF0YVJlc29sdmVkKCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIHJlZ2lzdGVyRXZlbnQoXG4gICAgICAgIGFwcC52YXVsdC5vbignZGVsZXRlJywgKGZpbGUpID0+IHtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZS5leHRlbnNpb24gPT09ICdtZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlcnMub25GaWxlRGVsZXRlKGZpbGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNvdXJjZUZpbGUoZmlsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlcnMub25SZXNvdXJjZURlbGV0ZShmaWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIHJlZ2lzdGVyRXZlbnQoXG4gICAgICAgIGFwcC52YXVsdC5vbigncmVuYW1lJywgKGZpbGUsIG9sZFBhdGgpID0+IHtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZS5leHRlbnNpb24gPT09ICdtZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlcnMub25GaWxlUmVuYW1lKGZpbGUsIG9sZFBhdGgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNvdXJjZUZpbGUoZmlsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlcnMub25SZXNvdXJjZVJlbmFtZShmaWxlLCBvbGRQYXRoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgKTtcbn1cbiJdLAogICJtYXBwaW5ncyI6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
