/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MarkdownBrainPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian2 = require("obsidian");

// src/core/client-id.ts
var import_obsidian = require("obsidian");
async function getOrCreateClientId(file, content, app) {
  var _a;
  const cache = app.metadataCache.getFileCache(file);
  if ((_a = cache == null ? void 0 : cache.frontmatter) == null ? void 0 : _a["markdownbrain-id"]) {
    return String(cache.frontmatter["markdownbrain-id"]).trim();
  }
  const fileContent = await app.vault.read(file);
  const latestContent = fileContent || content;
  const frontmatterMatch = latestContent.match(/^---\n([\s\S]*?)\n---/);
  if (frontmatterMatch) {
    try {
      const frontmatter = (0, import_obsidian.parseYaml)(frontmatterMatch[1]);
      if (frontmatter == null ? void 0 : frontmatter["markdownbrain-id"]) {
        return String(frontmatter["markdownbrain-id"]).trim();
      }
    } catch (e) {
    }
  }
  const newId = crypto.randomUUID();
  await app.fileManager.processFrontMatter(file, (frontmatter) => {
    frontmatter["markdownbrain-id"] = newId;
  });
  return newId;
}

// main.ts
var DEFAULT_SETTINGS = {
  serverUrl: "https://api.markdownbrain.com",
  syncKey: "",
  autoSync: true
};
var SyncManager = class {
  constructor(config) {
    this.config = config;
  }
  updateConfig(config) {
    this.config = config;
  }
  async testConnection(timeout = 3e4) {
    try {
      const controller = new AbortController();
      const timeoutId = setTimeout(() => controller.abort(), timeout);
      const response = await (0, import_obsidian2.requestUrl)({
        url: `${this.config.serverUrl}/obsidian/vault/info`,
        method: "GET",
        headers: {
          "Authorization": `Bearer ${this.config.syncKey}`
        },
        throw: false
      });
      clearTimeout(timeoutId);
      if (response.status === 200) {
        const data = response.json;
        return {
          success: true,
          vaultInfo: data.vault
        };
      } else {
        return {
          success: false,
          error: `HTTP ${response.status}: ${response.text || "Unknown error"}`
        };
      }
    } catch (error) {
      if ((error == null ? void 0 : error.name) === "AbortError") {
        return {
          success: false,
          error: "\u8FDE\u63A5\u8D85\u65F6\uFF0830\u79D2\uFF09"
        };
      }
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error"
      };
    }
  }
  async sync(data) {
    var _a, _b;
    console.log("[MarkdownBrain] Starting sync:", {
      path: data.path,
      action: data.action,
      hasContent: !!data.content,
      contentLength: (_a = data.content) == null ? void 0 : _a.length,
      serverUrl: this.config.serverUrl,
      hasSyncKey: !!this.config.syncKey
    });
    try {
      const requestBody = JSON.stringify(data);
      console.log("[MarkdownBrain] Request body size:", requestBody.length, "bytes");
      const response = await (0, import_obsidian2.requestUrl)({
        url: `${this.config.serverUrl}/obsidian/sync`,
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${this.config.syncKey}`
        },
        body: requestBody,
        throw: false
      });
      console.log("[MarkdownBrain] Response:", {
        status: response.status,
        statusText: response.status,
        headers: response.headers,
        bodyPreview: (_b = response.text) == null ? void 0 : _b.substring(0, 200)
      });
      if (response.status === 200) {
        console.log("[MarkdownBrain] \u2713 Sync successful:", data.path);
        return { success: true };
      } else {
        const errorMsg = `HTTP ${response.status}: ${response.text || "Sync failed"}`;
        console.error("[MarkdownBrain] \u2717 Sync failed:", {
          path: data.path,
          status: response.status,
          error: errorMsg,
          responseBody: response.text
        });
        return {
          success: false,
          error: errorMsg
        };
      }
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 Sync exception:", {
        path: data.path,
        error,
        errorMessage: error instanceof Error ? error.message : "Unknown error",
        errorStack: error instanceof Error ? error.stack : void 0
      });
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error"
      };
    }
  }
  /**
   * 全量同步 - 清理孤儿文档
   * @param clientIds 客户端所有文档的 client_ids 列表
   * @returns 包含删除数量的响应
   * @complexity O(1) - 单次网络请求
   * @compatibility 降级处理 - 如果服务器返回 404，视为成功（旧服务器）
   */
  async fullSync(clientIds) {
    console.log("[MarkdownBrain] Starting full sync...", {
      clientDocCount: clientIds.length
    });
    try {
      const requestBody = { clientIds };
      const response = await (0, import_obsidian2.requestUrl)({
        url: `${this.config.serverUrl}/obsidian/sync/full`,
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${this.config.syncKey}`
        },
        body: JSON.stringify(requestBody),
        throw: false
      });
      if (response.status === 404) {
        console.warn("[MarkdownBrain] Full sync not supported by server (404), skipping orphan cleanup");
        return {
          success: true,
          data: {
            "vault-id": "",
            action: "full-sync",
            "client-docs": clientIds.length,
            "deleted-count": 0,
            "remaining-docs": clientIds.length
          }
        };
      }
      if (response.status === 200) {
        const data = response.json;
        console.log("[MarkdownBrain] \u2713 Full sync successful:", {
          deletedCount: data["deleted-count"],
          remainingDocs: data["remaining-docs"]
        });
        return {
          success: true,
          data
        };
      } else {
        const errorMsg = `HTTP ${response.status}: ${response.text || "Full sync failed"}`;
        console.error("[MarkdownBrain] \u2717 Full sync failed:", {
          status: response.status,
          error: errorMsg
        });
        return {
          success: false,
          error: errorMsg
        };
      }
    } catch (error) {
      const errorMsg = error instanceof Error ? error.message : "Unknown error";
      console.error("[MarkdownBrain] \u2717 Full sync exception:", {
        error: errorMsg
      });
      return {
        success: false,
        error: errorMsg
      };
    }
  }
  destroy() {
  }
};
var MarkdownBrainPlugin = class extends import_obsidian2.Plugin {
  constructor(app, manifest) {
    super(app, manifest);
    this.syncDebounceTimers = /* @__PURE__ */ new Map();
    this.pendingSyncs = /* @__PURE__ */ new Set();
  }
  async onload() {
    var _a;
    console.log("[MarkdownBrain] ========================================");
    console.log("[MarkdownBrain] Plugin loading...");
    await this.loadSettings();
    console.log("[MarkdownBrain] Settings loaded:", {
      serverUrl: this.settings.serverUrl,
      hasSyncKey: !!this.settings.syncKey,
      syncKeyLength: (_a = this.settings.syncKey) == null ? void 0 : _a.length,
      autoSync: this.settings.autoSync
    });
    this.syncManager = new SyncManager({
      serverUrl: this.settings.serverUrl,
      syncKey: this.settings.syncKey
    });
    console.log("[MarkdownBrain] SyncManager initialized");
    this.registerEvent(
      this.app.vault.on("create", (file) => {
        if (file instanceof import_obsidian2.TFile && file.extension === "md") {
          this.handleFileChange(file, "create");
        }
      })
    );
    console.log("[MarkdownBrain] Registered event: file create");
    this.registerEvent(
      this.app.vault.on("modify", (file) => {
        if (file instanceof import_obsidian2.TFile && file.extension === "md") {
          this.pendingSyncs.add(file.path);
        }
      })
    );
    console.log("[MarkdownBrain] Registered event: file modify");
    this.registerEvent(
      this.app.metadataCache.on("resolved", () => {
        for (const filePath of this.pendingSyncs) {
          const file = this.app.vault.getAbstractFileByPath(filePath);
          if (file instanceof import_obsidian2.TFile) {
            this.handleFileChange(file, "modify");
          }
        }
        this.pendingSyncs.clear();
      })
    );
    console.log("[MarkdownBrain] Registered event: metadata resolved");
    this.registerEvent(
      this.app.vault.on("delete", (file) => {
        if (file instanceof import_obsidian2.TFile && file.extension === "md") {
          this.handleFileDelete(file);
        }
      })
    );
    console.log("[MarkdownBrain] Registered event: file delete");
    this.registerEvent(
      this.app.vault.on("rename", (file, oldPath) => {
        if (file instanceof import_obsidian2.TFile && file.extension === "md") {
          this.handleFileRename(file, oldPath);
        }
      })
    );
    console.log("[MarkdownBrain] Registered event: file rename");
    this.addSettingTab(new MarkdownBrainSettingTab(this.app, this));
    console.log("[MarkdownBrain] Settings tab added");
    this.addCommand({
      id: "sync-current-file",
      name: "Sync current file",
      callback: () => {
        const file = this.app.workspace.getActiveFile();
        if (file) {
          this.handleFileChange(file, "modify");
        }
      }
    });
    this.addCommand({
      id: "sync-all-files",
      name: "Sync all files",
      callback: () => {
        this.syncAllFiles();
      }
    });
    console.log("[MarkdownBrain] Commands registered");
    console.log("[MarkdownBrain] \u2713 Plugin loaded successfully");
    console.log("[MarkdownBrain] ========================================");
  }
  async handleFileChange(file, action) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping:", file.path);
      return;
    }
    const existingTimer = this.syncDebounceTimers.get(file.path);
    if (existingTimer) {
      clearTimeout(existingTimer);
    }
    const timer = setTimeout(async () => {
      this.syncDebounceTimers.delete(file.path);
      await this.performSync(file, action);
    }, 300);
    this.syncDebounceTimers.set(file.path, timer);
  }
  async performSync(file, action) {
    var _a, _b;
    console.log("[MarkdownBrain] File change detected:", {
      path: file.path,
      action,
      extension: file.extension,
      size: file.stat.size
    });
    try {
      const content = await this.app.vault.read(file);
      console.log("[MarkdownBrain] File read successfully:", {
        path: file.path,
        contentLength: content.length
      });
      const cachedMetadata = this.app.metadataCache.getFileCache(file);
      const metadata = {};
      if (cachedMetadata) {
        if (cachedMetadata.tags) {
          metadata.tags = cachedMetadata.tags.map((tag) => ({
            tag: tag.tag,
            position: tag.position
          }));
        }
        if (cachedMetadata.headings) {
          metadata.headings = cachedMetadata.headings.map((heading) => ({
            heading: heading.heading,
            level: heading.level,
            position: heading.position
          }));
        }
        if (cachedMetadata.frontmatter) {
          metadata.frontmatter = cachedMetadata.frontmatter;
        }
        console.log("[MarkdownBrain] Metadata extracted:", {
          path: file.path,
          tagsCount: ((_a = metadata.tags) == null ? void 0 : _a.length) || 0,
          headingsCount: ((_b = metadata.headings) == null ? void 0 : _b.length) || 0,
          hasFrontmatter: !!metadata.frontmatter
        });
      }
      const stat = file.stat;
      const hash = await this.hashString(content);
      const mtime = new Date(stat.mtime).toISOString();
      const clientId = await getOrCreateClientId(file, content, this.app);
      console.log("[MarkdownBrain] File metadata:", {
        path: file.path,
        clientId,
        hash,
        mtime
      });
      const syncData = {
        path: file.path,
        clientId,
        clientType: "obsidian",
        content,
        hash,
        mtime,
        metadata,
        action
      };
      const result = await this.syncManager.sync(syncData);
      if (result.success) {
        console.log("[MarkdownBrain] \u2713 File synced successfully:", file.path);
      } else {
        console.error("[MarkdownBrain] \u2717 File sync failed:", file.path, result.error);
        new import_obsidian2.Notice(`\u540C\u6B65\u5931\u8D25: ${file.path}
${result.error}`);
      }
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 File change handler error:", {
        path: file.path,
        error,
        errorMessage: error instanceof Error ? error.message : "Unknown error",
        errorStack: error instanceof Error ? error.stack : void 0
      });
      new import_obsidian2.Notice(`\u540C\u6B65\u9519\u8BEF: ${error instanceof Error ? error.message : "Unknown error"}`);
    }
  }
  async handleFileDelete(file) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping delete:", file.path);
      return;
    }
    console.log("[MarkdownBrain] File deletion detected:", {
      path: file.path,
      extension: file.extension
    });
    try {
      const content = await this.app.vault.read(file);
      const clientId = await getOrCreateClientId(file, content, this.app);
      const result = await this.syncManager.sync({
        path: file.path,
        clientId,
        clientType: "obsidian",
        action: "delete"
      });
      if (result.success) {
        console.log("[MarkdownBrain] \u2713 File deletion synced:", file.path);
      } else {
        console.error("[MarkdownBrain] \u2717 File deletion sync failed:", file.path, result.error);
      }
    } catch (error) {
      console.warn("[MarkdownBrain] Cannot sync file deletion (file already removed or never synced):", file.path);
    }
  }
  async handleFileRename(file, oldPath) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping rename:", oldPath, "->", file.path);
      return;
    }
    console.log("[MarkdownBrain] File rename detected:", {
      oldPath,
      newPath: file.path,
      extension: file.extension
    });
    try {
      console.log("[MarkdownBrain] Syncing rename with frontmatter UUID");
      await this.performSync(file, "modify");
      console.log("[MarkdownBrain] \u2713 File rename synced:", oldPath, "->", file.path);
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 Rename sync exception:", {
        oldPath,
        newPath: file.path,
        error,
        errorMessage: error instanceof Error ? error.message : "Unknown error"
      });
      new import_obsidian2.Notice(`\u91CD\u547D\u540D\u540C\u6B65\u9519\u8BEF: ${error instanceof Error ? error.message : "Unknown error"}`);
    }
  }
  /**
   * 全量同步所有文件
   * @flow 收集 IDs → 清理孤儿 → 增量同步
   * @complexity O(n) where n = 文件数量
   */
  async syncAllFiles() {
    const files = this.app.vault.getMarkdownFiles();
    console.log(`[MarkdownBrain] Starting full sync for ${files.length} files`);
    new import_obsidian2.Notice(`\u5F00\u59CB\u5168\u91CF\u540C\u6B65 ${files.length} \u4E2A\u6587\u4EF6...`);
    const clientIds = await this.collectClientIds(files);
    console.log(`[MarkdownBrain] Collected ${clientIds.length} client IDs`);
    await this.cleanupOrphans(clientIds);
    await this.incrementalSyncBatch(files);
  }
  /**
   * 收集所有文件的 client_ids
   * @complexity O(n) time, O(n) space
   */
  async collectClientIds(files) {
    const ids = [];
    for (const file of files) {
      try {
        const content = await this.app.vault.read(file);
        if ((content == null ? void 0 : content.trim().length) > 0) {
          ids.push(await getOrCreateClientId(file, content, this.app));
        }
      } catch (error) {
        console.error(`[MarkdownBrain] Failed to read ${file.path}:`, error);
      }
    }
    return ids;
  }
  /**
   * 清理孤儿文档
   * @complexity O(1) - 单次网络请求
   */
  async cleanupOrphans(clientIds) {
    var _a;
    try {
      const result = await this.syncManager.fullSync(clientIds);
      const deleted = ((_a = result.data) == null ? void 0 : _a["deleted-count"]) || 0;
      if (deleted > 0) {
        console.log(`[MarkdownBrain] \u2713 Cleaned ${deleted} orphan documents`);
        new import_obsidian2.Notice(`\u6E05\u7406\u4E86 ${deleted} \u4E2A\u5B64\u513F\u6587\u6863`);
      } else if (result.success) {
        console.log("[MarkdownBrain] \u2713 No orphan documents found");
      }
    } catch (error) {
      console.error("[MarkdownBrain] Full sync error:", error);
    }
  }
  /**
   * 批量增量同步
   * @complexity O(n) with batching
   */
  async incrementalSyncBatch(files) {
    const stats = { success: 0, failed: 0, skipped: 0 };
    const batchSize = 10;
    for (let i = 0; i < files.length; i += batchSize) {
      const batch = files.slice(i, i + batchSize);
      await Promise.all(batch.map((file) => this.syncOneFile(file, stats)));
      const progress = Math.min(i + batchSize, files.length);
      new import_obsidian2.Notice(`\u540C\u6B65\u8FDB\u5EA6: ${progress}/${files.length} (\u6210\u529F: ${stats.success}, \u5931\u8D25: ${stats.failed}, \u8DF3\u8FC7: ${stats.skipped})`);
    }
    const finalMsg = `\u540C\u6B65\u5B8C\u6210! \u603B\u8BA1: ${files.length}, \u6210\u529F: ${stats.success}, \u5931\u8D25: ${stats.failed}, \u8DF3\u8FC7: ${stats.skipped}`;
    console.log(`[MarkdownBrain] ${finalMsg}`);
    new import_obsidian2.Notice(finalMsg, 8e3);
  }
  /**
   * 同步单个文件
   */
  async syncOneFile(file, stats) {
    try {
      await this.performSync(file, "modify");
      stats.success++;
    } catch (error) {
      stats.failed++;
      console.error(`[MarkdownBrain] \u2717 Failed to sync ${file.path}:`, error);
    }
  }
  // MD5 哈希函数（用于检测文件内容变化）
  async hashString(str) {
    const encoder = new TextEncoder();
    const data = encoder.encode(str);
    const hashBuffer = await crypto.subtle.digest("MD5", data).catch(() => {
      return crypto.subtle.digest("SHA-256", data);
    });
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    return hashArray.map((b) => b.toString(16).padStart(2, "0")).join("");
  }
  onunload() {
    console.log("Unloading MarkdownBrain plugin");
    for (const timer of this.syncDebounceTimers.values()) {
      clearTimeout(timer);
    }
    this.syncDebounceTimers.clear();
    this.syncManager.destroy();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.syncManager.updateConfig({
      serverUrl: this.settings.serverUrl,
      syncKey: this.settings.syncKey
    });
  }
};
var MarkdownBrainSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "MarkdownBrain \u540C\u6B65\u8BBE\u7F6E" });
    new import_obsidian2.Setting(containerEl).setName("\u670D\u52A1\u5668\u5730\u5740").setDesc("MarkdownBrain \u670D\u52A1\u5668 API \u5730\u5740").addText((text) => text.setPlaceholder("https://api.markdownbrain.com").setValue(this.plugin.settings.serverUrl).onChange(async (value) => {
      this.plugin.settings.serverUrl = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("Sync Key").setDesc("\u4ECE\u7BA1\u7406\u540E\u53F0\u83B7\u53D6\u7684\u540C\u6B65\u5BC6\u94A5").addText((text) => text.setPlaceholder("xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx").setValue(this.plugin.settings.syncKey).onChange(async (value) => {
      this.plugin.settings.syncKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("\u6D4B\u8BD5\u8FDE\u63A5").setDesc("\u6D4B\u8BD5\u4E0E\u670D\u52A1\u5668\u7684\u8FDE\u63A5\uFF0830\u79D2\u8D85\u65F6\uFF09").addButton((button) => button.setButtonText("\u6D4B\u8BD5").onClick(async () => {
      button.setDisabled(true);
      button.setButtonText("\u6D4B\u8BD5\u4E2D...");
      new import_obsidian2.Notice("\u6B63\u5728\u6D4B\u8BD5\u8FDE\u63A5...");
      const result = await this.plugin.syncManager.testConnection(3e4);
      button.setDisabled(false);
      button.setButtonText("\u6D4B\u8BD5");
      if (result.success && result.vaultInfo) {
        new import_obsidian2.Notice(
          `\u2705 \u8FDE\u63A5\u6210\u529F\uFF01
Vault: ${result.vaultInfo.name}
Domain: ${result.vaultInfo.domain}`,
          5e3
        );
      } else {
        new import_obsidian2.Notice(`\u274C \u8FDE\u63A5\u5931\u8D25: ${result.error || "Unknown error"}`, 5e3);
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("\u6279\u91CF\u540C\u6B65").setDesc("\u624B\u52A8\u540C\u6B65\u6240\u6709 Markdown \u6587\u4EF6\u5230\u670D\u52A1\u5668").addButton((button) => button.setButtonText("\u5F00\u59CB\u540C\u6B65").onClick(async () => {
      button.setDisabled(true);
      button.setButtonText("\u540C\u6B65\u4E2D...");
      await this.plugin.syncAllFiles();
      button.setDisabled(false);
      button.setButtonText("\u5F00\u59CB\u540C\u6B65");
    }));
    new import_obsidian2.Setting(containerEl).setName("\u81EA\u52A8\u540C\u6B65").setDesc("\u6587\u4EF6\u4FEE\u6539\u65F6\u81EA\u52A8\u540C\u6B65\u5230\u670D\u52A1\u5668").addToggle((toggle) => toggle.setValue(this.plugin.settings.autoSync).onChange(async (value) => {
      this.plugin.settings.autoSync = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vLi4vLi4vb2JzaWRpYW4tcGx1Z2luL21haW4udHMiLCAiLi4vLi4vLi4vLi4vLi4vb2JzaWRpYW4tcGx1Z2luL3NyYy9jb3JlL2NsaWVudC1pZC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFBsdWdpbiwgUGx1Z2luTWFuaWZlc3QsIFBsdWdpblNldHRpbmdUYWIsIHJlcXVlc3RVcmwsIFNldHRpbmcsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgZ2V0T3JDcmVhdGVDbGllbnRJZCB9IGZyb20gJy4vc3JjL2NvcmUvY2xpZW50LWlkJztcblxuaW50ZXJmYWNlIE1hcmtkb3duQnJhaW5TZXR0aW5ncyB7XG4gICAgc2VydmVyVXJsOiBzdHJpbmc7XG4gICAgc3luY0tleTogc3RyaW5nO1xuICAgIGF1dG9TeW5jOiBib29sZWFuO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNYXJrZG93bkJyYWluU2V0dGluZ3MgPSB7XG4gICAgc2VydmVyVXJsOiAnaHR0cHM6Ly9hcGkubWFya2Rvd25icmFpbi5jb20nLFxuICAgIHN5bmNLZXk6ICcnLFxuICAgIGF1dG9TeW5jOiB0cnVlXG59O1xuXG4vLyBcdTU0MENcdTZCNjVcdTkxNERcdTdGNkVcbmludGVyZmFjZSBTeW5jQ29uZmlnIHtcbiAgICBzZXJ2ZXJVcmw6IHN0cmluZztcbiAgICBzeW5jS2V5OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBEb2N1bWVudE1ldGFkYXRhIHtcbiAgICB0YWdzPzogQXJyYXk8e1xuICAgICAgICB0YWc6IHN0cmluZztcbiAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICAgIHN0YXJ0OiB7IGxpbmU6IG51bWJlcjsgY29sOiBudW1iZXI7IG9mZnNldDogbnVtYmVyIH07XG4gICAgICAgICAgICBlbmQ6IHsgbGluZTogbnVtYmVyOyBjb2w6IG51bWJlcjsgb2Zmc2V0OiBudW1iZXIgfTtcbiAgICAgICAgfTtcbiAgICB9PjtcbiAgICBoZWFkaW5ncz86IEFycmF5PHtcbiAgICAgICAgaGVhZGluZzogc3RyaW5nO1xuICAgICAgICBsZXZlbDogbnVtYmVyO1xuICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgICAgc3RhcnQ6IHsgbGluZTogbnVtYmVyOyBjb2w6IG51bWJlcjsgb2Zmc2V0OiBudW1iZXIgfTtcbiAgICAgICAgICAgIGVuZDogeyBsaW5lOiBudW1iZXI7IGNvbDogbnVtYmVyOyBvZmZzZXQ6IG51bWJlciB9O1xuICAgICAgICB9O1xuICAgIH0+O1xuICAgIGZyb250bWF0dGVyPzogUmVjb3JkPHN0cmluZywgYW55Pjtcbn1cblxuLy8gXHU1NDBDXHU2QjY1XHU2NTcwXHU2MzZFXG5pbnRlcmZhY2UgU3luY0RhdGEge1xuICAgIHBhdGg6IHN0cmluZztcbiAgICBjbGllbnRJZDogc3RyaW5nOyAgICAgICAgICAgLy8gXHU1QkEyXHU2MjM3XHU3QUVGXHU3NTFGXHU2MjEwXHU3Njg0XHU1NTJGXHU0RTAwIElEXG4gICAgY2xpZW50VHlwZTogc3RyaW5nOyAgICAgICAgIC8vIFx1NUJBMlx1NjIzN1x1N0FFRlx1N0M3Qlx1NTc4Qlx1RkYxQSdvYnNpZGlhbidcbiAgICBjb250ZW50Pzogc3RyaW5nO1xuICAgIGhhc2g/OiBzdHJpbmc7XG4gICAgbXRpbWU/OiBzdHJpbmc7XG4gICAgbWV0YWRhdGE/OiBEb2N1bWVudE1ldGFkYXRhO1xuICAgIGFjdGlvbjogJ2NyZWF0ZScgfCAnbW9kaWZ5JyB8ICdkZWxldGUnO1xufVxuXG4vLyBWYXVsdCBcdTRGRTFcdTYwNkZcbmludGVyZmFjZSBWYXVsdEluZm8ge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGRvbWFpbjogc3RyaW5nO1xuICAgICdjcmVhdGVkLWF0Jzogc3RyaW5nO1xufVxuXG4vLyBGdWxsIFN5bmMgXHU4QkY3XHU2QzQyXG5pbnRlcmZhY2UgRnVsbFN5bmNSZXF1ZXN0IHtcbiAgICBjbGllbnRJZHM6IHN0cmluZ1tdO1xufVxuXG4vLyBGdWxsIFN5bmMgXHU1NENEXHU1RTk0XG5pbnRlcmZhY2UgRnVsbFN5bmNSZXNwb25zZSB7XG4gICAgc3VjY2VzczogYm9vbGVhbjtcbiAgICBkYXRhPzoge1xuICAgICAgICAndmF1bHQtaWQnOiBzdHJpbmc7XG4gICAgICAgIGFjdGlvbjogc3RyaW5nO1xuICAgICAgICAnY2xpZW50LWRvY3MnOiBudW1iZXI7XG4gICAgICAgICdkZWxldGVkLWNvdW50JzogbnVtYmVyO1xuICAgICAgICAncmVtYWluaW5nLWRvY3MnOiBudW1iZXI7XG4gICAgfTtcbiAgICBlcnJvcj86IHN0cmluZztcbn1cblxuLy8gXHU1NDBDXHU2QjY1XHU3RURGXHU4QkExXG5pbnRlcmZhY2UgU3luY1N0YXRzIHtcbiAgICBzdWNjZXNzOiBudW1iZXI7XG4gICAgZmFpbGVkOiBudW1iZXI7XG4gICAgc2tpcHBlZDogbnVtYmVyO1xufVxuXG4vLyBcdTU0MENcdTZCNjVcdTdCQTFcdTc0MDZcdTU2NjhcbmNsYXNzIFN5bmNNYW5hZ2VyIHtcbiAgICBwcml2YXRlIGNvbmZpZzogU3luY0NvbmZpZztcblxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZzogU3luY0NvbmZpZykge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB9XG5cbiAgICB1cGRhdGVDb25maWcoY29uZmlnOiBTeW5jQ29uZmlnKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIH1cblxuICAgIGFzeW5jIHRlc3RDb25uZWN0aW9uKHRpbWVvdXQ6IG51bWJlciA9IDMwMDAwKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IHZhdWx0SW5mbz86IFZhdWx0SW5mbzsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCB0aW1lb3V0KTtcblxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgICAgICB1cmw6IGAke3RoaXMuY29uZmlnLnNlcnZlclVybH0vb2JzaWRpYW4vdmF1bHQvaW5mb2AsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuY29uZmlnLnN5bmNLZXl9YFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdGhyb3c6IGZhbHNlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5qc29uO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhdWx0SW5mbzogZGF0YS52YXVsdFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnRleHQgfHwgJ1Vua25vd24gZXJyb3InfWBcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgICAgICBpZiAoZXJyb3I/Lm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ1x1OEZERVx1NjNBNVx1OEQ4NVx1NjVGNlx1RkYwODMwXHU3OUQyXHVGRjA5J1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHN5bmMoZGF0YTogU3luY0RhdGEpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFN0YXJ0aW5nIHN5bmM6Jywge1xuICAgICAgICAgICAgcGF0aDogZGF0YS5wYXRoLFxuICAgICAgICAgICAgYWN0aW9uOiBkYXRhLmFjdGlvbixcbiAgICAgICAgICAgIGhhc0NvbnRlbnQ6ICEhZGF0YS5jb250ZW50LFxuICAgICAgICAgICAgY29udGVudExlbmd0aDogZGF0YS5jb250ZW50Py5sZW5ndGgsXG4gICAgICAgICAgICBzZXJ2ZXJVcmw6IHRoaXMuY29uZmlnLnNlcnZlclVybCxcbiAgICAgICAgICAgIGhhc1N5bmNLZXk6ICEhdGhpcy5jb25maWcuc3luY0tleVxuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEJvZHkgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gUmVxdWVzdCBib2R5IHNpemU6JywgcmVxdWVzdEJvZHkubGVuZ3RoLCAnYnl0ZXMnKTtcblxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgICAgICB1cmw6IGAke3RoaXMuY29uZmlnLnNlcnZlclVybH0vb2JzaWRpYW4vc3luY2AsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLmNvbmZpZy5zeW5jS2V5fWBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RCb2R5LFxuICAgICAgICAgICAgICAgIHRocm93OiBmYWxzZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gUmVzcG9uc2U6Jywge1xuICAgICAgICAgICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiByZXNwb25zZS5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIGJvZHlQcmV2aWV3OiByZXNwb25zZS50ZXh0Py5zdWJzdHJpbmcoMCwgMjAwKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gXHUyNzEzIFN5bmMgc3VjY2Vzc2Z1bDonLCBkYXRhLnBhdGgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2UudGV4dCB8fCAnU3luYyBmYWlsZWQnfWA7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW01hcmtkb3duQnJhaW5dIFx1MjcxNyBTeW5jIGZhaWxlZDonLCB7XG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGRhdGEucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvck1zZyxcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VCb2R5OiByZXNwb25zZS50ZXh0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvck1zZ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbTWFya2Rvd25CcmFpbl0gXHUyNzE3IFN5bmMgZXhjZXB0aW9uOicsIHtcbiAgICAgICAgICAgICAgICBwYXRoOiBkYXRhLnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXHU1MTY4XHU5MUNGXHU1NDBDXHU2QjY1IC0gXHU2RTA1XHU3NDA2XHU1QjY0XHU1MTNGXHU2NTg3XHU2ODYzXG4gICAgICogQHBhcmFtIGNsaWVudElkcyBcdTVCQTJcdTYyMzdcdTdBRUZcdTYyNDBcdTY3MDlcdTY1ODdcdTY4NjNcdTc2ODQgY2xpZW50X2lkcyBcdTUyMTdcdTg4NjhcbiAgICAgKiBAcmV0dXJucyBcdTUzMDVcdTU0MkJcdTUyMjBcdTk2NjRcdTY1NzBcdTkxQ0ZcdTc2ODRcdTU0Q0RcdTVFOTRcbiAgICAgKiBAY29tcGxleGl0eSBPKDEpIC0gXHU1MzU1XHU2QjIxXHU3RjUxXHU3RURDXHU4QkY3XHU2QzQyXG4gICAgICogQGNvbXBhdGliaWxpdHkgXHU5NjREXHU3RUE3XHU1OTA0XHU3NDA2IC0gXHU1OTgyXHU2NzlDXHU2NzBEXHU1MkExXHU1NjY4XHU4RkQ0XHU1NkRFIDQwNFx1RkYwQ1x1ODlDNlx1NEUzQVx1NjIxMFx1NTI5Rlx1RkYwOFx1NjVFN1x1NjcwRFx1NTJBMVx1NTY2OFx1RkYwOVxuICAgICAqL1xuICAgIGFzeW5jIGZ1bGxTeW5jKGNsaWVudElkczogc3RyaW5nW10pOiBQcm9taXNlPEZ1bGxTeW5jUmVzcG9uc2U+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBTdGFydGluZyBmdWxsIHN5bmMuLi4nLCB7XG4gICAgICAgICAgICBjbGllbnREb2NDb3VudDogY2xpZW50SWRzLmxlbmd0aFxuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEJvZHk6IEZ1bGxTeW5jUmVxdWVzdCA9IHsgY2xpZW50SWRzIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICAgICAgICAgIHVybDogYCR7dGhpcy5jb25maWcuc2VydmVyVXJsfS9vYnNpZGlhbi9zeW5jL2Z1bGxgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5jb25maWcuc3luY0tleX1gXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSksXG4gICAgICAgICAgICAgICAgdGhyb3c6IGZhbHNlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gXHU1NDExXHU1NDBFXHU1MTdDXHU1QkI5XHVGRjFBXHU2NUU3XHU2NzBEXHU1MkExXHU1NjY4XHU0RTBEXHU2NTJGXHU2MzAxIGZ1bGwtc3luYyAoNDA0KVxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdbTWFya2Rvd25CcmFpbl0gRnVsbCBzeW5jIG5vdCBzdXBwb3J0ZWQgYnkgc2VydmVyICg0MDQpLCBza2lwcGluZyBvcnBoYW4gY2xlYW51cCcpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd2YXVsdC1pZCc6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnZnVsbC1zeW5jJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdjbGllbnQtZG9jcyc6IGNsaWVudElkcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGVsZXRlZC1jb3VudCc6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAncmVtYWluaW5nLWRvY3MnOiBjbGllbnRJZHMubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuanNvbjtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFx1MjcxMyBGdWxsIHN5bmMgc3VjY2Vzc2Z1bDonLCB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZWRDb3VudDogZGF0YVsnZGVsZXRlZC1jb3VudCddLFxuICAgICAgICAgICAgICAgICAgICByZW1haW5pbmdEb2NzOiBkYXRhWydyZW1haW5pbmctZG9jcyddXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnRleHQgfHwgJ0Z1bGwgc3luYyBmYWlsZWQnfWA7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW01hcmtkb3duQnJhaW5dIFx1MjcxNyBGdWxsIHN5bmMgZmFpbGVkOicsIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvck1zZ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JNc2dcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZG93bkJyYWluXSBcdTI3MTcgRnVsbCBzeW5jIGV4Y2VwdGlvbjonLCB7XG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yTXNnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yTXNnXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgLy8gQ2xlYW51cCBpZiBuZWVkZWRcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hcmtkb3duQnJhaW5QbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzITogTWFya2Rvd25CcmFpblNldHRpbmdzO1xuICAgIHN5bmNNYW5hZ2VyITogU3luY01hbmFnZXI7XG4gICAgcHJpdmF0ZSBzeW5jRGVib3VuY2VUaW1lcnM6IE1hcDxzdHJpbmcsIE5vZGVKUy5UaW1lb3V0PjtcbiAgICBwcml2YXRlIHBlbmRpbmdTeW5jczogU2V0PHN0cmluZz47XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgbWFuaWZlc3Q6IFBsdWdpbk1hbmlmZXN0KSB7XG4gICAgICAgIHN1cGVyKGFwcCwgbWFuaWZlc3QpO1xuICAgICAgICB0aGlzLnN5bmNEZWJvdW5jZVRpbWVycyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5wZW5kaW5nU3luY3MgPSBuZXcgU2V0KCk7XG4gICAgfVxuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBQbHVnaW4gbG9hZGluZy4uLicpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBTZXR0aW5ncyBsb2FkZWQ6Jywge1xuICAgICAgICAgICAgc2VydmVyVXJsOiB0aGlzLnNldHRpbmdzLnNlcnZlclVybCxcbiAgICAgICAgICAgIGhhc1N5bmNLZXk6ICEhdGhpcy5zZXR0aW5ncy5zeW5jS2V5LFxuICAgICAgICAgICAgc3luY0tleUxlbmd0aDogdGhpcy5zZXR0aW5ncy5zeW5jS2V5Py5sZW5ndGgsXG4gICAgICAgICAgICBhdXRvU3luYzogdGhpcy5zZXR0aW5ncy5hdXRvU3luY1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTUyMURcdTU5Q0JcdTUzMTZcdTU0MENcdTZCNjVcdTdCQTFcdTc0MDZcdTU2NjhcbiAgICAgICAgdGhpcy5zeW5jTWFuYWdlciA9IG5ldyBTeW5jTWFuYWdlcih7XG4gICAgICAgICAgICBzZXJ2ZXJVcmw6IHRoaXMuc2V0dGluZ3Muc2VydmVyVXJsLFxuICAgICAgICAgICAgc3luY0tleTogdGhpcy5zZXR0aW5ncy5zeW5jS2V5XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFN5bmNNYW5hZ2VyIGluaXRpYWxpemVkJyk7XG5cbiAgICAgICAgLy8gXHU3NkQxXHU1NDJDXHU2NTg3XHU0RUY2XHU1MjFCXHU1RUZBXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0Lm9uKCdjcmVhdGUnLCAoZmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVGaWxlQ2hhbmdlKGZpbGUsICdjcmVhdGUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFJlZ2lzdGVyZWQgZXZlbnQ6IGZpbGUgY3JlYXRlJyk7XG5cbiAgICAgICAgLy8gXHU3NkQxXHU1NDJDXHU2NTg3XHU0RUY2XHU0RkVFXHU2NTM5XG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0Lm9uKCdtb2RpZnknLCAoZmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2ODA3XHU4QkIwXHU0RTNBXHU1Rjg1XHU1NDBDXHU2QjY1XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ1N5bmNzLmFkZChmaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gUmVnaXN0ZXJlZCBldmVudDogZmlsZSBtb2RpZnknKTtcblxuICAgICAgICAvLyBcdTc2RDFcdTU0MkNcdTUxNDNcdTY1NzBcdTYzNkVcdTdGMTNcdTVCNThcdTY2RjRcdTY1QjBcdTVCOENcdTYyMTBcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5vbigncmVzb2x2ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gbWV0YWRhdGFDYWNoZSBcdTVERjJcdTg5RTNcdTY3OTBcdTVCOENcdTYyMTBcdUZGMENcdTU5MDRcdTc0MDZcdTYyNDBcdTY3MDlcdTVGODVcdTU0MENcdTZCNjVcdTc2ODRcdTY1ODdcdTRFRjZcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGVQYXRoIG9mIHRoaXMucGVuZGluZ1N5bmNzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUZpbGVDaGFuZ2UoZmlsZSwgJ21vZGlmeScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ1N5bmNzLmNsZWFyKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFJlZ2lzdGVyZWQgZXZlbnQ6IG1ldGFkYXRhIHJlc29sdmVkJyk7XG5cbiAgICAgICAgLy8gXHU3NkQxXHU1NDJDXHU2NTg3XHU0RUY2XHU1MjIwXHU5NjY0XG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0Lm9uKCdkZWxldGUnLCAoZmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVGaWxlRGVsZXRlKGZpbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gUmVnaXN0ZXJlZCBldmVudDogZmlsZSBkZWxldGUnKTtcblxuICAgICAgICAvLyBcdTc2RDFcdTU0MkNcdTY1ODdcdTRFRjZcdTkxQ0RcdTU0N0RcdTU0MERcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oJ3JlbmFtZScsIChmaWxlLCBvbGRQYXRoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUZpbGVSZW5hbWUoZmlsZSwgb2xkUGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBSZWdpc3RlcmVkIGV2ZW50OiBmaWxlIHJlbmFtZScpO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1OEJCRVx1N0Y2RVx1OTc2Mlx1Njc3RlxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IE1hcmtkb3duQnJhaW5TZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gU2V0dGluZ3MgdGFiIGFkZGVkJyk7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1NDdEXHU0RUU0XHVGRjFBXHU2MjRCXHU1MkE4XHU1NDBDXHU2QjY1XHU1RjUzXHU1MjREXHU2NTg3XHU0RUY2XG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ3N5bmMtY3VycmVudC1maWxlJyxcbiAgICAgICAgICAgIG5hbWU6ICdTeW5jIGN1cnJlbnQgZmlsZScsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICAgICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRmlsZUNoYW5nZShmaWxlLCAnbW9kaWZ5Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTU0N0RcdTRFRTRcdUZGMUFcdTU0MENcdTZCNjVcdTYyNDBcdTY3MDlcdTY1ODdcdTRFRjZcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnc3luYy1hbGwtZmlsZXMnLFxuICAgICAgICAgICAgbmFtZTogJ1N5bmMgYWxsIGZpbGVzJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zeW5jQWxsRmlsZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gQ29tbWFuZHMgcmVnaXN0ZXJlZCcpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gXHUyNzEzIFBsdWdpbiBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpO1xuICAgIH1cblxuICAgIGFzeW5jIGhhbmRsZUZpbGVDaGFuZ2UoZmlsZTogVEZpbGUsIGFjdGlvbjogJ2NyZWF0ZScgfCAnbW9kaWZ5Jykge1xuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuYXV0b1N5bmMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gQXV0by1zeW5jIGRpc2FibGVkLCBza2lwcGluZzonLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHU2RTA1XHU5NjY0XHU0RTRCXHU1MjREXHU3Njg0XHU5NjMyXHU2Mjk2XHU1QjlBXHU2NUY2XHU1NjY4XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nVGltZXIgPSB0aGlzLnN5bmNEZWJvdW5jZVRpbWVycy5nZXQoZmlsZS5wYXRoKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nVGltZXIpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChleGlzdGluZ1RpbWVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1NEY3Rlx1NzUyOFx1OTYzMlx1NjI5Nlx1OTA3Rlx1NTE0RFx1NUZFQlx1OTAxRlx1OEZERVx1N0VFRFx1NzY4NFx1NTQwQ1x1NkI2NVxuICAgICAgICBjb25zdCB0aW1lciA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zeW5jRGVib3VuY2VUaW1lcnMuZGVsZXRlKGZpbGUucGF0aCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBlcmZvcm1TeW5jKGZpbGUsIGFjdGlvbik7XG4gICAgICAgIH0sIDMwMCk7IC8vIDMwMG1zIFx1OTYzMlx1NjI5NlxuXG4gICAgICAgIHRoaXMuc3luY0RlYm91bmNlVGltZXJzLnNldChmaWxlLnBhdGgsIHRpbWVyKTtcbiAgICB9XG5cbiAgICBhc3luYyBwZXJmb3JtU3luYyhmaWxlOiBURmlsZSwgYWN0aW9uOiAnY3JlYXRlJyB8ICdtb2RpZnknKSB7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBGaWxlIGNoYW5nZSBkZXRlY3RlZDonLCB7XG4gICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgICAgICAgIGV4dGVuc2lvbjogZmlsZS5leHRlbnNpb24sXG4gICAgICAgICAgICBzaXplOiBmaWxlLnN0YXQuc2l6ZVxuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIEZpbGUgcmVhZCBzdWNjZXNzZnVsbHk6Jywge1xuICAgICAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgICAgICBjb250ZW50TGVuZ3RoOiBjb250ZW50Lmxlbmd0aFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNhY2hlZE1ldGFkYXRhID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YTogRG9jdW1lbnRNZXRhZGF0YSA9IHt9O1xuXG4gICAgICAgICAgICBpZiAoY2FjaGVkTWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVkTWV0YWRhdGEudGFncykge1xuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YS50YWdzID0gY2FjaGVkTWV0YWRhdGEudGFncy5tYXAodGFnID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWc6IHRhZy50YWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogdGFnLnBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVkTWV0YWRhdGEuaGVhZGluZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGEuaGVhZGluZ3MgPSBjYWNoZWRNZXRhZGF0YS5oZWFkaW5ncy5tYXAoaGVhZGluZyA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGluZzogaGVhZGluZy5oZWFkaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IGhlYWRpbmcubGV2ZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogaGVhZGluZy5wb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlZE1ldGFkYXRhLmZyb250bWF0dGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhLmZyb250bWF0dGVyID0gY2FjaGVkTWV0YWRhdGEuZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBNZXRhZGF0YSBleHRyYWN0ZWQ6Jywge1xuICAgICAgICAgICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHRhZ3NDb3VudDogbWV0YWRhdGEudGFncz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRpbmdzQ291bnQ6IG1ldGFkYXRhLmhlYWRpbmdzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgaGFzRnJvbnRtYXR0ZXI6ICEhbWV0YWRhdGEuZnJvbnRtYXR0ZXJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgc3RhdCA9IGZpbGUuc3RhdDtcbiAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBhd2FpdCB0aGlzLmhhc2hTdHJpbmcoY29udGVudCk7XG4gICAgICAgICAgICBjb25zdCBtdGltZSA9IG5ldyBEYXRlKHN0YXQubXRpbWUpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgICAgICBjb25zdCBjbGllbnRJZCA9IGF3YWl0IGdldE9yQ3JlYXRlQ2xpZW50SWQoZmlsZSwgY29udGVudCwgdGhpcy5hcHApO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIEZpbGUgbWV0YWRhdGE6Jywge1xuICAgICAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgICAgICBjbGllbnRJZDogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgaGFzaDogaGFzaCxcbiAgICAgICAgICAgICAgICBtdGltZTogbXRpbWVcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBzeW5jRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgY2xpZW50SWQ6IGNsaWVudElkLFxuICAgICAgICAgICAgICAgIGNsaWVudFR5cGU6ICdvYnNpZGlhbicsXG4gICAgICAgICAgICAgICAgY29udGVudDogY29udGVudCxcbiAgICAgICAgICAgICAgICBoYXNoOiBoYXNoLFxuICAgICAgICAgICAgICAgIG10aW1lOiBtdGltZSxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YTogbWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb25cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc3luY01hbmFnZXIuc3luYyhzeW5jRGF0YSk7XG5cbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gXHUyNzEzIEZpbGUgc3luY2VkIHN1Y2Nlc3NmdWxseTonLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbTWFya2Rvd25CcmFpbl0gXHUyNzE3IEZpbGUgc3luYyBmYWlsZWQ6JywgZmlsZS5wYXRoLCByZXN1bHQuZXJyb3IpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NTQwQ1x1NkI2NVx1NTkzMVx1OEQyNTogJHtmaWxlLnBhdGh9XFxuJHtyZXN1bHQuZXJyb3J9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbTWFya2Rvd25CcmFpbl0gXHUyNzE3IEZpbGUgY2hhbmdlIGhhbmRsZXIgZXJyb3I6Jywge1xuICAgICAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IsXG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1NDBDXHU2QjY1XHU5NTE5XHU4QkVGOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgaGFuZGxlRmlsZURlbGV0ZShmaWxlOiBURmlsZSkge1xuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuYXV0b1N5bmMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gQXV0by1zeW5jIGRpc2FibGVkLCBza2lwcGluZyBkZWxldGU6JywgZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gRmlsZSBkZWxldGlvbiBkZXRlY3RlZDonLCB7XG4gICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICBleHRlbnNpb246IGZpbGUuZXh0ZW5zaW9uXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudElkID0gYXdhaXQgZ2V0T3JDcmVhdGVDbGllbnRJZChmaWxlLCBjb250ZW50LCB0aGlzLmFwcCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc3luY01hbmFnZXIuc3luYyh7XG4gICAgICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgICAgIGNsaWVudElkOiBjbGllbnRJZCxcbiAgICAgICAgICAgICAgICBjbGllbnRUeXBlOiAnb2JzaWRpYW4nLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogJ2RlbGV0ZSdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFx1MjcxMyBGaWxlIGRlbGV0aW9uIHN5bmNlZDonLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbTWFya2Rvd25CcmFpbl0gXHUyNzE3IEZpbGUgZGVsZXRpb24gc3luYyBmYWlsZWQ6JywgZmlsZS5wYXRoLCByZXN1bHQuZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdbTWFya2Rvd25CcmFpbl0gQ2Fubm90IHN5bmMgZmlsZSBkZWxldGlvbiAoZmlsZSBhbHJlYWR5IHJlbW92ZWQgb3IgbmV2ZXIgc3luY2VkKTonLCBmaWxlLnBhdGgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgaGFuZGxlRmlsZVJlbmFtZShmaWxlOiBURmlsZSwgb2xkUGF0aDogc3RyaW5nKSB7XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5hdXRvU3luYykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBBdXRvLXN5bmMgZGlzYWJsZWQsIHNraXBwaW5nIHJlbmFtZTonLCBvbGRQYXRoLCAnLT4nLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBGaWxlIHJlbmFtZSBkZXRlY3RlZDonLCB7XG4gICAgICAgICAgICBvbGRQYXRoOiBvbGRQYXRoLFxuICAgICAgICAgICAgbmV3UGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgZXh0ZW5zaW9uOiBmaWxlLmV4dGVuc2lvblxuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4IGZyb250bWF0dGVyIFVVSUQgXHU1NDBFXHVGRjBDXHU5MUNEXHU1NDdEXHU1NDBEXHU1M0Q4XHU1Rjk3XHU3QjgwXHU1MzU1XHVGRjFBXG4gICAgICAgICAgICAvLyBVVUlEIFx1NUI1OFx1NTBBOFx1NTcyOCBmcm9udG1hdHRlciBcdTRFMkRcdUZGMENcdTRFMERcdTk2OEZcdThERUZcdTVGODRcdTUzRDhcdTUzMTZcbiAgICAgICAgICAgIC8vIFx1NTNFQVx1OTcwMFx1NTNEMVx1OTAwMVx1NTM1NVx1NEUyQSBtb2RpZnkgXHU4QkY3XHU2QzQyXHU1MzczXHU1M0VGXHU2NkY0XHU2NUIwXHU4REVGXHU1Rjg0XG4gICAgICAgICAgICAvLyBcdTY3MERcdTUyQTFcdTdBRUZcdTc2ODQgT04gQ09ORkxJQ1QodmF1bHRfaWQsIGNsaWVudF9pZCkgRE8gVVBEQVRFIFNFVCBwYXRoIFx1NEYxQVx1NTkwNFx1NzQwNlx1OERFRlx1NUY4NFx1NjZGNFx1NjVCMFxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBTeW5jaW5nIHJlbmFtZSB3aXRoIGZyb250bWF0dGVyIFVVSUQnKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGVyZm9ybVN5bmMoZmlsZSwgJ21vZGlmeScpO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFx1MjcxMyBGaWxlIHJlbmFtZSBzeW5jZWQ6Jywgb2xkUGF0aCwgJy0+JywgZmlsZS5wYXRoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZG93bkJyYWluXSBcdTI3MTcgUmVuYW1lIHN5bmMgZXhjZXB0aW9uOicsIHtcbiAgICAgICAgICAgICAgICBvbGRQYXRoOiBvbGRQYXRoLFxuICAgICAgICAgICAgICAgIG5ld1BhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IsXG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdTkxQ0RcdTU0N0RcdTU0MERcdTU0MENcdTZCNjVcdTk1MTlcdThCRUY6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcdTUxNjhcdTkxQ0ZcdTU0MENcdTZCNjVcdTYyNDBcdTY3MDlcdTY1ODdcdTRFRjZcbiAgICAgKiBAZmxvdyBcdTY1MzZcdTk2QzYgSURzIFx1MjE5MiBcdTZFMDVcdTc0MDZcdTVCNjRcdTUxM0YgXHUyMTkyIFx1NTg5RVx1OTFDRlx1NTQwQ1x1NkI2NVxuICAgICAqIEBjb21wbGV4aXR5IE8obikgd2hlcmUgbiA9IFx1NjU4N1x1NEVGNlx1NjU3MFx1OTFDRlxuICAgICAqL1xuICAgIGFzeW5jIHN5bmNBbGxGaWxlcygpIHtcbiAgICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbTWFya2Rvd25CcmFpbl0gU3RhcnRpbmcgZnVsbCBzeW5jIGZvciAke2ZpbGVzLmxlbmd0aH0gZmlsZXNgKTtcbiAgICAgICAgbmV3IE5vdGljZShgXHU1RjAwXHU1OUNCXHU1MTY4XHU5MUNGXHU1NDBDXHU2QjY1ICR7ZmlsZXMubGVuZ3RofSBcdTRFMkFcdTY1ODdcdTRFRjYuLi5gKTtcblxuICAgICAgICAvLyBcdTZCNjVcdTlBQTQgMTogXHU2NTM2XHU5NkM2IGNsaWVudF9pZHNcbiAgICAgICAgY29uc3QgY2xpZW50SWRzID0gYXdhaXQgdGhpcy5jb2xsZWN0Q2xpZW50SWRzKGZpbGVzKTtcbiAgICAgICAgY29uc29sZS5sb2coYFtNYXJrZG93bkJyYWluXSBDb2xsZWN0ZWQgJHtjbGllbnRJZHMubGVuZ3RofSBjbGllbnQgSURzYCk7XG5cbiAgICAgICAgLy8gXHU2QjY1XHU5QUE0IDI6IFx1NkUwNVx1NzQwNlx1NUI2NFx1NTEzRlx1NjU4N1x1Njg2MyAoTygxKSBcdTUzNTVcdTZCMjFcdThCRjdcdTZDNDIpXG4gICAgICAgIGF3YWl0IHRoaXMuY2xlYW51cE9ycGhhbnMoY2xpZW50SWRzKTtcblxuICAgICAgICAvLyBcdTZCNjVcdTlBQTQgMzogXHU1ODlFXHU5MUNGXHU1NDBDXHU2QjY1XG4gICAgICAgIGF3YWl0IHRoaXMuaW5jcmVtZW50YWxTeW5jQmF0Y2goZmlsZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFx1NjUzNlx1OTZDNlx1NjI0MFx1NjcwOVx1NjU4N1x1NEVGNlx1NzY4NCBjbGllbnRfaWRzXG4gICAgICogQGNvbXBsZXhpdHkgTyhuKSB0aW1lLCBPKG4pIHNwYWNlXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBjb2xsZWN0Q2xpZW50SWRzKGZpbGVzOiBURmlsZVtdKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgICAgICBjb25zdCBpZHM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgICAgICAvLyBcdTUzRUFcdTUzMDVcdTU0MkJcdTk3NUVcdTdBN0FcdTY1ODdcdTRFRjZcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudD8udHJpbSgpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWRzLnB1c2goYXdhaXQgZ2V0T3JDcmVhdGVDbGllbnRJZChmaWxlLCBjb250ZW50LCB0aGlzLmFwcCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW01hcmtkb3duQnJhaW5dIEZhaWxlZCB0byByZWFkICR7ZmlsZS5wYXRofTpgLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlkcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcdTZFMDVcdTc0MDZcdTVCNjRcdTUxM0ZcdTY1ODdcdTY4NjNcbiAgICAgKiBAY29tcGxleGl0eSBPKDEpIC0gXHU1MzU1XHU2QjIxXHU3RjUxXHU3RURDXHU4QkY3XHU2QzQyXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBjbGVhbnVwT3JwaGFucyhjbGllbnRJZHM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnN5bmNNYW5hZ2VyLmZ1bGxTeW5jKGNsaWVudElkcyk7XG4gICAgICAgICAgICBjb25zdCBkZWxldGVkID0gcmVzdWx0LmRhdGE/LlsnZGVsZXRlZC1jb3VudCddIHx8IDA7XG5cbiAgICAgICAgICAgIGlmIChkZWxldGVkID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbTWFya2Rvd25CcmFpbl0gXHUyNzEzIENsZWFuZWQgJHtkZWxldGVkfSBvcnBoYW4gZG9jdW1lbnRzYCk7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHU2RTA1XHU3NDA2XHU0RTg2ICR7ZGVsZXRlZH0gXHU0RTJBXHU1QjY0XHU1MTNGXHU2NTg3XHU2ODYzYCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBcdTI3MTMgTm8gb3JwaGFuIGRvY3VtZW50cyBmb3VuZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gRnVsbC1zeW5jIFx1NTkzMVx1OEQyNVx1NEUwRFx1NEUyRFx1NjVBRFx1NkQ0MVx1N0EwQlxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW01hcmtkb3duQnJhaW5dIEZ1bGwgc3luYyBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcdTYyNzlcdTkxQ0ZcdTU4OUVcdTkxQ0ZcdTU0MENcdTZCNjVcbiAgICAgKiBAY29tcGxleGl0eSBPKG4pIHdpdGggYmF0Y2hpbmdcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGluY3JlbWVudGFsU3luY0JhdGNoKGZpbGVzOiBURmlsZVtdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRzOiBTeW5jU3RhdHMgPSB7IHN1Y2Nlc3M6IDAsIGZhaWxlZDogMCwgc2tpcHBlZDogMCB9O1xuICAgICAgICBjb25zdCBiYXRjaFNpemUgPSAxMDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgaSArPSBiYXRjaFNpemUpIHtcbiAgICAgICAgICAgIGNvbnN0IGJhdGNoID0gZmlsZXMuc2xpY2UoaSwgaSArIGJhdGNoU2l6ZSk7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChiYXRjaC5tYXAoZmlsZSA9PiB0aGlzLnN5bmNPbmVGaWxlKGZpbGUsIHN0YXRzKSkpO1xuXG4gICAgICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgubWluKGkgKyBiYXRjaFNpemUsIGZpbGVzLmxlbmd0aCk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdTU0MENcdTZCNjVcdThGREJcdTVFQTY6ICR7cHJvZ3Jlc3N9LyR7ZmlsZXMubGVuZ3RofSAoXHU2MjEwXHU1MjlGOiAke3N0YXRzLnN1Y2Nlc3N9LCBcdTU5MzFcdThEMjU6ICR7c3RhdHMuZmFpbGVkfSwgXHU4REYzXHU4RkM3OiAke3N0YXRzLnNraXBwZWR9KWApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmluYWxNc2cgPSBgXHU1NDBDXHU2QjY1XHU1QjhDXHU2MjEwISBcdTYwM0JcdThCQTE6ICR7ZmlsZXMubGVuZ3RofSwgXHU2MjEwXHU1MjlGOiAke3N0YXRzLnN1Y2Nlc3N9LCBcdTU5MzFcdThEMjU6ICR7c3RhdHMuZmFpbGVkfSwgXHU4REYzXHU4RkM3OiAke3N0YXRzLnNraXBwZWR9YDtcbiAgICAgICAgY29uc29sZS5sb2coYFtNYXJrZG93bkJyYWluXSAke2ZpbmFsTXNnfWApO1xuICAgICAgICBuZXcgTm90aWNlKGZpbmFsTXNnLCA4MDAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcdTU0MENcdTZCNjVcdTUzNTVcdTRFMkFcdTY1ODdcdTRFRjZcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIHN5bmNPbmVGaWxlKGZpbGU6IFRGaWxlLCBzdGF0czogU3luY1N0YXRzKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wZXJmb3JtU3luYyhmaWxlLCAnbW9kaWZ5Jyk7XG4gICAgICAgICAgICBzdGF0cy5zdWNjZXNzKys7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBzdGF0cy5mYWlsZWQrKztcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtNYXJrZG93bkJyYWluXSBcdTI3MTcgRmFpbGVkIHRvIHN5bmMgJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1ENSBcdTU0QzhcdTVFMENcdTUxRkRcdTY1NzBcdUZGMDhcdTc1MjhcdTRFOEVcdTY4QzBcdTZENEJcdTY1ODdcdTRFRjZcdTUxODVcdTVCQjlcdTUzRDhcdTUzMTZcdUZGMDlcbiAgICBhc3luYyBoYXNoU3RyaW5nKHN0cjogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgICAgICBjb25zdCBkYXRhID0gZW5jb2Rlci5lbmNvZGUoc3RyKTtcbiAgICAgICAgY29uc3QgaGFzaEJ1ZmZlciA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KCdNRDUnLCBkYXRhKS5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUMgTUQ1IFx1NEUwRFx1NTNFRlx1NzUyOFx1RkYwQ1x1OTY0RFx1N0VBN1x1NEY3Rlx1NzUyOCBTSEEtMjU2XG4gICAgICAgICAgICByZXR1cm4gY3J5cHRvLnN1YnRsZS5kaWdlc3QoJ1NIQS0yNTYnLCBkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGhhc2hBcnJheSA9IEFycmF5LmZyb20obmV3IFVpbnQ4QXJyYXkoaGFzaEJ1ZmZlcikpO1xuICAgICAgICByZXR1cm4gaGFzaEFycmF5Lm1hcChiID0+IGIudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJykpLmpvaW4oJycpO1xuICAgIH1cblxuICAgIG9udW5sb2FkKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnVW5sb2FkaW5nIE1hcmtkb3duQnJhaW4gcGx1Z2luJyk7XG4gICAgICAgIC8vIFx1NkUwNVx1NzQwNlx1NjI0MFx1NjcwOVx1OTYzMlx1NjI5Nlx1NUI5QVx1NjVGNlx1NTY2OFxuICAgICAgICBmb3IgKGNvbnN0IHRpbWVyIG9mIHRoaXMuc3luY0RlYm91bmNlVGltZXJzLnZhbHVlcygpKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3luY0RlYm91bmNlVGltZXJzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuc3luY01hbmFnZXIuZGVzdHJveSgpO1xuICAgIH1cblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTU0MENcdTZCNjVcdTdCQTFcdTc0MDZcdTU2NjhcdTkxNERcdTdGNkVcbiAgICAgICAgdGhpcy5zeW5jTWFuYWdlci51cGRhdGVDb25maWcoe1xuICAgICAgICAgICAgc2VydmVyVXJsOiB0aGlzLnNldHRpbmdzLnNlcnZlclVybCxcbiAgICAgICAgICAgIHN5bmNLZXk6IHRoaXMuc2V0dGluZ3Muc3luY0tleVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8vIFx1OEJCRVx1N0Y2RVx1OTc2Mlx1Njc3RlxuY2xhc3MgTWFya2Rvd25CcmFpblNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgICBwbHVnaW46IE1hcmtkb3duQnJhaW5QbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNYXJrZG93bkJyYWluUGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdNYXJrZG93bkJyYWluIFx1NTQwQ1x1NkI2NVx1OEJCRVx1N0Y2RScgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHU2NzBEXHU1MkExXHU1NjY4XHU1NzMwXHU1NzQwJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdNYXJrZG93bkJyYWluIFx1NjcwRFx1NTJBMVx1NTY2OCBBUEkgXHU1NzMwXHU1NzQwJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignaHR0cHM6Ly9hcGkubWFya2Rvd25icmFpbi5jb20nKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZXJ2ZXJVcmwpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZXJ2ZXJVcmwgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1N5bmMgS2V5JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdTRFQ0VcdTdCQTFcdTc0MDZcdTU0MEVcdTUzRjBcdTgzQjdcdTUzRDZcdTc2ODRcdTU0MENcdTZCNjVcdTVCQzZcdTk0QTUnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCd4eHh4eHh4eC14eHh4LXh4eHgteHh4eC14eHh4eHh4eHh4eHgnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeW5jS2V5KVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3luY0tleSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gXHU2RDRCXHU4QkQ1XHU4RkRFXHU2M0E1XHU2MzA5XHU5NEFFXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1NkQ0Qlx1OEJENVx1OEZERVx1NjNBNScpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU2RDRCXHU4QkQ1XHU0RTBFXHU2NzBEXHU1MkExXHU1NjY4XHU3Njg0XHU4RkRFXHU2M0E1XHVGRjA4MzBcdTc5RDJcdThEODVcdTY1RjZcdUZGMDknKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1x1NkQ0Qlx1OEJENScpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdTZENEJcdThCRDVcdTRFMkQuLi4nKTtcblxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTZCNjNcdTU3MjhcdTZENEJcdThCRDVcdThGREVcdTYzQTUuLi4nKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnBsdWdpbi5zeW5jTWFuYWdlci50ZXN0Q29ubmVjdGlvbigzMDAwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1NkQ0Qlx1OEJENScpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQudmF1bHRJbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcdTI3MDUgXHU4RkRFXHU2M0E1XHU2MjEwXHU1MjlGXHVGRjAxXFxuYCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYFZhdWx0OiAke3Jlc3VsdC52YXVsdEluZm8ubmFtZX1cXG5gICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgRG9tYWluOiAke3Jlc3VsdC52YXVsdEluZm8uZG9tYWlufWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgNTAwMFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1Mjc0QyBcdThGREVcdTYzQTVcdTU5MzFcdThEMjU6ICR7cmVzdWx0LmVycm9yIHx8ICdVbmtub3duIGVycm9yJ31gLCA1MDAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBcdTYyNzlcdTkxQ0ZcdTU0MENcdTZCNjVcdTYzMDlcdTk0QUVcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHU2Mjc5XHU5MUNGXHU1NDBDXHU2QjY1JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdTYyNEJcdTUyQThcdTU0MENcdTZCNjVcdTYyNDBcdTY3MDkgTWFya2Rvd24gXHU2NTg3XHU0RUY2XHU1MjMwXHU2NzBEXHU1MkExXHU1NjY4JylcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdcdTVGMDBcdTU5Q0JcdTU0MENcdTZCNjUnKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHU1NDBDXHU2QjY1XHU0RTJELi4uJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc3luY0FsbEZpbGVzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1NUYwMFx1NTlDQlx1NTQwQ1x1NkI2NScpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTgxRUFcdTUyQThcdTU0MENcdTZCNjUnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1NjU4N1x1NEVGNlx1NEZFRVx1NjUzOVx1NjVGNlx1ODFFQVx1NTJBOFx1NTQwQ1x1NkI2NVx1NTIzMFx1NjcwRFx1NTJBMVx1NTY2OCcpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1N5bmMpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvU3luYyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IFRGaWxlLCBBcHAsIHBhcnNlWWFtbCB9IGZyb20gJ29ic2lkaWFuJztcblxuLyoqXG4gKiBHZXQgb3IgY3JlYXRlIGEgY2xpZW50IElEIGZyb20gZnJvbnRtYXR0ZXIgdXNpbmcgT2JzaWRpYW4ncyBvZmZpY2lhbCBBUEkuXG4gKlxuICogVGhpcyBmdW5jdGlvbiB1c2VzIGBhcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyYCBmb3Igd3JpdGluZywgd2hpY2ggaXM6XG4gKiAtIEF0b21pYyAocHJldmVudHMgcmFjZSBjb25kaXRpb25zKVxuICogLSBTYWZlIChoYW5kbGVzIGNvbXBsZXggWUFNTCBjb3JyZWN0bHkpXG4gKiAtIENvbXBhdGlibGUgd2l0aCBPYnNpZGlhbidzIFwiUHJvcGVydGllc1wiIFVJXG4gKlxuICogRm9yIHJlYWRpbmcsIHdlIHVzZSB0aGUgbWV0YWRhdGFDYWNoZSBmb3IgZmFzdCBsb29rdXBzLCBmYWxsaW5nIGJhY2sgdG9cbiAqIHBhcnNlWWFtbCBmb3IgY2FzZXMgd2hlcmUgdGhlIGNhY2hlIGhhc24ndCB1cGRhdGVkIHlldC5cbiAqXG4gKiBAcGFyYW0gZmlsZSAtIFRoZSBmaWxlIHRvIGdldCBvciBjcmVhdGUgdGhlIGNsaWVudCBJRCBmb3JcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIGN1cnJlbnQgY29udGVudCBvZiB0aGUgZmlsZSAodXNlZCBhcyBmYWxsYmFjaylcbiAqIEBwYXJhbSBhcHAgLSBUaGUgT2JzaWRpYW4gYXBwIGluc3RhbmNlXG4gKiBAcmV0dXJucyBUaGUgY2xpZW50IElEIChleGlzdGluZyBvciBuZXdseSBjcmVhdGVkKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T3JDcmVhdGVDbGllbnRJZChcbiAgZmlsZTogVEZpbGUsXG4gIGNvbnRlbnQ6IHN0cmluZyxcbiAgYXBwOiBBcHBcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIC8vIFN0ZXAgMTogVHJ5IHRvIHJlYWQgZXhpc3RpbmcgbWFya2Rvd25icmFpbi1pZCBmcm9tIG1ldGFkYXRhQ2FjaGUgKGZhc3Rlc3QpXG4gIGNvbnN0IGNhY2hlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICBpZiAoY2FjaGU/LmZyb250bWF0dGVyPy5bJ21hcmtkb3duYnJhaW4taWQnXSkge1xuICAgIHJldHVybiBTdHJpbmcoY2FjaGUuZnJvbnRtYXR0ZXJbJ21hcmtkb3duYnJhaW4taWQnXSkudHJpbSgpO1xuICB9XG5cbiAgLy8gU3RlcCAyOiBDYWNoZSBtaWdodCBub3QgYmUgdXBkYXRlZCB5ZXQsIHRyeSBwYXJzaW5nIGRpcmVjdGx5XG4gIC8vIFRoaXMgaGFuZGxlcyB0aGUgY2FzZSB3aGVyZSB3ZSBqdXN0IHdyb3RlIHRvIHRoZSBmaWxlXG4gIGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gIGNvbnN0IGxhdGVzdENvbnRlbnQgPSBmaWxlQ29udGVudCB8fCBjb250ZW50O1xuXG4gIGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBsYXRlc3RDb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XG4gIGlmIChmcm9udG1hdHRlck1hdGNoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZyb250bWF0dGVyID0gcGFyc2VZYW1sKGZyb250bWF0dGVyTWF0Y2hbMV0pO1xuICAgICAgaWYgKGZyb250bWF0dGVyPy5bJ21hcmtkb3duYnJhaW4taWQnXSkge1xuICAgICAgICByZXR1cm4gU3RyaW5nKGZyb250bWF0dGVyWydtYXJrZG93bmJyYWluLWlkJ10pLnRyaW0oKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIFlBTUwgcGFyc2UgZXJyb3IsIHdpbGwgZ2VuZXJhdGUgbmV3IElEXG4gICAgfVxuICB9XG5cbiAgLy8gU3RlcCAzOiBObyBleGlzdGluZyBJRCwgZ2VuZXJhdGUgYSBuZXcgb25lIGFuZCB3cml0ZSBpdCB1c2luZyBwcm9jZXNzRnJvbnRNYXR0ZXJcbiAgY29uc3QgbmV3SWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuXG4gIGF3YWl0IGFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgKGZyb250bWF0dGVyKSA9PiB7XG4gICAgZnJvbnRtYXR0ZXJbJ21hcmtkb3duYnJhaW4taWQnXSA9IG5ld0lkO1xuICB9KTtcblxuICByZXR1cm4gbmV3SWQ7XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG1CQUFrRzs7O0FDQWxHLHNCQUFzQztBQWtCdEMsZUFBc0Isb0JBQ3BCLE1BQ0EsU0FDQSxLQUNpQjtBQXRCbkI7QUF3QkUsUUFBTSxRQUFRLElBQUksY0FBYyxhQUFhLElBQUk7QUFDakQsT0FBSSxvQ0FBTyxnQkFBUCxtQkFBcUIscUJBQXFCO0FBQzVDLFdBQU8sT0FBTyxNQUFNLFlBQVksa0JBQWtCLENBQUMsRUFBRSxLQUFLO0FBQUEsRUFDNUQ7QUFJQSxRQUFNLGNBQWMsTUFBTSxJQUFJLE1BQU0sS0FBSyxJQUFJO0FBQzdDLFFBQU0sZ0JBQWdCLGVBQWU7QUFFckMsUUFBTSxtQkFBbUIsY0FBYyxNQUFNLHVCQUF1QjtBQUNwRSxNQUFJLGtCQUFrQjtBQUNwQixRQUFJO0FBQ0YsWUFBTSxrQkFBYywyQkFBVSxpQkFBaUIsQ0FBQyxDQUFDO0FBQ2pELFVBQUksMkNBQWMscUJBQXFCO0FBQ3JDLGVBQU8sT0FBTyxZQUFZLGtCQUFrQixDQUFDLEVBQUUsS0FBSztBQUFBLE1BQ3REO0FBQUEsSUFDRixTQUFRO0FBQUEsSUFFUjtBQUFBLEVBQ0Y7QUFHQSxRQUFNLFFBQVEsT0FBTyxXQUFXO0FBRWhDLFFBQU0sSUFBSSxZQUFZ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
