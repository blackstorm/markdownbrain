/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MarkdownBrainPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  serverUrl: "https://api.markdownbrain.com",
  syncKey: "",
  autoSync: true
};
var SyncManager = class {
  constructor(config) {
    this.config = config;
  }
  updateConfig(config) {
    this.config = config;
  }
  async testConnection(timeout = 3e4) {
    try {
      const controller = new AbortController();
      const timeoutId = setTimeout(() => controller.abort(), timeout);
      const response = await (0, import_obsidian.requestUrl)({
        url: `${this.config.serverUrl}/obsidian/vault/info`,
        method: "GET",
        headers: {
          "Authorization": `Bearer ${this.config.syncKey}`
        },
        throw: false
      });
      clearTimeout(timeoutId);
      if (response.status === 200) {
        const data = response.json;
        return {
          success: true,
          vaultInfo: data.vault
        };
      } else {
        return {
          success: false,
          error: `HTTP ${response.status}: ${response.text || "Unknown error"}`
        };
      }
    } catch (error) {
      if ((error == null ? void 0 : error.name) === "AbortError") {
        return {
          success: false,
          error: "\u8FDE\u63A5\u8D85\u65F6\uFF0830\u79D2\uFF09"
        };
      }
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error"
      };
    }
  }
  async sync(data) {
    var _a, _b;
    console.log("[MarkdownBrain] Starting sync:", {
      path: data.path,
      action: data.action,
      hasContent: !!data.content,
      contentLength: (_a = data.content) == null ? void 0 : _a.length,
      serverUrl: this.config.serverUrl,
      hasSyncKey: !!this.config.syncKey
    });
    try {
      const requestBody = JSON.stringify(data);
      console.log("[MarkdownBrain] Request body size:", requestBody.length, "bytes");
      const response = await (0, import_obsidian.requestUrl)({
        url: `${this.config.serverUrl}/obsidian/sync`,
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${this.config.syncKey}`
        },
        body: requestBody,
        throw: false
      });
      console.log("[MarkdownBrain] Response:", {
        status: response.status,
        statusText: response.status,
        headers: response.headers,
        bodyPreview: (_b = response.text) == null ? void 0 : _b.substring(0, 200)
      });
      if (response.status === 200) {
        console.log("[MarkdownBrain] \u2713 Sync successful:", data.path);
        return { success: true };
      } else {
        const errorMsg = `HTTP ${response.status}: ${response.text || "Sync failed"}`;
        console.error("[MarkdownBrain] \u2717 Sync failed:", {
          path: data.path,
          status: response.status,
          error: errorMsg,
          responseBody: response.text
        });
        return {
          success: false,
          error: errorMsg
        };
      }
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 Sync exception:", {
        path: data.path,
        error,
        errorMessage: error instanceof Error ? error.message : "Unknown error",
        errorStack: error instanceof Error ? error.stack : void 0
      });
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error"
      };
    }
  }
  destroy() {
  }
};
var MarkdownBrainPlugin = class extends import_obsidian.Plugin {
  // 跟踪待同步的文件
  constructor(app, manifest) {
    super(app, manifest);
    this.syncDebounceTimers = /* @__PURE__ */ new Map();
    this.pendingSyncs = /* @__PURE__ */ new Set();
  }
  // 生成客户端 ID（基于路径的 SHA-256 hash）
  async generateClientId(path) {
    const encoder = new TextEncoder();
    const data = encoder.encode(path);
    const hashBuffer = await crypto.subtle.digest("SHA-256", data);
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    const hashHex = hashArray.map((b) => b.toString(16).padStart(2, "0")).join("");
    return `${hashHex.substring(0, 8)}-${hashHex.substring(8, 12)}-${hashHex.substring(12, 16)}-${hashHex.substring(16, 20)}-${hashHex.substring(20, 32)}`;
  }
  // 标准化 Obsidian 链接路径
  normalizeLinkPath(link) {
    let path = link.split("#")[0].split("^")[0];
    if (!path.includes(".")) {
      path = path + ".md";
    }
    return path;
  }
  // 判断是否是媒体文件
  isMediaFile(path) {
    const mediaExtensions = [
      // 图片
      ".png",
      ".jpg",
      ".jpeg",
      ".gif",
      ".bmp",
      ".svg",
      ".webp",
      // 视频
      ".mp4",
      ".webm",
      ".ogv",
      ".mov",
      ".mkv",
      // 音频
      ".mp3",
      ".wav",
      ".m4a",
      ".ogg",
      ".3gp",
      ".flac",
      // 其他
      ".pdf"
    ];
    const ext = path.substring(path.lastIndexOf(".")).toLowerCase();
    return mediaExtensions.includes(ext);
  }
  // 获取媒体文件类型
  getMediaType(path) {
    const ext = path.substring(path.lastIndexOf(".")).toLowerCase();
    const imageExts = [".png", ".jpg", ".jpeg", ".gif", ".bmp", ".svg", ".webp"];
    const videoExts = [".mp4", ".webm", ".ogv", ".mov", ".mkv"];
    const audioExts = [".mp3", ".wav", ".m4a", ".ogg", ".3gp", ".flac"];
    if (imageExts.includes(ext)) return "image";
    if (videoExts.includes(ext)) return "video";
    if (audioExts.includes(ext)) return "audio";
    if (ext === ".pdf") return "pdf";
    return "other";
  }
  async onload() {
    var _a;
    console.log("[MarkdownBrain] ========================================");
    console.log("[MarkdownBrain] Plugin loading...");
    await this.loadSettings();
    console.log("[MarkdownBrain] Settings loaded:", {
      serverUrl: this.settings.serverUrl,
      hasSyncKey: !!this.settings.syncKey,
      syncKeyLength: (_a = this.settings.syncKey) == null ? void 0 : _a.length,
      autoSync: this.settings.autoSync
    });
    this.syncManager = new SyncManager({
      serverUrl: this.settings.serverUrl,
      syncKey: this.settings.syncKey
    });
    console.log("[MarkdownBrain] SyncManager initialized");
    this.registerEvent(
      this.app.vault.on("create", (file) => {
        if (file instanceof import_obsidian.TFile && file.extension === "md") {
          this.handleFileChange(file, "create");
        }
      })
    );
    console.log("[MarkdownBrain] Registered event: file create");
    this.registerEvent(
      this.app.vault.on("modify", (file) => {
        if (file instanceof import_obsidian.TFile && file.extension === "md") {
          this.pendingSyncs.add(file.path);
        }
      })
    );
    console.log("[MarkdownBrain] Registered event: file modify");
    this.registerEvent(
      this.app.metadataCache.on("resolved", () => {
        for (const filePath of this.pendingSyncs) {
          const file = this.app.vault.getAbstractFileByPath(filePath);
          if (file instanceof import_obsidian.TFile) {
            this.handleFileChange(file, "modify");
          }
        }
        this.pendingSyncs.clear();
      })
    );
    console.log("[MarkdownBrain] Registered event: metadata resolved");
    this.registerEvent(
      this.app.vault.on("delete", (file) => {
        if (file instanceof import_obsidian.TFile && file.extension === "md") {
          this.handleFileDelete(file);
        }
      })
    );
    console.log("[MarkdownBrain] Registered event: file delete");
    this.addSettingTab(new MarkdownBrainSettingTab(this.app, this));
    console.log("[MarkdownBrain] Settings tab added");
    this.addCommand({
      id: "sync-current-file",
      name: "Sync current file",
      callback: () => {
        const file = this.app.workspace.getActiveFile();
        if (file) {
          this.handleFileChange(file, "modify");
        }
      }
    });
    this.addCommand({
      id: "sync-all-files",
      name: "Sync all files",
      callback: () => {
        this.syncAllFiles();
      }
    });
    console.log("[MarkdownBrain] Commands registered");
    console.log("[MarkdownBrain] \u2713 Plugin loaded successfully");
    console.log("[MarkdownBrain] ========================================");
  }
  async handleFileChange(file, action) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping:", file.path);
      return;
    }
    const existingTimer = this.syncDebounceTimers.get(file.path);
    if (existingTimer) {
      clearTimeout(existingTimer);
    }
    const timer = setTimeout(async () => {
      this.syncDebounceTimers.delete(file.path);
      await this.performSync(file, action);
    }, 300);
    this.syncDebounceTimers.set(file.path, timer);
  }
  async performSync(file, action) {
    var _a, _b, _c, _d;
    console.log("[MarkdownBrain] File change detected:", {
      path: file.path,
      action,
      extension: file.extension,
      size: file.stat.size
    });
    try {
      const content = await this.app.vault.read(file);
      console.log("[MarkdownBrain] File read successfully:", {
        path: file.path,
        contentLength: content.length
      });
      if (!content || content.trim().length === 0) {
        console.log("[MarkdownBrain] Skipping empty file:", file.path);
        return;
      }
      if (file.path.includes("\u672A\u547D\u540D") && content.trim().length === 0) {
        console.log("[MarkdownBrain] Skipping untitled empty file:", file.path);
        return;
      }
      const cachedMetadata = this.app.metadataCache.getFileCache(file);
      const metadata = {};
      console.log("[MarkdownBrain] Raw cached metadata:", cachedMetadata);
      if (cachedMetadata) {
        const allLinks = [];
        if (cachedMetadata.links) {
          console.log("[MarkdownBrain] Found", cachedMetadata.links.length, "links in metadata");
          for (const link of cachedMetadata.links) {
            console.log("[MarkdownBrain] Processing link:", link);
            const normalizedPath = this.normalizeLinkPath(link.link);
            console.log("[MarkdownBrain] Normalized path:", normalizedPath);
            const targetClientId = await this.generateClientId(normalizedPath);
            console.log("[MarkdownBrain] Generated targetClientId:", targetClientId);
            const isMedia = this.isMediaFile(normalizedPath);
            const linkData = {
              link: normalizedPath,
              targetClientId,
              original: link.original,
              displayText: link.displayText,
              linkType: "link"
            };
            if (isMedia) {
              linkData.isMedia = true;
              linkData.mediaType = this.getMediaType(normalizedPath);
              console.log("[MarkdownBrain] Media file detected:", linkData.mediaType);
            }
            allLinks.push(linkData);
          }
        }
        if (cachedMetadata.embeds) {
          console.log("[MarkdownBrain] Found", cachedMetadata.embeds.length, "embeds in metadata");
          for (const embed of cachedMetadata.embeds) {
            console.log("[MarkdownBrain] Processing embed:", embed);
            const normalizedPath = this.normalizeLinkPath(embed.link);
            console.log("[MarkdownBrain] Normalized path:", normalizedPath);
            const targetClientId = await this.generateClientId(normalizedPath);
            console.log("[MarkdownBrain] Generated targetClientId:", targetClientId);
            const isMedia = this.isMediaFile(normalizedPath);
            const linkData = {
              link: normalizedPath,
              targetClientId,
              original: embed.original,
              linkType: "embed"
            };
            if (isMedia) {
              linkData.isMedia = true;
              linkData.mediaType = this.getMediaType(normalizedPath);
              console.log("[MarkdownBrain] Media file detected:", linkData.mediaType);
            }
            allLinks.push(linkData);
          }
        }
        if (allLinks.length > 0) {
          metadata.links = allLinks;
          console.log("[MarkdownBrain] Total links to sync:", allLinks.length);
          console.log("[MarkdownBrain] Links data:", JSON.stringify(allLinks, null, 2));
        } else {
          console.log("[MarkdownBrain] No links found in this document");
        }
        if (cachedMetadata.tags) {
          metadata.tags = cachedMetadata.tags.map((tag) => ({
            tag: tag.tag,
            position: tag.position
          }));
        }
        if (cachedMetadata.headings) {
          metadata.headings = cachedMetadata.headings.map((heading) => ({
            heading: heading.heading,
            level: heading.level,
            position: heading.position
          }));
        }
        if (cachedMetadata.frontmatter) {
          metadata.frontmatter = cachedMetadata.frontmatter;
        }
        console.log("[MarkdownBrain] Metadata extracted:", {
          path: file.path,
          linksCount: ((_a = metadata.links) == null ? void 0 : _a.length) || 0,
          tagsCount: ((_b = metadata.tags) == null ? void 0 : _b.length) || 0,
          headingsCount: ((_c = metadata.headings) == null ? void 0 : _c.length) || 0,
          hasFrontmatter: !!metadata.frontmatter
        });
      }
      const stat = file.stat;
      const hash = await this.hashString(content);
      const mtime = new Date(stat.mtime).toISOString();
      const clientId = await this.generateClientId(file.path);
      console.log("[MarkdownBrain] File metadata:", {
        path: file.path,
        clientId,
        hash,
        mtime,
        hasMetadata: !!metadata,
        linksCount: ((_d = metadata.links) == null ? void 0 : _d.length) || 0
      });
      const syncData = {
        path: file.path,
        clientId,
        clientType: "obsidian",
        content,
        hash,
        mtime,
        metadata,
        action
      };
      console.log("[MarkdownBrain] Sync data prepared:");
      console.log("[MarkdownBrain] - Path:", syncData.path);
      console.log("[MarkdownBrain] - ClientId:", syncData.clientId);
      console.log("[MarkdownBrain] - Action:", syncData.action);
      console.log("[MarkdownBrain] - Metadata:", JSON.stringify(syncData.metadata, null, 2));
      const result = await this.syncManager.sync(syncData);
      if (result.success) {
        console.log("[MarkdownBrain] \u2713 File synced successfully:", file.path);
      } else {
        console.error("[MarkdownBrain] \u2717 File sync failed:", file.path, result.error);
        new import_obsidian.Notice(`\u540C\u6B65\u5931\u8D25: ${file.path}
${result.error}`);
      }
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 File change handler error:", {
        path: file.path,
        error,
        errorMessage: error instanceof Error ? error.message : "Unknown error",
        errorStack: error instanceof Error ? error.stack : void 0
      });
      new import_obsidian.Notice(`\u540C\u6B65\u9519\u8BEF: ${error instanceof Error ? error.message : "Unknown error"}`);
    }
  }
  async handleFileDelete(file) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping delete:", file.path);
      return;
    }
    console.log("[MarkdownBrain] File deletion detected:", {
      path: file.path,
      extension: file.extension
    });
    try {
      const clientId = await this.generateClientId(file.path);
      const result = await this.syncManager.sync({
        path: file.path,
        clientId,
        clientType: "obsidian",
        action: "delete"
      });
      if (result.success) {
        console.log("[MarkdownBrain] \u2713 File deletion synced:", file.path);
      } else {
        console.error("[MarkdownBrain] \u2717 File deletion sync failed:", file.path, result.error);
      }
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 Delete sync exception:", {
        path: file.path,
        error,
        errorMessage: error instanceof Error ? error.message : "Unknown error"
      });
    }
  }
  async syncAllFiles() {
    const files = this.app.vault.getMarkdownFiles();
    console.log(`[MarkdownBrain] Starting batch sync for ${files.length} files`);
    new import_obsidian.Notice(`\u5F00\u59CB\u6279\u91CF\u540C\u6B65 ${files.length} \u4E2A\u6587\u4EF6...`);
    let success = 0;
    let failed = 0;
    let skipped = 0;
    const batchSize = 10;
    for (let i = 0; i < files.length; i += batchSize) {
      const batch = files.slice(i, i + batchSize);
      const batchPromises = batch.map(async (file) => {
        try {
          const content = await this.app.vault.read(file);
          if (!content || content.trim().length === 0) {
            console.log(`[MarkdownBrain] Skipping empty file: ${file.path}`);
            skipped++;
            return;
          }
          await this.performSync(file, "modify");
          success++;
          console.log(`[MarkdownBrain] \u2713 Synced (${success + failed + skipped}/${files.length}): ${file.path}`);
        } catch (error) {
          failed++;
          console.error(`[MarkdownBrain] \u2717 Failed to sync ${file.path}:`, error);
        }
      });
      await Promise.all(batchPromises);
      const progress = Math.min(i + batchSize, files.length);
      new import_obsidian.Notice(`\u540C\u6B65\u8FDB\u5EA6: ${progress}/${files.length} (\u6210\u529F: ${success}, \u5931\u8D25: ${failed}, \u8DF3\u8FC7: ${skipped})`);
    }
    const finalMsg = `\u540C\u6B65\u5B8C\u6210! \u603B\u8BA1: ${files.length}, \u6210\u529F: ${success}, \u5931\u8D25: ${failed}, \u8DF3\u8FC7: ${skipped}`;
    console.log(`[MarkdownBrain] ${finalMsg}`);
    new import_obsidian.Notice(finalMsg, 8e3);
  }
  // MD5 哈希函数（用于检测文件内容变化）
  async hashString(str) {
    const encoder = new TextEncoder();
    const data = encoder.encode(str);
    const hashBuffer = await crypto.subtle.digest("MD5", data).catch(() => {
      return crypto.subtle.digest("SHA-256", data);
    });
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    return hashArray.map((b) => b.toString(16).padStart(2, "0")).join("");
  }
  onunload() {
    console.log("Unloading MarkdownBrain plugin");
    for (const timer of this.syncDebounceTimers.values()) {
      clearTimeout(timer);
    }
    this.syncDebounceTimers.clear();
    this.syncManager.destroy();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.syncManager.updateConfig({
      serverUrl: this.settings.serverUrl,
      syncKey: this.settings.syncKey
    });
  }
};
var MarkdownBrainSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "MarkdownBrain \u540C\u6B65\u8BBE\u7F6E" });
    new import_obsidian.Setting(containerEl).setName("\u670D\u52A1\u5668\u5730\u5740").setDesc("MarkdownBrain \u670D\u52A1\u5668 API \u5730\u5740").addText((text) => text.setPlaceholder("https://api.markdownbrain.com").setValue(this.plugin.settings.serverUrl).onChange(async (value) => {
      this.plugin.settings.serverUrl = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Sync Key").setDesc("\u4ECE\u7BA1\u7406\u540E\u53F0\u83B7\u53D6\u7684\u540C\u6B65\u5BC6\u94A5").addText((text) => text.setPlaceholder("xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx").setValue(this.plugin.settings.syncKey).onChange(async (value) => {
      this.plugin.settings.syncKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("\u6D4B\u8BD5\u8FDE\u63A5").setDesc("\u6D4B\u8BD5\u4E0E\u670D\u52A1\u5668\u7684\u8FDE\u63A5\uFF0830\u79D2\u8D85\u65F6\uFF09").addButton((button) => button.setButtonText("\u6D4B\u8BD5").onClick(async () => {
      button.setDisabled(true);
      button.setButtonText("\u6D4B\u8BD5\u4E2D...");
      new import_obsidian.Notice("\u6B63\u5728\u6D4B\u8BD5\u8FDE\u63A5...");
      const result = await this.plugin.syncManager.testConnection(3e4);
      button.setDisabled(false);
      button.setButtonText("\u6D4B\u8BD5");
      if (result.success && result.vaultInfo) {
        new import_obsidian.Notice(
          `\u2705 \u8FDE\u63A5\u6210\u529F\uFF01
Vault: ${result.vaultInfo.name}
Domain: ${result.vaultInfo.domain}`,
          5e3
        );
      } else {
        new import_obsidian.Notice(`\u274C \u8FDE\u63A5\u5931\u8D25: ${result.error || "Unknown error"}`, 5e3);
      }
    }));
    new import_obsidian.Setting(containerEl).setName("\u6279\u91CF\u540C\u6B65").setDesc("\u624B\u52A8\u540C\u6B65\u6240\u6709 Markdown \u6587\u4EF6\u5230\u670D\u52A1\u5668").addButton((button) => button.setButtonText("\u5F00\u59CB\u540C\u6B65").onClick(async () => {
      button.setDisabled(true);
      button.setButtonText("\u540C\u6B65\u4E2D...");
      await this.plugin.syncAllFiles();
      button.setDisabled(false);
      button.setButtonText("\u5F00\u59CB\u540C\u6B65");
    }));
    new import_obsidian.Setting(containerEl).setName("\u81EA\u52A8\u540C\u6B65").setDesc("\u6587\u4EF6\u4FEE\u6539\u65F6\u81EA\u52A8\u540C\u6B65\u5230\u670D\u52A1\u5668").addToggle((toggle) => toggle.setValue(this.plugin.settings.autoSync).onChange(async (value) => {
      this.plugin.settings.autoSync = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vLi4vLi4vb2JzaWRpYW4tcGx1Z2luL21haW4udHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IFBsdWdpbiwgVEZpbGUsIE5vdGljZSwgUGx1Z2luU2V0dGluZ1RhYiwgQXBwLCBTZXR0aW5nLCByZXF1ZXN0VXJsIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5pbnRlcmZhY2UgTWFya2Rvd25CcmFpblNldHRpbmdzIHtcbiAgICBzZXJ2ZXJVcmw6IHN0cmluZztcbiAgICBzeW5jS2V5OiBzdHJpbmc7XG4gICAgYXV0b1N5bmM6IGJvb2xlYW47XG59XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE1hcmtkb3duQnJhaW5TZXR0aW5ncyA9IHtcbiAgICBzZXJ2ZXJVcmw6ICdodHRwczovL2FwaS5tYXJrZG93bmJyYWluLmNvbScsXG4gICAgc3luY0tleTogJycsXG4gICAgYXV0b1N5bmM6IHRydWVcbn07XG5cbi8vIFx1NTQwQ1x1NkI2NVx1OTE0RFx1N0Y2RVxuaW50ZXJmYWNlIFN5bmNDb25maWcge1xuICAgIHNlcnZlclVybDogc3RyaW5nO1xuICAgIHN5bmNLZXk6IHN0cmluZztcbn1cblxuLy8gXHU2NTg3XHU2ODYzXHU1MTQzXHU2NTcwXHU2MzZFXG5pbnRlcmZhY2UgRG9jdW1lbnRNZXRhZGF0YSB7XG4gICAgbGlua3M/OiBBcnJheTx7XG4gICAgICAgIGxpbms6IHN0cmluZzsgICAgICAgICAgICAgIC8vIFx1OTRGRVx1NjNBNVx1NzZFRVx1NjgwN1x1OERFRlx1NUY4NFxuICAgICAgICB0YXJnZXRDbGllbnRJZDogc3RyaW5nOyAgICAvLyBcdTc2RUVcdTY4MDdcdTY1ODdcdTY4NjNcdTc2ODQgY2xpZW50X2lkXG4gICAgICAgIG9yaWdpbmFsOiBzdHJpbmc7ICAgICAgICAgIC8vIFx1NTM5Rlx1NTlDQlx1NjU4N1x1NjcyQ1xuICAgICAgICBkaXNwbGF5VGV4dD86IHN0cmluZzsgICAgICAvLyBcdTY2M0VcdTc5M0FcdTY1ODdcdTY3MkNcbiAgICAgICAgbGlua1R5cGU6ICdsaW5rJyB8ICdlbWJlZCc7IC8vIFx1OTRGRVx1NjNBNVx1N0M3Qlx1NTc4QlxuICAgICAgICBpc01lZGlhPzogYm9vbGVhbjsgICAgICAgICAvLyBcdTY2MkZcdTU0MjZcdTY2MkZcdTVBOTJcdTRGNTNcdTY1ODdcdTRFRjZcbiAgICAgICAgbWVkaWFUeXBlPzogJ2ltYWdlJyB8ICd2aWRlbycgfCAnYXVkaW8nIHwgJ3BkZicgfCAnb3RoZXInOyAvLyBcdTVBOTJcdTRGNTNcdTdDN0JcdTU3OEJcbiAgICB9PjtcbiAgICB0YWdzPzogQXJyYXk8e1xuICAgICAgICB0YWc6IHN0cmluZztcbiAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICAgIHN0YXJ0OiB7IGxpbmU6IG51bWJlcjsgY29sOiBudW1iZXI7IG9mZnNldDogbnVtYmVyIH07XG4gICAgICAgICAgICBlbmQ6IHsgbGluZTogbnVtYmVyOyBjb2w6IG51bWJlcjsgb2Zmc2V0OiBudW1iZXIgfTtcbiAgICAgICAgfTtcbiAgICB9PjtcbiAgICBoZWFkaW5ncz86IEFycmF5PHtcbiAgICAgICAgaGVhZGluZzogc3RyaW5nO1xuICAgICAgICBsZXZlbDogbnVtYmVyO1xuICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgICAgc3RhcnQ6IHsgbGluZTogbnVtYmVyOyBjb2w6IG51bWJlcjsgb2Zmc2V0OiBudW1iZXIgfTtcbiAgICAgICAgICAgIGVuZDogeyBsaW5lOiBudW1iZXI7IGNvbDogbnVtYmVyOyBvZmZzZXQ6IG51bWJlciB9O1xuICAgICAgICB9O1xuICAgIH0+O1xuICAgIGZyb250bWF0dGVyPzogUmVjb3JkPHN0cmluZywgYW55Pjtcbn1cblxuLy8gXHU1NDBDXHU2QjY1XHU2NTcwXHU2MzZFXG5pbnRlcmZhY2UgU3luY0RhdGEge1xuICAgIHBhdGg6IHN0cmluZztcbiAgICBjbGllbnRJZDogc3RyaW5nOyAgICAgICAgICAgLy8gXHU1QkEyXHU2MjM3XHU3QUVGXHU3NTFGXHU2MjEwXHU3Njg0XHU1NTJGXHU0RTAwIElEXG4gICAgY2xpZW50VHlwZTogc3RyaW5nOyAgICAgICAgIC8vIFx1NUJBMlx1NjIzN1x1N0FFRlx1N0M3Qlx1NTc4Qlx1RkYxQSdvYnNpZGlhbidcbiAgICBjb250ZW50Pzogc3RyaW5nO1xuICAgIGhhc2g/OiBzdHJpbmc7XG4gICAgbXRpbWU/OiBzdHJpbmc7XG4gICAgbWV0YWRhdGE/OiBEb2N1bWVudE1ldGFkYXRhO1xuICAgIGFjdGlvbjogJ2NyZWF0ZScgfCAnbW9kaWZ5JyB8ICdkZWxldGUnO1xufVxuXG4vLyBWYXVsdCBcdTRGRTFcdTYwNkZcbmludGVyZmFjZSBWYXVsdEluZm8ge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGRvbWFpbjogc3RyaW5nO1xuICAgICdjcmVhdGVkLWF0Jzogc3RyaW5nO1xufVxuXG4vLyBcdTU0MENcdTZCNjVcdTdCQTFcdTc0MDZcdTU2NjhcbmNsYXNzIFN5bmNNYW5hZ2VyIHtcbiAgICBwcml2YXRlIGNvbmZpZzogU3luY0NvbmZpZztcblxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZzogU3luY0NvbmZpZykge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB9XG5cbiAgICB1cGRhdGVDb25maWcoY29uZmlnOiBTeW5jQ29uZmlnKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIH1cblxuICAgIGFzeW5jIHRlc3RDb25uZWN0aW9uKHRpbWVvdXQ6IG51bWJlciA9IDMwMDAwKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IHZhdWx0SW5mbz86IFZhdWx0SW5mbzsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCB0aW1lb3V0KTtcblxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgICAgICB1cmw6IGAke3RoaXMuY29uZmlnLnNlcnZlclVybH0vb2JzaWRpYW4vdmF1bHQvaW5mb2AsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuY29uZmlnLnN5bmNLZXl9YFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdGhyb3c6IGZhbHNlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5qc29uO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhdWx0SW5mbzogZGF0YS52YXVsdFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnRleHQgfHwgJ1Vua25vd24gZXJyb3InfWBcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgICAgICBpZiAoZXJyb3I/Lm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ1x1OEZERVx1NjNBNVx1OEQ4NVx1NjVGNlx1RkYwODMwXHU3OUQyXHVGRjA5J1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHN5bmMoZGF0YTogU3luY0RhdGEpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFN0YXJ0aW5nIHN5bmM6Jywge1xuICAgICAgICAgICAgcGF0aDogZGF0YS5wYXRoLFxuICAgICAgICAgICAgYWN0aW9uOiBkYXRhLmFjdGlvbixcbiAgICAgICAgICAgIGhhc0NvbnRlbnQ6ICEhZGF0YS5jb250ZW50LFxuICAgICAgICAgICAgY29udGVudExlbmd0aDogZGF0YS5jb250ZW50Py5sZW5ndGgsXG4gICAgICAgICAgICBzZXJ2ZXJVcmw6IHRoaXMuY29uZmlnLnNlcnZlclVybCxcbiAgICAgICAgICAgIGhhc1N5bmNLZXk6ICEhdGhpcy5jb25maWcuc3luY0tleVxuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEJvZHkgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gUmVxdWVzdCBib2R5IHNpemU6JywgcmVxdWVzdEJvZHkubGVuZ3RoLCAnYnl0ZXMnKTtcblxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgICAgICB1cmw6IGAke3RoaXMuY29uZmlnLnNlcnZlclVybH0vb2JzaWRpYW4vc3luY2AsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLmNvbmZpZy5zeW5jS2V5fWBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RCb2R5LFxuICAgICAgICAgICAgICAgIHRocm93OiBmYWxzZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gUmVzcG9uc2U6Jywge1xuICAgICAgICAgICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiByZXNwb25zZS5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIGJvZHlQcmV2aWV3OiByZXNwb25zZS50ZXh0Py5zdWJzdHJpbmcoMCwgMjAwKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gXHUyNzEzIFN5bmMgc3VjY2Vzc2Z1bDonLCBkYXRhLnBhdGgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2UudGV4dCB8fCAnU3luYyBmYWlsZWQnfWA7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW01hcmtkb3duQnJhaW5dIFx1MjcxNyBTeW5jIGZhaWxlZDonLCB7XG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGRhdGEucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvck1zZyxcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VCb2R5OiByZXNwb25zZS50ZXh0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvck1zZ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbTWFya2Rvd25CcmFpbl0gXHUyNzE3IFN5bmMgZXhjZXB0aW9uOicsIHtcbiAgICAgICAgICAgICAgICBwYXRoOiBkYXRhLnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgLy8gQ2xlYW51cCBpZiBuZWVkZWRcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hcmtkb3duQnJhaW5QbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzITogTWFya2Rvd25CcmFpblNldHRpbmdzO1xuICAgIHN5bmNNYW5hZ2VyITogU3luY01hbmFnZXI7ICAvLyBcdTY1MzlcdTRFM0EgcHVibGljXHVGRjBDXHU0RjlCXHU4QkJFXHU3RjZFXHU5NzYyXHU2NzdGXHU0RjdGXHU3NTI4XG4gICAgcHJpdmF0ZSBzeW5jRGVib3VuY2VUaW1lcnM6IE1hcDxzdHJpbmcsIE5vZGVKUy5UaW1lb3V0PjtcbiAgICBwcml2YXRlIHBlbmRpbmdTeW5jczogU2V0PHN0cmluZz47ICAvLyBcdThEREZcdThFMkFcdTVGODVcdTU0MENcdTZCNjVcdTc2ODRcdTY1ODdcdTRFRjZcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBtYW5pZmVzdDogUGx1Z2luTWFuaWZlc3QpIHtcbiAgICAgICAgc3VwZXIoYXBwLCBtYW5pZmVzdCk7XG4gICAgICAgIHRoaXMuc3luY0RlYm91bmNlVGltZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLnBlbmRpbmdTeW5jcyA9IG5ldyBTZXQoKTtcbiAgICB9XG5cbiAgICAvLyBcdTc1MUZcdTYyMTBcdTVCQTJcdTYyMzdcdTdBRUYgSURcdUZGMDhcdTU3RkFcdTRFOEVcdThERUZcdTVGODRcdTc2ODQgU0hBLTI1NiBoYXNoXHVGRjA5XG4gICAgYXN5bmMgZ2VuZXJhdGVDbGllbnRJZChwYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBlbmNvZGVyLmVuY29kZShwYXRoKTtcbiAgICAgICAgY29uc3QgaGFzaEJ1ZmZlciA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KCdTSEEtMjU2JywgZGF0YSk7XG4gICAgICAgIGNvbnN0IGhhc2hBcnJheSA9IEFycmF5LmZyb20obmV3IFVpbnQ4QXJyYXkoaGFzaEJ1ZmZlcikpO1xuICAgICAgICBjb25zdCBoYXNoSGV4ID0gaGFzaEFycmF5Lm1hcChiID0+IGIudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJykpLmpvaW4oJycpO1xuICAgICAgICAvLyBcdTY4M0NcdTVGMEZcdTUzMTZcdTRFM0EgVVVJRCBcdTY4MzdcdTVGMEZcbiAgICAgICAgcmV0dXJuIGAke2hhc2hIZXguc3Vic3RyaW5nKDAsIDgpfS0ke2hhc2hIZXguc3Vic3RyaW5nKDgsIDEyKX0tJHtoYXNoSGV4LnN1YnN0cmluZygxMiwgMTYpfS0ke2hhc2hIZXguc3Vic3RyaW5nKDE2LCAyMCl9LSR7aGFzaEhleC5zdWJzdHJpbmcoMjAsIDMyKX1gO1xuICAgIH1cblxuICAgIC8vIFx1NjgwN1x1NTFDNlx1NTMxNiBPYnNpZGlhbiBcdTk0RkVcdTYzQTVcdThERUZcdTVGODRcbiAgICBub3JtYWxpemVMaW5rUGF0aChsaW5rOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICAvLyBcdTc5RkJcdTk2NjRcdTUzRUZcdTgwRkRcdTc2ODRcdTk1MUFcdTcwQjlcdTU0OENcdTU3NTdcdTVGMTVcdTc1MjhcbiAgICAgICAgbGV0IHBhdGggPSBsaW5rLnNwbGl0KCcjJylbMF0uc3BsaXQoJ14nKVswXTtcblxuICAgICAgICAvLyBcdTRFMERcdTg5ODFcdTRFM0FcdTk3NUUgbWFya2Rvd24gXHU2NTg3XHU0RUY2XHU2REZCXHU1MkEwIC5tZCBcdTYyNjlcdTVDNTVcdTU0MERcbiAgICAgICAgLy8gXHU0RkREXHU3NTU5XHU1MzlGXHU1OUNCXHU2MjY5XHU1QzU1XHU1NDBEXHVGRjA4XHU1OTgyIC5wbmcsIC5qcGcsIC5tcDQgXHU3QjQ5XHVGRjA5XG4gICAgICAgIGlmICghcGF0aC5pbmNsdWRlcygnLicpKSB7XG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTYyNjlcdTVDNTVcdTU0MERcdUZGMENcdTUwNDdcdThCQkVcdTY2MkYgbWFya2Rvd24gXHU2NTg3XHU0RUY2XG4gICAgICAgICAgICBwYXRoID0gcGF0aCArICcubWQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgfVxuXG4gICAgLy8gXHU1MjI0XHU2NUFEXHU2NjJGXHU1NDI2XHU2NjJGXHU1QTkyXHU0RjUzXHU2NTg3XHU0RUY2XG4gICAgaXNNZWRpYUZpbGUocGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IG1lZGlhRXh0ZW5zaW9ucyA9IFtcbiAgICAgICAgICAgIC8vIFx1NTZGRVx1NzI0N1xuICAgICAgICAgICAgJy5wbmcnLCAnLmpwZycsICcuanBlZycsICcuZ2lmJywgJy5ibXAnLCAnLnN2ZycsICcud2VicCcsXG4gICAgICAgICAgICAvLyBcdTg5QzZcdTk4OTFcbiAgICAgICAgICAgICcubXA0JywgJy53ZWJtJywgJy5vZ3YnLCAnLm1vdicsICcubWt2JyxcbiAgICAgICAgICAgIC8vIFx1OTdGM1x1OTg5MVxuICAgICAgICAgICAgJy5tcDMnLCAnLndhdicsICcubTRhJywgJy5vZ2cnLCAnLjNncCcsICcuZmxhYycsXG4gICAgICAgICAgICAvLyBcdTUxNzZcdTRFRDZcbiAgICAgICAgICAgICcucGRmJ1xuICAgICAgICBdO1xuXG4gICAgICAgIGNvbnN0IGV4dCA9IHBhdGguc3Vic3RyaW5nKHBhdGgubGFzdEluZGV4T2YoJy4nKSkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgcmV0dXJuIG1lZGlhRXh0ZW5zaW9ucy5pbmNsdWRlcyhleHQpO1xuICAgIH1cblxuICAgIC8vIFx1ODNCN1x1NTNENlx1NUE5Mlx1NEY1M1x1NjU4N1x1NEVGNlx1N0M3Qlx1NTc4QlxuICAgIGdldE1lZGlhVHlwZShwYXRoOiBzdHJpbmcpOiAnaW1hZ2UnIHwgJ3ZpZGVvJyB8ICdhdWRpbycgfCAncGRmJyB8ICdvdGhlcicge1xuICAgICAgICBjb25zdCBleHQgPSBwYXRoLnN1YnN0cmluZyhwYXRoLmxhc3RJbmRleE9mKCcuJykpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgY29uc3QgaW1hZ2VFeHRzID0gWycucG5nJywgJy5qcGcnLCAnLmpwZWcnLCAnLmdpZicsICcuYm1wJywgJy5zdmcnLCAnLndlYnAnXTtcbiAgICAgICAgY29uc3QgdmlkZW9FeHRzID0gWycubXA0JywgJy53ZWJtJywgJy5vZ3YnLCAnLm1vdicsICcubWt2J107XG4gICAgICAgIGNvbnN0IGF1ZGlvRXh0cyA9IFsnLm1wMycsICcud2F2JywgJy5tNGEnLCAnLm9nZycsICcuM2dwJywgJy5mbGFjJ107XG5cbiAgICAgICAgaWYgKGltYWdlRXh0cy5pbmNsdWRlcyhleHQpKSByZXR1cm4gJ2ltYWdlJztcbiAgICAgICAgaWYgKHZpZGVvRXh0cy5pbmNsdWRlcyhleHQpKSByZXR1cm4gJ3ZpZGVvJztcbiAgICAgICAgaWYgKGF1ZGlvRXh0cy5pbmNsdWRlcyhleHQpKSByZXR1cm4gJ2F1ZGlvJztcbiAgICAgICAgaWYgKGV4dCA9PT0gJy5wZGYnKSByZXR1cm4gJ3BkZic7XG4gICAgICAgIHJldHVybiAnb3RoZXInO1xuICAgIH1cblxuICAgIGFzeW5jIG9ubG9hZCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Jyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gUGx1Z2luIGxvYWRpbmcuLi4nKTtcblxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gU2V0dGluZ3MgbG9hZGVkOicsIHtcbiAgICAgICAgICAgIHNlcnZlclVybDogdGhpcy5zZXR0aW5ncy5zZXJ2ZXJVcmwsXG4gICAgICAgICAgICBoYXNTeW5jS2V5OiAhIXRoaXMuc2V0dGluZ3Muc3luY0tleSxcbiAgICAgICAgICAgIHN5bmNLZXlMZW5ndGg6IHRoaXMuc2V0dGluZ3Muc3luY0tleT8ubGVuZ3RoLFxuICAgICAgICAgICAgYXV0b1N5bmM6IHRoaXMuc2V0dGluZ3MuYXV0b1N5bmNcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU1MjFEXHU1OUNCXHU1MzE2XHU1NDBDXHU2QjY1XHU3QkExXHU3NDA2XHU1NjY4XG4gICAgICAgIHRoaXMuc3luY01hbmFnZXIgPSBuZXcgU3luY01hbmFnZXIoe1xuICAgICAgICAgICAgc2VydmVyVXJsOiB0aGlzLnNldHRpbmdzLnNlcnZlclVybCxcbiAgICAgICAgICAgIHN5bmNLZXk6IHRoaXMuc2V0dGluZ3Muc3luY0tleVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBTeW5jTWFuYWdlciBpbml0aWFsaXplZCcpO1xuXG4gICAgICAgIC8vIFx1NzZEMVx1NTQyQ1x1NjU4N1x1NEVGNlx1NTIxQlx1NUVGQVxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5vbignY3JlYXRlJywgKGZpbGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRmlsZUNoYW5nZShmaWxlLCAnY3JlYXRlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBSZWdpc3RlcmVkIGV2ZW50OiBmaWxlIGNyZWF0ZScpO1xuXG4gICAgICAgIC8vIFx1NzZEMVx1NTQyQ1x1NjU4N1x1NEVGNlx1NEZFRVx1NjUzOVxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5vbignbW9kaWZ5JywgKGZpbGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjgwN1x1OEJCMFx1NEUzQVx1NUY4NVx1NTQwQ1x1NkI2NVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdTeW5jcy5hZGQoZmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFJlZ2lzdGVyZWQgZXZlbnQ6IGZpbGUgbW9kaWZ5Jyk7XG5cbiAgICAgICAgLy8gXHU3NkQxXHU1NDJDXHU1MTQzXHU2NTcwXHU2MzZFXHU3RjEzXHU1QjU4XHU2NkY0XHU2NUIwXHU1QjhDXHU2MjEwXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUub24oJ3Jlc29sdmVkJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIG1ldGFkYXRhQ2FjaGUgXHU1REYyXHU4OUUzXHU2NzkwXHU1QjhDXHU2MjEwXHVGRjBDXHU1OTA0XHU3NDA2XHU2MjQwXHU2NzA5XHU1Rjg1XHU1NDBDXHU2QjY1XHU3Njg0XHU2NTg3XHU0RUY2XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlUGF0aCBvZiB0aGlzLnBlbmRpbmdTeW5jcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVGaWxlQ2hhbmdlKGZpbGUsICdtb2RpZnknKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdTeW5jcy5jbGVhcigpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBSZWdpc3RlcmVkIGV2ZW50OiBtZXRhZGF0YSByZXNvbHZlZCcpO1xuXG4gICAgICAgIC8vIFx1NzZEMVx1NTQyQ1x1NjU4N1x1NEVGNlx1NTIyMFx1OTY2NFxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5vbignZGVsZXRlJywgKGZpbGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRmlsZURlbGV0ZShmaWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFJlZ2lzdGVyZWQgZXZlbnQ6IGZpbGUgZGVsZXRlJyk7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU4QkJFXHU3RjZFXHU5NzYyXHU2NzdGXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgTWFya2Rvd25CcmFpblNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBTZXR0aW5ncyB0YWIgYWRkZWQnKTtcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTU0N0RcdTRFRTRcdUZGMUFcdTYyNEJcdTUyQThcdTU0MENcdTZCNjVcdTVGNTNcdTUyNERcdTY1ODdcdTRFRjZcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnc3luYy1jdXJyZW50LWZpbGUnLFxuICAgICAgICAgICAgbmFtZTogJ1N5bmMgY3VycmVudCBmaWxlJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVGaWxlQ2hhbmdlKGZpbGUsICdtb2RpZnknKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTQ3RFx1NEVFNFx1RkYxQVx1NTQwQ1x1NkI2NVx1NjI0MFx1NjcwOVx1NjU4N1x1NEVGNlxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdzeW5jLWFsbC1maWxlcycsXG4gICAgICAgICAgICBuYW1lOiAnU3luYyBhbGwgZmlsZXMnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN5bmNBbGxGaWxlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBDb21tYW5kcyByZWdpc3RlcmVkJyk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBcdTI3MTMgUGx1Z2luIGxvYWRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Jyk7XG4gICAgfVxuXG4gICAgYXN5bmMgaGFuZGxlRmlsZUNoYW5nZShmaWxlOiBURmlsZSwgYWN0aW9uOiAnY3JlYXRlJyB8ICdtb2RpZnknKSB7XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5hdXRvU3luYykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBBdXRvLXN5bmMgZGlzYWJsZWQsIHNraXBwaW5nOicsIGZpbGUucGF0aCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTZFMDVcdTk2NjRcdTRFNEJcdTUyNERcdTc2ODRcdTk2MzJcdTYyOTZcdTVCOUFcdTY1RjZcdTU2NjhcbiAgICAgICAgY29uc3QgZXhpc3RpbmdUaW1lciA9IHRoaXMuc3luY0RlYm91bmNlVGltZXJzLmdldChmaWxlLnBhdGgpO1xuICAgICAgICBpZiAoZXhpc3RpbmdUaW1lcikge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGV4aXN0aW5nVGltZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHU0RjdGXHU3NTI4XHU5NjMyXHU2Mjk2XHU5MDdGXHU1MTREXHU1RkVCXHU5MDFGXHU4RkRFXHU3RUVEXHU3Njg0XHU1NDBDXHU2QjY1XG4gICAgICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN5bmNEZWJvdW5jZVRpbWVycy5kZWxldGUoZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGVyZm9ybVN5bmMoZmlsZSwgYWN0aW9uKTtcbiAgICAgICAgfSwgMzAwKTsgLy8gMzAwbXMgXHU5NjMyXHU2Mjk2XG5cbiAgICAgICAgdGhpcy5zeW5jRGVib3VuY2VUaW1lcnMuc2V0KGZpbGUucGF0aCwgdGltZXIpO1xuICAgIH1cblxuICAgIGFzeW5jIHBlcmZvcm1TeW5jKGZpbGU6IFRGaWxlLCBhY3Rpb246ICdjcmVhdGUnIHwgJ21vZGlmeScpIHtcblxuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIEZpbGUgY2hhbmdlIGRldGVjdGVkOicsIHtcbiAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgICAgICAgZXh0ZW5zaW9uOiBmaWxlLmV4dGVuc2lvbixcbiAgICAgICAgICAgIHNpemU6IGZpbGUuc3RhdC5zaXplXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBcdThCRkJcdTUzRDZcdTY1ODdcdTRFRjZcdTUxODVcdTVCQjlcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBGaWxlIHJlYWQgc3VjY2Vzc2Z1bGx5OicsIHtcbiAgICAgICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgY29udGVudExlbmd0aDogY29udGVudC5sZW5ndGhcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBcdThERjNcdThGQzdcdTdBN0FcdTUxODVcdTVCQjlcdTc2ODRcdTY1ODdcdTRFRjZcbiAgICAgICAgICAgIGlmICghY29udGVudCB8fCBjb250ZW50LnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFNraXBwaW5nIGVtcHR5IGZpbGU6JywgZmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFx1OERGM1x1OEZDN1wiXHU2NzJBXHU1NDdEXHU1NDBELm1kXCJcdTY1ODdcdTRFRjZcdUZGMDhcdTU5ODJcdTY3OUNcdTUxODVcdTVCQjlcdTRFM0FcdTdBN0FcdUZGMDlcbiAgICAgICAgICAgIGlmIChmaWxlLnBhdGguaW5jbHVkZXMoJ1x1NjcyQVx1NTQ3RFx1NTQwRCcpICYmIGNvbnRlbnQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gU2tpcHBpbmcgdW50aXRsZWQgZW1wdHkgZmlsZTonLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU2NTg3XHU0RUY2XHU1MTQzXHU2NTcwXHU2MzZFIC0gXHU0RjdGXHU3NTI4IE9ic2lkaWFuIEFQSVxuICAgICAgICAgICAgY29uc3QgY2FjaGVkTWV0YWRhdGEgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhOiBEb2N1bWVudE1ldGFkYXRhID0ge307XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gUmF3IGNhY2hlZCBtZXRhZGF0YTonLCBjYWNoZWRNZXRhZGF0YSk7XG5cbiAgICAgICAgICAgIGlmIChjYWNoZWRNZXRhZGF0YSkge1xuICAgICAgICAgICAgICAgIC8vIFx1NjNEMFx1NTNENlx1OTRGRVx1NjNBNVx1NTQ4Q1x1NUQ0Q1x1NTE2NVx1RkYwQ1x1NTQwOFx1NUU3Nlx1NEUzQVx1N0VERlx1NEUwMFx1NzY4NCBsaW5rcyBcdTY1NzBcdTdFQzRcbiAgICAgICAgICAgICAgICBjb25zdCBhbGxMaW5rczogQXJyYXk8e1xuICAgICAgICAgICAgICAgICAgICBsaW5rOiBzdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldENsaWVudElkOiBzdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsOiBzdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlUZXh0Pzogc3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICBsaW5rVHlwZTogJ2xpbmsnIHwgJ2VtYmVkJztcbiAgICAgICAgICAgICAgICB9PiA9IFtdO1xuXG4gICAgICAgICAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU2NjZFXHU5MDFBXHU5NEZFXHU2M0E1XG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlZE1ldGFkYXRhLmxpbmtzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gRm91bmQnLCBjYWNoZWRNZXRhZGF0YS5saW5rcy5sZW5ndGgsICdsaW5rcyBpbiBtZXRhZGF0YScpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmsgb2YgY2FjaGVkTWV0YWRhdGEubGlua3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gUHJvY2Vzc2luZyBsaW5rOicsIGxpbmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZFBhdGggPSB0aGlzLm5vcm1hbGl6ZUxpbmtQYXRoKGxpbmsubGluayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIE5vcm1hbGl6ZWQgcGF0aDonLCBub3JtYWxpemVkUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRDbGllbnRJZCA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVDbGllbnRJZChub3JtYWxpemVkUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIEdlbmVyYXRlZCB0YXJnZXRDbGllbnRJZDonLCB0YXJnZXRDbGllbnRJZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzTWVkaWEgPSB0aGlzLmlzTWVkaWFGaWxlKG5vcm1hbGl6ZWRQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtEYXRhOiBhbnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluazogbm9ybWFsaXplZFBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q2xpZW50SWQ6IHRhcmdldENsaWVudElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsOiBsaW5rLm9yaWdpbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlUZXh0OiBsaW5rLmRpc3BsYXlUZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtUeXBlOiAnbGluaydcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc01lZGlhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlua0RhdGEuaXNNZWRpYSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlua0RhdGEubWVkaWFUeXBlID0gdGhpcy5nZXRNZWRpYVR5cGUobm9ybWFsaXplZFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gTWVkaWEgZmlsZSBkZXRlY3RlZDonLCBsaW5rRGF0YS5tZWRpYVR5cGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxMaW5rcy5wdXNoKGxpbmtEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFx1NTkwNFx1NzQwNlx1NUQ0Q1x1NTE2NVxuICAgICAgICAgICAgICAgIGlmIChjYWNoZWRNZXRhZGF0YS5lbWJlZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBGb3VuZCcsIGNhY2hlZE1ldGFkYXRhLmVtYmVkcy5sZW5ndGgsICdlbWJlZHMgaW4gbWV0YWRhdGEnKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBlbWJlZCBvZiBjYWNoZWRNZXRhZGF0YS5lbWJlZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gUHJvY2Vzc2luZyBlbWJlZDonLCBlbWJlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IHRoaXMubm9ybWFsaXplTGlua1BhdGgoZW1iZWQubGluayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIE5vcm1hbGl6ZWQgcGF0aDonLCBub3JtYWxpemVkUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRDbGllbnRJZCA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVDbGllbnRJZChub3JtYWxpemVkUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIEdlbmVyYXRlZCB0YXJnZXRDbGllbnRJZDonLCB0YXJnZXRDbGllbnRJZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzTWVkaWEgPSB0aGlzLmlzTWVkaWFGaWxlKG5vcm1hbGl6ZWRQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtEYXRhOiBhbnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluazogbm9ybWFsaXplZFBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q2xpZW50SWQ6IHRhcmdldENsaWVudElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsOiBlbWJlZC5vcmlnaW5hbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rVHlwZTogJ2VtYmVkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTWVkaWEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rRGF0YS5pc01lZGlhID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rRGF0YS5tZWRpYVR5cGUgPSB0aGlzLmdldE1lZGlhVHlwZShub3JtYWxpemVkUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBNZWRpYSBmaWxlIGRldGVjdGVkOicsIGxpbmtEYXRhLm1lZGlhVHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbExpbmtzLnB1c2gobGlua0RhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGFsbExpbmtzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGEubGlua3MgPSBhbGxMaW5rcztcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBUb3RhbCBsaW5rcyB0byBzeW5jOicsIGFsbExpbmtzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gTGlua3MgZGF0YTonLCBKU09OLnN0cmluZ2lmeShhbGxMaW5rcywgbnVsbCwgMikpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gTm8gbGlua3MgZm91bmQgaW4gdGhpcyBkb2N1bWVudCcpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFx1NjNEMFx1NTNENlx1NjgwN1x1N0I3RVxuICAgICAgICAgICAgICAgIGlmIChjYWNoZWRNZXRhZGF0YS50YWdzKSB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhLnRhZ3MgPSBjYWNoZWRNZXRhZGF0YS50YWdzLm1hcCh0YWcgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogdGFnLnRhZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB0YWcucG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFx1NjNEMFx1NTNENlx1NjgwN1x1OTg5OFxuICAgICAgICAgICAgICAgIGlmIChjYWNoZWRNZXRhZGF0YS5oZWFkaW5ncykge1xuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YS5oZWFkaW5ncyA9IGNhY2hlZE1ldGFkYXRhLmhlYWRpbmdzLm1hcChoZWFkaW5nID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkaW5nOiBoZWFkaW5nLmhlYWRpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXZlbDogaGVhZGluZy5sZXZlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBoZWFkaW5nLnBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBcdTYzRDBcdTUzRDYgZnJvbnRtYXR0ZXJcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVkTWV0YWRhdGEuZnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGEuZnJvbnRtYXR0ZXIgPSBjYWNoZWRNZXRhZGF0YS5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIE1ldGFkYXRhIGV4dHJhY3RlZDonLCB7XG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgbGlua3NDb3VudDogbWV0YWRhdGEubGlua3M/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICAgICAgICAgICB0YWdzQ291bnQ6IG1ldGFkYXRhLnRhZ3M/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICAgICAgICAgICBoZWFkaW5nc0NvdW50OiBtZXRhZGF0YS5oZWFkaW5ncz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgIGhhc0Zyb250bWF0dGVyOiAhIW1ldGFkYXRhLmZyb250bWF0dGVyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NjU4N1x1NEVGNlx1N0VERlx1OEJBMVx1NEZFMVx1NjA2RlxuICAgICAgICAgICAgY29uc3Qgc3RhdCA9IGZpbGUuc3RhdDtcbiAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBhd2FpdCB0aGlzLmhhc2hTdHJpbmcoY29udGVudCk7XG4gICAgICAgICAgICBjb25zdCBtdGltZSA9IG5ldyBEYXRlKHN0YXQubXRpbWUpLnRvSVNPU3RyaW5nKCk7XG5cbiAgICAgICAgICAgIC8vIFx1NzUxRlx1NjIxMFx1NUJBMlx1NjIzN1x1N0FFRiBJRFxuICAgICAgICAgICAgY29uc3QgY2xpZW50SWQgPSBhd2FpdCB0aGlzLmdlbmVyYXRlQ2xpZW50SWQoZmlsZS5wYXRoKTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBGaWxlIG1ldGFkYXRhOicsIHtcbiAgICAgICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgY2xpZW50SWQ6IGNsaWVudElkLFxuICAgICAgICAgICAgICAgIGhhc2g6IGhhc2gsXG4gICAgICAgICAgICAgICAgbXRpbWU6IG10aW1lLFxuICAgICAgICAgICAgICAgIGhhc01ldGFkYXRhOiAhIW1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIGxpbmtzQ291bnQ6IG1ldGFkYXRhLmxpbmtzPy5sZW5ndGggfHwgMFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFx1NTFDNlx1NTkwN1x1NTQwQ1x1NkI2NVx1NjU3MFx1NjM2RVxuICAgICAgICAgICAgY29uc3Qgc3luY0RhdGEgPSB7XG4gICAgICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgICAgIGNsaWVudElkOiBjbGllbnRJZCxcbiAgICAgICAgICAgICAgICBjbGllbnRUeXBlOiAnb2JzaWRpYW4nLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgaGFzaDogaGFzaCxcbiAgICAgICAgICAgICAgICBtdGltZTogbXRpbWUsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IG1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogYWN0aW9uXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFN5bmMgZGF0YSBwcmVwYXJlZDonKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gLSBQYXRoOicsIHN5bmNEYXRhLnBhdGgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSAtIENsaWVudElkOicsIHN5bmNEYXRhLmNsaWVudElkKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gLSBBY3Rpb246Jywgc3luY0RhdGEuYWN0aW9uKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gLSBNZXRhZGF0YTonLCBKU09OLnN0cmluZ2lmeShzeW5jRGF0YS5tZXRhZGF0YSwgbnVsbCwgMikpO1xuXG4gICAgICAgICAgICAvLyBcdThDMDNcdTc1MjhcdTU0MENcdTZCNjVcdTUxRkRcdTY1NzBcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc3luY01hbmFnZXIuc3luYyhzeW5jRGF0YSk7XG5cbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gXHUyNzEzIEZpbGUgc3luY2VkIHN1Y2Nlc3NmdWxseTonLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbTWFya2Rvd25CcmFpbl0gXHUyNzE3IEZpbGUgc3luYyBmYWlsZWQ6JywgZmlsZS5wYXRoLCByZXN1bHQuZXJyb3IpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NTQwQ1x1NkI2NVx1NTkzMVx1OEQyNTogJHtmaWxlLnBhdGh9XFxuJHtyZXN1bHQuZXJyb3J9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbTWFya2Rvd25CcmFpbl0gXHUyNzE3IEZpbGUgY2hhbmdlIGhhbmRsZXIgZXJyb3I6Jywge1xuICAgICAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IsXG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgICAgICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1NDBDXHU2QjY1XHU5NTE5XHU4QkVGOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgaGFuZGxlRmlsZURlbGV0ZShmaWxlOiBURmlsZSkge1xuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuYXV0b1N5bmMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gQXV0by1zeW5jIGRpc2FibGVkLCBza2lwcGluZyBkZWxldGU6JywgZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gRmlsZSBkZWxldGlvbiBkZXRlY3RlZDonLCB7XG4gICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICBleHRlbnNpb246IGZpbGUuZXh0ZW5zaW9uXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBcdTc1MUZcdTYyMTBcdTVCQTJcdTYyMzdcdTdBRUYgSURcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudElkID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUNsaWVudElkKGZpbGUucGF0aCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc3luY01hbmFnZXIuc3luYyh7XG4gICAgICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgICAgIGNsaWVudElkOiBjbGllbnRJZCxcbiAgICAgICAgICAgICAgICBjbGllbnRUeXBlOiAnb2JzaWRpYW4nLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogJ2RlbGV0ZSdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFx1MjcxMyBGaWxlIGRlbGV0aW9uIHN5bmNlZDonLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbTWFya2Rvd25CcmFpbl0gXHUyNzE3IEZpbGUgZGVsZXRpb24gc3luYyBmYWlsZWQ6JywgZmlsZS5wYXRoLCByZXN1bHQuZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW01hcmtkb3duQnJhaW5dIFx1MjcxNyBEZWxldGUgc3luYyBleGNlcHRpb246Jywge1xuICAgICAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IsXG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBzeW5jQWxsRmlsZXMoKSB7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBjb25zb2xlLmxvZyhgW01hcmtkb3duQnJhaW5dIFN0YXJ0aW5nIGJhdGNoIHN5bmMgZm9yICR7ZmlsZXMubGVuZ3RofSBmaWxlc2ApO1xuICAgICAgICBuZXcgTm90aWNlKGBcdTVGMDBcdTU5Q0JcdTYyNzlcdTkxQ0ZcdTU0MENcdTZCNjUgJHtmaWxlcy5sZW5ndGh9IFx1NEUyQVx1NjU4N1x1NEVGNi4uLmApO1xuXG4gICAgICAgIGxldCBzdWNjZXNzID0gMDtcbiAgICAgICAgbGV0IGZhaWxlZCA9IDA7XG4gICAgICAgIGxldCBza2lwcGVkID0gMDtcblxuICAgICAgICAvLyBcdTYyNzlcdTkxQ0ZcdTU5MDRcdTc0MDZcdUZGMENcdTZCQ0ZcdTZCMjFcdTU5MDRcdTc0MDYgMTAgXHU0RTJBXHU2NTg3XHU0RUY2XG4gICAgICAgIGNvbnN0IGJhdGNoU2l6ZSA9IDEwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgaSArPSBiYXRjaFNpemUpIHtcbiAgICAgICAgICAgIGNvbnN0IGJhdGNoID0gZmlsZXMuc2xpY2UoaSwgaSArIGJhdGNoU2l6ZSk7XG4gICAgICAgICAgICBjb25zdCBiYXRjaFByb21pc2VzID0gYmF0Y2gubWFwKGFzeW5jIChmaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU4REYzXHU4RkM3XHU3QTdBXHU2NTg3XHU0RUY2XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRlbnQgfHwgY29udGVudC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW01hcmtkb3duQnJhaW5dIFNraXBwaW5nIGVtcHR5IGZpbGU6ICR7ZmlsZS5wYXRofWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2tpcHBlZCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wZXJmb3JtU3luYyhmaWxlLCAnbW9kaWZ5Jyk7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MrKztcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtNYXJrZG93bkJyYWluXSBcdTI3MTMgU3luY2VkICgke3N1Y2Nlc3MgKyBmYWlsZWQgKyBza2lwcGVkfS8ke2ZpbGVzLmxlbmd0aH0pOiAke2ZpbGUucGF0aH1gKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBmYWlsZWQrKztcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW01hcmtkb3duQnJhaW5dIFx1MjcxNyBGYWlsZWQgdG8gc3luYyAke2ZpbGUucGF0aH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChiYXRjaFByb21pc2VzKTtcblxuICAgICAgICAgICAgLy8gXHU2NjNFXHU3OTNBXHU4RkRCXHU1RUE2XG4gICAgICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgubWluKGkgKyBiYXRjaFNpemUsIGZpbGVzLmxlbmd0aCk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdTU0MENcdTZCNjVcdThGREJcdTVFQTY6ICR7cHJvZ3Jlc3N9LyR7ZmlsZXMubGVuZ3RofSAoXHU2MjEwXHU1MjlGOiAke3N1Y2Nlc3N9LCBcdTU5MzFcdThEMjU6ICR7ZmFpbGVkfSwgXHU4REYzXHU4RkM3OiAke3NraXBwZWR9KWApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmluYWxNc2cgPSBgXHU1NDBDXHU2QjY1XHU1QjhDXHU2MjEwISBcdTYwM0JcdThCQTE6ICR7ZmlsZXMubGVuZ3RofSwgXHU2MjEwXHU1MjlGOiAke3N1Y2Nlc3N9LCBcdTU5MzFcdThEMjU6ICR7ZmFpbGVkfSwgXHU4REYzXHU4RkM3OiAke3NraXBwZWR9YDtcbiAgICAgICAgY29uc29sZS5sb2coYFtNYXJrZG93bkJyYWluXSAke2ZpbmFsTXNnfWApO1xuICAgICAgICBuZXcgTm90aWNlKGZpbmFsTXNnLCA4MDAwKTtcbiAgICB9XG5cbiAgICAvLyBNRDUgXHU1NEM4XHU1RTBDXHU1MUZEXHU2NTcwXHVGRjA4XHU3NTI4XHU0RThFXHU2OEMwXHU2RDRCXHU2NTg3XHU0RUY2XHU1MTg1XHU1QkI5XHU1M0Q4XHU1MzE2XHVGRjA5XG4gICAgYXN5bmMgaGFzaFN0cmluZyhzdHI6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbiAgICAgICAgY29uc3QgZGF0YSA9IGVuY29kZXIuZW5jb2RlKHN0cik7XG4gICAgICAgIGNvbnN0IGhhc2hCdWZmZXIgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmRpZ2VzdCgnTUQ1JywgZGF0YSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDIE1ENSBcdTRFMERcdTUzRUZcdTc1MjhcdUZGMENcdTk2NERcdTdFQTdcdTRGN0ZcdTc1MjggU0hBLTI1NlxuICAgICAgICAgICAgcmV0dXJuIGNyeXB0by5zdWJ0bGUuZGlnZXN0KCdTSEEtMjU2JywgZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBoYXNoQXJyYXkgPSBBcnJheS5mcm9tKG5ldyBVaW50OEFycmF5KGhhc2hCdWZmZXIpKTtcbiAgICAgICAgcmV0dXJuIGhhc2hBcnJheS5tYXAoYiA9PiBiLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpKS5qb2luKCcnKTtcbiAgICB9XG5cbiAgICBvbnVubG9hZCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1VubG9hZGluZyBNYXJrZG93bkJyYWluIHBsdWdpbicpO1xuICAgICAgICAvLyBcdTZFMDVcdTc0MDZcdTYyNDBcdTY3MDlcdTk2MzJcdTYyOTZcdTVCOUFcdTY1RjZcdTU2NjhcbiAgICAgICAgZm9yIChjb25zdCB0aW1lciBvZiB0aGlzLnN5bmNEZWJvdW5jZVRpbWVycy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN5bmNEZWJvdW5jZVRpbWVycy5jbGVhcigpO1xuICAgICAgICB0aGlzLnN5bmNNYW5hZ2VyLmRlc3Ryb3koKTtcbiAgICB9XG5cbiAgICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU1NDBDXHU2QjY1XHU3QkExXHU3NDA2XHU1NjY4XHU5MTREXHU3RjZFXG4gICAgICAgIHRoaXMuc3luY01hbmFnZXIudXBkYXRlQ29uZmlnKHtcbiAgICAgICAgICAgIHNlcnZlclVybDogdGhpcy5zZXR0aW5ncy5zZXJ2ZXJVcmwsXG4gICAgICAgICAgICBzeW5jS2V5OiB0aGlzLnNldHRpbmdzLnN5bmNLZXlcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vLyBcdThCQkVcdTdGNkVcdTk3NjJcdTY3N0ZcbmNsYXNzIE1hcmtkb3duQnJhaW5TZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gICAgcGx1Z2luOiBNYXJrZG93bkJyYWluUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTWFya2Rvd25CcmFpblBsdWdpbikge1xuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnTWFya2Rvd25CcmFpbiBcdTU0MENcdTZCNjVcdThCQkVcdTdGNkUnIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1NjcwRFx1NTJBMVx1NTY2OFx1NTczMFx1NTc0MCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnTWFya2Rvd25CcmFpbiBcdTY3MERcdTUyQTFcdTU2NjggQVBJIFx1NTczMFx1NTc0MCcpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2h0dHBzOi8vYXBpLm1hcmtkb3duYnJhaW4uY29tJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VydmVyVXJsKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VydmVyVXJsID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdTeW5jIEtleScpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU0RUNFXHU3QkExXHU3NDA2XHU1NDBFXHU1M0YwXHU4M0I3XHU1M0Q2XHU3Njg0XHU1NDBDXHU2QjY1XHU1QkM2XHU5NEE1JylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcigneHh4eHh4eHgteHh4eC14eHh4LXh4eHgteHh4eHh4eHh4eHh4JylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc3luY0tleSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNLZXkgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIFx1NkQ0Qlx1OEJENVx1OEZERVx1NjNBNVx1NjMwOVx1OTRBRVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTZENEJcdThCRDVcdThGREVcdTYzQTUnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1NkQ0Qlx1OEJENVx1NEUwRVx1NjcwRFx1NTJBMVx1NTY2OFx1NzY4NFx1OEZERVx1NjNBNVx1RkYwODMwXHU3OUQyXHU4RDg1XHU2NUY2XHVGRjA5JylcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdcdTZENEJcdThCRDUnKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHU2RDRCXHU4QkQ1XHU0RTJELi4uJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2QjYzXHU1NzI4XHU2RDRCXHU4QkQ1XHU4RkRFXHU2M0E1Li4uJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wbHVnaW4uc3luY01hbmFnZXIudGVzdENvbm5lY3Rpb24oMzAwMDApO1xuXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdTZENEJcdThCRDUnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0LnZhdWx0SW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXHUyNzA1IFx1OEZERVx1NjNBNVx1NjIxMFx1NTI5Rlx1RkYwMVxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBWYXVsdDogJHtyZXN1bHQudmF1bHRJbmZvLm5hbWV9XFxuYCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYERvbWFpbjogJHtyZXN1bHQudmF1bHRJbmZvLmRvbWFpbn1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDUwMDBcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTI3NEMgXHU4RkRFXHU2M0E1XHU1OTMxXHU4RDI1OiAke3Jlc3VsdC5lcnJvciB8fCAnVW5rbm93biBlcnJvcid9YCwgNTAwMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gXHU2Mjc5XHU5MUNGXHU1NDBDXHU2QjY1XHU2MzA5XHU5NEFFXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1NjI3OVx1OTFDRlx1NTQwQ1x1NkI2NScpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU2MjRCXHU1MkE4XHU1NDBDXHU2QjY1XHU2MjQwXHU2NzA5IE1hcmtkb3duIFx1NjU4N1x1NEVGNlx1NTIzMFx1NjcwRFx1NTJBMVx1NTY2OCcpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHU1RjAwXHU1OUNCXHU1NDBDXHU2QjY1JylcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1NTQwQ1x1NkI2NVx1NEUyRC4uLicpO1xuXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnN5bmNBbGxGaWxlcygpO1xuXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdTVGMDBcdTU5Q0JcdTU0MENcdTZCNjUnKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHU4MUVBXHU1MkE4XHU1NDBDXHU2QjY1JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdTY1ODdcdTRFRjZcdTRGRUVcdTY1MzlcdTY1RjZcdTgxRUFcdTUyQThcdTU0MENcdTZCNjVcdTUyMzBcdTY3MERcdTUyQTFcdTU2NjgnKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9TeW5jKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1N5bmMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQWtGO0FBUWxGLElBQU0sbUJBQTBDO0FBQUEsRUFDNUMsV0FBVztBQUFBLEVBQ1gsU0FBUztBQUFBLEVBQ1QsVUFBVTtBQUNkO0FBMERBLElBQU0sY0FBTixNQUFrQjtBQUFBLEVBR2QsWUFBWSxRQUFvQjtBQUM1QixTQUFLLFNBQVM7QUFBQSxFQUNsQjtBQUFBLEVBRUEsYUFBYSxRQUFvQjtBQUM3QixTQUFLLFNBQVM7QUFBQSxFQUNsQjtBQUFBLEVBRUEsTUFBTSxlQUFlLFVBQWtCLEtBQTZFO0FBQ2hILFFBQUk7QUFDQSxZQUFNLGFBQWEsSUFBSSxnQkFBZ0I7QUFDdkMsWUFBTSxZQUFZLFdBQVcsTUFBTSxXQUFXLE1BQU0sR0FB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LEVBQ3RCLFFBQVEsVUFBUSxLQUNaLGVBQWUsc0NBQXNDLEVBQ3JELFNBQVMsS0FBSyxPQUFPLFNBQVMsT0FBTyxFQUNyQyxTQUFTLE9BQU8sVUFBVTtBQUN2QixXQUFLLE9BQU8sU0FBUyxVQUFVO0FBQy9CLFlBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxJQUNuQyxDQUFDLENBQUM7QUFHVixRQUFJLHdCQUFRLFdBQVcsRUFDbEIsUUFBUSwwQkFBTSxFQUNkLFFBQVEsd0ZBQWtCLEVBQzFCLFVBQVUsWUFBVSxPQUNoQixjQUFjLGNBQUksRUFDbEIsUUFBUSxZQUFZO0FBQ2pCLGFBQU8sWUFBWSxJQUFJO0FBQ3ZCLGFBQU8sY0FBYyx1QkFBUTtBQUU3QixVQUFJLHVCQUFPLHlDQUFXO0FBRXRCLFlBQU0sU0FBUyxNQUFNLEtBQUssT0FBTyxZQUFZLGVBQWUsR0FBSztBQUVqRSxhQUFPLFlBQVksS0FBSztBQUN4QixhQUFPLGNBQWMsY0FBSTtBQUV6QixVQUFJLE9BQU8sV0FBVyxPQUFPLFdBQVc7QUFDcEMsWUFBSTtBQUFBLFVBQ0E7QUFBQSxTQUNVLE9BQU8sVUFBVSxJQUFJO0FBQUEsVUFDcEIsT0FBTyxVQUFVLE1BQU07QUFBQSxVQUNsQztBQUFBLFFBQ0o7QUFBQSxNQUNKLE9BQU87QUFDSCxZQUFJLHVCQUFPLG9DQUFXLE9BQU8sU0FBUyxlQUFlLElBQUksR0FBSTtBQUFBLE1BQ2pFO0FBQUEsSUFDSixDQUFDLENBQUM7QUFHVixRQUFJLHdCQUFRLFdBQVcsRUFDbEIsUUFBUSwwQkFBTSxFQUNkLFFBQVEsb0ZBQXdCLEVBQ2hDLFVBQVUsWUFBVSxPQUNoQixjQUFjLDBCQUFNLEVBQ3BCLFFBQVEsWUFBWTtBQUNqQixhQUFPLFlBQVksSUFBSTtBQUN2QixhQUFPLGNBQWMsdUJBQVE7QUFFN0IsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUUvQixhQUFPLFlBQVksS0FBSztBQUN4QixhQUFPLGNBQWMsMEJBQU07QUFBQSxJQUMvQixDQUFDLENBQUM7QUFFVixRQUFJLHdCQUFRLFdBQVcsRUFDbEIsUUFBUSwwQkFBTSxFQUNkLFFBQVEsZ0ZBQWUsRUFDdkIsVUFBVSxZQUFVLE9BQ2hCLFNBQVMsS0FBSyxPQUFPLFNBQVMsUUFBUSxFQUN0QyxTQUFTLE9BQU8sVUFBVTtBQUN2QixXQUFLLE9BQU8sU0FBUyxXQUFXO0FBQ2hDLFlBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxJQUNuQyxDQUFDLENBQUM7QUFBQSxFQUNkO0FBQ0o7IiwKICAibmFtZXMiOiBbXQp9Cg==
