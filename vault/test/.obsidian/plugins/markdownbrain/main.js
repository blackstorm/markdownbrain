/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MarkdownBrainPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian2 = require("obsidian");

// src/core/client-id.ts
var import_obsidian = require("obsidian");
var CLIENT_ID_KEY = "markdownbrain-id";
async function getOrCreateClientId(file, content, app) {
  var _a;
  const cache = app.metadataCache.getFileCache(file);
  if ((_a = cache == null ? void 0 : cache.frontmatter) == null ? void 0 : _a[CLIENT_ID_KEY]) {
    return String(cache.frontmatter[CLIENT_ID_KEY]).trim();
  }
  const fileContent = await app.vault.read(file);
  const latestContent = fileContent || content;
  const frontmatterMatch = latestContent.match(/^---\n([\s\S]*?)\n---/);
  if (frontmatterMatch) {
    try {
      const frontmatter = (0, import_obsidian.parseYaml)(frontmatterMatch[1]);
      if (frontmatter == null ? void 0 : frontmatter[CLIENT_ID_KEY]) {
        return String(frontmatter[CLIENT_ID_KEY]).trim();
      }
    } catch (e) {
    }
  }
  const newId = crypto.randomUUID();
  await app.fileManager.processFrontMatter(file, (frontmatter) => {
    frontmatter[CLIENT_ID_KEY] = newId;
  });
  return newId;
}

// src/main.ts
var DEFAULT_SETTINGS = {
  serverUrl: "https://api.markdownbrain.com",
  syncKey: "",
  autoSync: true
};
var RESOURCE_EXTENSIONS = /* @__PURE__ */ new Set([
  "png",
  "jpg",
  "jpeg",
  "gif",
  "webp",
  "svg",
  "bmp",
  "ico",
  "pdf",
  "mp3",
  "ogg",
  "wav",
  "mp4",
  "webm"
]);
function isResourceFile(file) {
  return RESOURCE_EXTENSIONS.has(file.extension.toLowerCase());
}
function getContentType(extension) {
  const ext = extension.toLowerCase();
  const mimeTypes = {
    "png": "image/png",
    "jpg": "image/jpeg",
    "jpeg": "image/jpeg",
    "gif": "image/gif",
    "webp": "image/webp",
    "svg": "image/svg+xml",
    "bmp": "image/bmp",
    "ico": "image/x-icon",
    "pdf": "application/pdf",
    "mp3": "audio/mpeg",
    "ogg": "audio/ogg",
    "wav": "audio/wav",
    "mp4": "video/mp4",
    "webm": "video/webm"
  };
  return mimeTypes[ext] || "application/octet-stream";
}
async function arrayBufferToBase64(buffer) {
  const bytes = new Uint8Array(buffer);
  let binary = "";
  for (let i = 0; i < bytes.byteLength; i++) {
    binary += String.fromCharCode(bytes[i]);
  }
  return btoa(binary);
}
async function sha256Hash(buffer) {
  const hashBuffer = await crypto.subtle.digest("SHA-256", buffer);
  const hashArray = Array.from(new Uint8Array(hashBuffer));
  return hashArray.map((b) => b.toString(16).padStart(2, "0")).join("");
}
var SyncManager = class {
  constructor(config) {
    this.config = config;
  }
  updateConfig(config) {
    this.config = config;
  }
  async testConnection(timeout = 3e4) {
    try {
      const controller = new AbortController();
      const timeoutId = setTimeout(() => controller.abort(), timeout);
      const response = await (0, import_obsidian2.requestUrl)({
        url: `${this.config.serverUrl}/obsidian/vault/info`,
        method: "GET",
        headers: {
          "Authorization": `Bearer ${this.config.syncKey}`
        },
        throw: false
      });
      clearTimeout(timeoutId);
      if (response.status === 200) {
        const data = response.json;
        return {
          success: true,
          vaultInfo: data.vault
        };
      } else {
        return {
          success: false,
          error: `HTTP ${response.status}: ${response.text || "Unknown error"}`
        };
      }
    } catch (error) {
      if ((error == null ? void 0 : error.name) === "AbortError") {
        return {
          success: false,
          error: "\u8FDE\u63A5\u8D85\u65F6\uFF0830\u79D2\uFF09"
        };
      }
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error"
      };
    }
  }
  async sync(data) {
    var _a, _b;
    console.log("[MarkdownBrain] Starting sync:", {
      path: data.path,
      action: data.action,
      hasContent: !!data.content,
      contentLength: (_a = data.content) == null ? void 0 : _a.length,
      serverUrl: this.config.serverUrl,
      hasSyncKey: !!this.config.syncKey
    });
    try {
      const requestBody = JSON.stringify(data);
      console.log("[MarkdownBrain] Request body size:", requestBody.length, "bytes");
      const response = await (0, import_obsidian2.requestUrl)({
        url: `${this.config.serverUrl}/obsidian/sync`,
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${this.config.syncKey}`
        },
        body: requestBody,
        throw: false
      });
      console.log("[MarkdownBrain] Response:", {
        status: response.status,
        statusText: response.status,
        headers: response.headers,
        bodyPreview: (_b = response.text) == null ? void 0 : _b.substring(0, 200)
      });
      if (response.status === 200) {
        console.log("[MarkdownBrain] \u2713 Sync successful:", data.path);
        return { success: true };
      } else {
        const errorMsg = `HTTP ${response.status}: ${response.text || "Sync failed"}`;
        console.error("[MarkdownBrain] \u2717 Sync failed:", {
          path: data.path,
          status: response.status,
          error: errorMsg,
          responseBody: response.text
        });
        return {
          success: false,
          error: errorMsg
        };
      }
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 Sync exception:", {
        path: data.path,
        error,
        errorMessage: error instanceof Error ? error.message : "Unknown error",
        errorStack: error instanceof Error ? error.stack : void 0
      });
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error"
      };
    }
  }
  /**
   * 全量同步 - 清理孤儿笔记
   * @param clientIds 客户端所有笔记的 client_ids 列表
   * @returns 包含删除数量的响应
   * @complexity O(1) - 单次网络请求
   * @compatibility 降级处理 - 如果服务器返回 404，视为成功（旧服务器）
   */
  async fullSync(clientIds) {
    console.log("[MarkdownBrain] Starting full sync...", {
      clientNoteCount: clientIds.length
    });
    try {
      const requestBody = { clientIds };
      const response = await (0, import_obsidian2.requestUrl)({
        url: `${this.config.serverUrl}/obsidian/sync/full`,
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${this.config.syncKey}`
        },
        body: JSON.stringify(requestBody),
        throw: false
      });
      if (response.status === 404) {
        console.warn("[MarkdownBrain] Full sync not supported by server (404), skipping orphan cleanup");
        return {
          success: true,
          data: {
            "vault-id": "",
            action: "full-sync",
            "client-notes": clientIds.length,
            "deleted-count": 0,
            "remaining-notes": clientIds.length
          }
        };
      }
      if (response.status === 200) {
        const data = response.json;
        console.log("[MarkdownBrain] \u2713 Full sync successful:", {
          deletedCount: data["deleted-count"],
          remainingNotes: data["remaining-notes"]
        });
        return {
          success: true,
          data
        };
      } else {
        const errorMsg = `HTTP ${response.status}: ${response.text || "Full sync failed"}`;
        console.error("[MarkdownBrain] \u2717 Full sync failed:", {
          status: response.status,
          error: errorMsg
        });
        return {
          success: false,
          error: errorMsg
        };
      }
    } catch (error) {
      const errorMsg = error instanceof Error ? error.message : "Unknown error";
      console.error("[MarkdownBrain] \u2717 Full sync exception:", {
        error: errorMsg
      });
      return {
        success: false,
        error: errorMsg
      };
    }
  }
  async syncResource(data) {
    console.log("[MarkdownBrain] Starting resource sync:", {
      path: data.path,
      action: data.action,
      contentType: data.contentType,
      sizeBytes: data.sizeBytes
    });
    try {
      const response = await (0, import_obsidian2.requestUrl)({
        url: `${this.config.serverUrl}/obsidian/resources/sync`,
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${this.config.syncKey}`
        },
        body: JSON.stringify(data),
        throw: false
      });
      if (response.status === 200) {
        console.log("[MarkdownBrain] \u2713 Resource sync successful:", data.path);
        return { success: true };
      } else {
        const errorMsg = `HTTP ${response.status}: ${response.text || "Resource sync failed"}`;
        console.error("[MarkdownBrain] \u2717 Resource sync failed:", {
          path: data.path,
          status: response.status,
          error: errorMsg
        });
        return { success: false, error: errorMsg };
      }
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 Resource sync exception:", {
        path: data.path,
        error: error instanceof Error ? error.message : "Unknown error"
      });
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error"
      };
    }
  }
  destroy() {
  }
};
var MarkdownBrainPlugin = class extends import_obsidian2.Plugin {
  constructor(app, manifest) {
    super(app, manifest);
    this.syncDebounceTimers = /* @__PURE__ */ new Map();
    this.pendingSyncs = /* @__PURE__ */ new Set();
    this.clientIdCache = /* @__PURE__ */ new Map();
  }
  async onload() {
    var _a;
    console.log("[MarkdownBrain] ========================================");
    console.log("[MarkdownBrain] Plugin loading...");
    await this.loadSettings();
    console.log("[MarkdownBrain] Settings loaded:", {
      serverUrl: this.settings.serverUrl,
      hasSyncKey: !!this.settings.syncKey,
      syncKeyLength: (_a = this.settings.syncKey) == null ? void 0 : _a.length,
      autoSync: this.settings.autoSync
    });
    this.syncManager = new SyncManager({
      serverUrl: this.settings.serverUrl,
      syncKey: this.settings.syncKey
    });
    console.log("[MarkdownBrain] SyncManager initialized");
    this.registerEvent(
      this.app.vault.on("create", (file) => {
        if (file instanceof import_obsidian2.TFile) {
          if (file.extension === "md") {
            this.handleFileChange(file, "create");
          } else if (isResourceFile(file)) {
            this.handleResourceChange(file, "upsert");
          }
        }
      })
    );
    console.log("[MarkdownBrain] Registered event: file create");
    this.registerEvent(
      this.app.vault.on("modify", (file) => {
        if (file instanceof import_obsidian2.TFile) {
          if (file.extension === "md") {
            this.pendingSyncs.add(file.path);
          } else if (isResourceFile(file)) {
            this.handleResourceChange(file, "upsert");
          }
        }
      })
    );
    console.log("[MarkdownBrain] Registered event: file modify");
    this.registerEvent(
      this.app.metadataCache.on("resolved", () => {
        for (const filePath of this.pendingSyncs) {
          const file = this.app.vault.getAbstractFileByPath(filePath);
          if (file instanceof import_obsidian2.TFile) {
            this.handleFileChange(file, "modify");
          }
        }
        this.pendingSyncs.clear();
      })
    );
    console.log("[MarkdownBrain] Registered event: metadata resolved");
    this.registerEvent(
      this.app.vault.on("delete", (file) => {
        if (file instanceof import_obsidian2.TFile) {
          if (file.extension === "md") {
            this.handleFileDelete(file);
          } else if (isResourceFile(file)) {
            this.handleResourceDelete(file);
          }
        }
      })
    );
    console.log("[MarkdownBrain] Registered event: file delete");
    this.registerEvent(
      this.app.vault.on("rename", (file, oldPath) => {
        if (file instanceof import_obsidian2.TFile) {
          if (file.extension === "md") {
            this.handleFileRename(file, oldPath);
          } else if (isResourceFile(file)) {
            this.handleResourceRename(file, oldPath);
          }
        }
      })
    );
    console.log("[MarkdownBrain] Registered event: file rename");
    this.addSettingTab(new MarkdownBrainSettingTab(this.app, this));
    console.log("[MarkdownBrain] Settings tab added");
    this.addCommand({
      id: "sync-current-file",
      name: "Sync current file",
      callback: () => {
        const file = this.app.workspace.getActiveFile();
        if (file) {
          this.handleFileChange(file, "modify");
        }
      }
    });
    this.addCommand({
      id: "sync-all-files",
      name: "Sync all files",
      callback: () => {
        this.syncAllFiles();
      }
    });
    console.log("[MarkdownBrain] Commands registered");
    await this.buildClientIdCache();
    console.log("[MarkdownBrain] \u2713 Plugin loaded successfully");
    console.log("[MarkdownBrain] ========================================");
  }
  async buildClientIdCache() {
    var _a;
    const files = this.app.vault.getMarkdownFiles();
    let cached = 0;
    for (const file of files) {
      const cache = this.app.metadataCache.getFileCache(file);
      const clientId = (_a = cache == null ? void 0 : cache.frontmatter) == null ? void 0 : _a[CLIENT_ID_KEY];
      if (clientId) {
        this.clientIdCache.set(file.path, String(clientId).trim());
        cached++;
      }
    }
    console.log(`[MarkdownBrain] ClientId cache built: ${cached}/${files.length} files`);
  }
  async handleFileChange(file, action) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping:", file.path);
      return;
    }
    const existingTimer = this.syncDebounceTimers.get(file.path);
    if (existingTimer) {
      clearTimeout(existingTimer);
    }
    const timer = setTimeout(async () => {
      this.syncDebounceTimers.delete(file.path);
      await this.performSync(file, action);
    }, 300);
    this.syncDebounceTimers.set(file.path, timer);
  }
  async performSync(file, action) {
    var _a, _b;
    console.log("[MarkdownBrain] File change detected:", {
      path: file.path,
      action,
      extension: file.extension,
      size: file.stat.size
    });
    try {
      const content = await this.app.vault.read(file);
      console.log("[MarkdownBrain] File read successfully:", {
        path: file.path,
        contentLength: content.length
      });
      const cachedMetadata = this.app.metadataCache.getFileCache(file);
      const metadata = {};
      if (cachedMetadata) {
        if (cachedMetadata.tags) {
          metadata.tags = cachedMetadata.tags.map((tag) => ({
            tag: tag.tag,
            position: tag.position
          }));
        }
        if (cachedMetadata.headings) {
          metadata.headings = cachedMetadata.headings.map((heading) => ({
            heading: heading.heading,
            level: heading.level,
            position: heading.position
          }));
        }
        if (cachedMetadata.frontmatter) {
          metadata.frontmatter = cachedMetadata.frontmatter;
        }
        console.log("[MarkdownBrain] Metadata extracted:", {
          path: file.path,
          tagsCount: ((_a = metadata.tags) == null ? void 0 : _a.length) || 0,
          headingsCount: ((_b = metadata.headings) == null ? void 0 : _b.length) || 0,
          hasFrontmatter: !!metadata.frontmatter
        });
      }
      const stat = file.stat;
      const hash = await this.hashString(content);
      const mtime = new Date(stat.mtime).toISOString();
      const clientId = await getOrCreateClientId(file, content, this.app);
      console.log("[MarkdownBrain] File metadata:", {
        path: file.path,
        clientId,
        hash,
        mtime
      });
      const syncData = {
        path: file.path,
        clientId,
        clientType: "obsidian",
        content,
        hash,
        mtime,
        metadata,
        action
      };
      const result = await this.syncManager.sync(syncData);
      if (result.success) {
        this.clientIdCache.set(file.path, clientId);
        console.log("[MarkdownBrain] \u2713 File synced successfully:", file.path);
      } else {
        console.error("[MarkdownBrain] \u2717 File sync failed:", file.path, result.error);
        new import_obsidian2.Notice(`\u540C\u6B65\u5931\u8D25: ${file.path}
${result.error}`);
      }
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 File change handler error:", {
        path: file.path,
        error,
        errorMessage: error instanceof Error ? error.message : "Unknown error",
        errorStack: error instanceof Error ? error.stack : void 0
      });
      new import_obsidian2.Notice(`\u540C\u6B65\u9519\u8BEF: ${error instanceof Error ? error.message : "Unknown error"}`);
    }
  }
  async handleFileDelete(file) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping delete:", file.path);
      return;
    }
    console.log("[MarkdownBrain] File deletion detected:", {
      path: file.path,
      extension: file.extension
    });
    const clientId = this.clientIdCache.get(file.path);
    if (!clientId) {
      console.warn("[MarkdownBrain] Cannot sync deletion - clientId not in cache:", file.path);
      return;
    }
    const result = await this.syncManager.sync({
      path: file.path,
      clientId,
      clientType: "obsidian",
      action: "delete"
    });
    if (result.success) {
      this.clientIdCache.delete(file.path);
      console.log("[MarkdownBrain] \u2713 File deletion synced:", file.path);
    } else {
      console.error("[MarkdownBrain] \u2717 File deletion sync failed:", file.path, result.error);
    }
  }
  async handleFileRename(file, oldPath) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping rename:", oldPath, "->", file.path);
      return;
    }
    console.log("[MarkdownBrain] File rename detected:", {
      oldPath,
      newPath: file.path,
      extension: file.extension
    });
    const cachedClientId = this.clientIdCache.get(oldPath);
    if (cachedClientId) {
      this.clientIdCache.delete(oldPath);
      this.clientIdCache.set(file.path, cachedClientId);
    }
    try {
      console.log("[MarkdownBrain] Syncing rename with frontmatter UUID");
      await this.performSync(file, "modify");
      console.log("[MarkdownBrain] \u2713 File rename synced:", oldPath, "->", file.path);
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 Rename sync exception:", {
        oldPath,
        newPath: file.path,
        error,
        errorMessage: error instanceof Error ? error.message : "Unknown error"
      });
      new import_obsidian2.Notice(`\u91CD\u547D\u540D\u540C\u6B65\u9519\u8BEF: ${error instanceof Error ? error.message : "Unknown error"}`);
    }
  }
  async handleResourceChange(file, action) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping resource:", file.path);
      return;
    }
    const existingTimer = this.syncDebounceTimers.get(file.path);
    if (existingTimer) {
      clearTimeout(existingTimer);
    }
    const timer = setTimeout(async () => {
      this.syncDebounceTimers.delete(file.path);
      await this.performResourceSync(file, action);
    }, 500);
    this.syncDebounceTimers.set(file.path, timer);
  }
  async performResourceSync(file, action) {
    console.log("[MarkdownBrain] Resource change detected:", {
      path: file.path,
      action,
      extension: file.extension,
      size: file.stat.size
    });
    try {
      const buffer = await this.app.vault.readBinary(file);
      const content = await arrayBufferToBase64(buffer);
      const sha256 = await sha256Hash(buffer);
      const syncData = {
        path: file.path,
        content,
        contentType: getContentType(file.extension),
        sha256,
        sizeBytes: buffer.byteLength,
        action
      };
      const result = await this.syncManager.syncResource(syncData);
      if (result.success) {
        console.log("[MarkdownBrain] \u2713 Resource synced successfully:", file.path);
      } else {
        console.error("[MarkdownBrain] \u2717 Resource sync failed:", file.path, result.error);
        new import_obsidian2.Notice(`\u8D44\u6E90\u540C\u6B65\u5931\u8D25: ${file.path}
${result.error}`);
      }
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 Resource sync exception:", {
        path: file.path,
        error: error instanceof Error ? error.message : "Unknown error"
      });
      new import_obsidian2.Notice(`\u8D44\u6E90\u540C\u6B65\u9519\u8BEF: ${error instanceof Error ? error.message : "Unknown error"}`);
    }
  }
  async handleResourceDelete(file) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping resource delete:", file.path);
      return;
    }
    console.log("[MarkdownBrain] Resource deletion detected:", file.path);
    const result = await this.syncManager.syncResource({
      path: file.path,
      contentType: getContentType(file.extension),
      action: "delete"
    });
    if (result.success) {
      console.log("[MarkdownBrain] \u2713 Resource deletion synced:", file.path);
    } else {
      console.error("[MarkdownBrain] \u2717 Resource deletion sync failed:", file.path, result.error);
    }
  }
  async handleResourceRename(file, oldPath) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping resource rename:", oldPath, "->", file.path);
      return;
    }
    console.log("[MarkdownBrain] Resource rename detected:", oldPath, "->", file.path);
    await this.syncManager.syncResource({
      path: oldPath,
      contentType: getContentType(file.extension),
      action: "delete"
    });
    await this.performResourceSync(file, "upsert");
  }
  /**
   * 全量同步所有文件
   * @flow 收集 IDs → 清理孤儿 → 增量同步
   * @complexity O(n) where n = 文件数量
   */
  async syncAllFiles() {
    const files = this.app.vault.getMarkdownFiles();
    console.log(`[MarkdownBrain] Starting full sync for ${files.length} files`);
    new import_obsidian2.Notice(`\u5F00\u59CB\u5168\u91CF\u540C\u6B65 ${files.length} \u4E2A\u6587\u4EF6...`);
    const clientIds = await this.collectClientIds(files);
    console.log(`[MarkdownBrain] Collected ${clientIds.length} client IDs`);
    await this.cleanupOrphans(clientIds);
    await this.incrementalSyncBatch(files);
  }
  /**
   * 收集所有文件的 client_ids
   * @complexity O(n) time, O(n) space
   */
  async collectClientIds(files) {
    const ids = [];
    for (const file of files) {
      try {
        const content = await this.app.vault.read(file);
        if ((content == null ? void 0 : content.trim().length) > 0) {
          ids.push(await getOrCreateClientId(file, content, this.app));
        }
      } catch (error) {
        console.error(`[MarkdownBrain] Failed to read ${file.path}:`, error);
      }
    }
    return ids;
  }
  /**
   * 清理孤儿笔记
   * @complexity O(1) - 单次网络请求
   */
  async cleanupOrphans(clientIds) {
    var _a;
    try {
      const result = await this.syncManager.fullSync(clientIds);
      const deleted = ((_a = result.data) == null ? void 0 : _a["deleted-count"]) || 0;
      if (deleted > 0) {
        console.log(`[MarkdownBrain] \u2713 Cleaned ${deleted} orphan notes`);
        new import_obsidian2.Notice(`\u6E05\u7406\u4E86 ${deleted} \u4E2A\u5B64\u513F\u7B14\u8BB0`);
      } else if (result.success) {
        console.log("[MarkdownBrain] \u2713 No orphan notes found");
      }
    } catch (error) {
      console.error("[MarkdownBrain] Full sync error:", error);
    }
  }
  /**
   * 批量增量同步
   * @complexity O(n) with batching
   */
  async incrementalSyncBatch(files) {
    const stats = { success: 0, failed: 0, skipped: 0 };
    const batchSize = 10;
    for (let i = 0; i < files.length; i += batchSize) {
      const batch = files.slice(i, i + batchSize);
      await Promise.all(batch.map((file) => this.syncOneFile(file, stats)));
      const progress = Math.min(i + batchSize, files.length);
      new import_obsidian2.Notice(`\u540C\u6B65\u8FDB\u5EA6: ${progress}/${files.length} (\u6210\u529F: ${stats.success}, \u5931\u8D25: ${stats.failed}, \u8DF3\u8FC7: ${stats.skipped})`);
    }
    const finalMsg = `\u540C\u6B65\u5B8C\u6210! \u603B\u8BA1: ${files.length}, \u6210\u529F: ${stats.success}, \u5931\u8D25: ${stats.failed}, \u8DF3\u8FC7: ${stats.skipped}`;
    console.log(`[MarkdownBrain] ${finalMsg}`);
    new import_obsidian2.Notice(finalMsg, 8e3);
  }
  /**
   * 同步单个文件
   */
  async syncOneFile(file, stats) {
    try {
      await this.performSync(file, "modify");
      stats.success++;
    } catch (error) {
      stats.failed++;
      console.error(`[MarkdownBrain] \u2717 Failed to sync ${file.path}:`, error);
    }
  }
  // MD5 哈希函数（用于检测文件内容变化）
  async hashString(str) {
    const encoder = new TextEncoder();
    const data = encoder.encode(str);
    const hashBuffer = await crypto.subtle.digest("MD5", data).catch(() => {
      return crypto.subtle.digest("SHA-256", data);
    });
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    return hashArray.map((b) => b.toString(16).padStart(2, "0")).join("");
  }
  onunload() {
    console.log("Unloading MarkdownBrain plugin");
    for (const timer of this.syncDebounceTimers.values()) {
      clearTimeout(timer);
    }
    this.syncDebounceTimers.clear();
    this.syncManager.destroy();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.syncManager.updateConfig({
      serverUrl: this.settings.serverUrl,
      syncKey: this.settings.syncKey
    });
  }
};
var MarkdownBrainSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "MarkdownBrain \u540C\u6B65\u8BBE\u7F6E" });
    new import_obsidian2.Setting(containerEl).setName("\u670D\u52A1\u5668\u5730\u5740").setDesc("MarkdownBrain \u670D\u52A1\u5668 API \u5730\u5740").addText((text) => text.setPlaceholder("https://api.markdownbrain.com").setValue(this.plugin.settings.serverUrl).onChange(async (value) => {
      this.plugin.settings.serverUrl = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("Sync Key").setDesc("\u4ECE\u7BA1\u7406\u540E\u53F0\u83B7\u53D6\u7684\u540C\u6B65\u5BC6\u94A5").addText((text) => text.setPlaceholder("xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx").setValue(this.plugin.settings.syncKey).onChange(async (value) => {
      this.plugin.settings.syncKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("\u6D4B\u8BD5\u8FDE\u63A5").setDesc("\u6D4B\u8BD5\u4E0E\u670D\u52A1\u5668\u7684\u8FDE\u63A5\uFF0830\u79D2\u8D85\u65F6\uFF09").addButton((button) => button.setButtonText("\u6D4B\u8BD5").onClick(async () => {
      button.setDisabled(true);
      button.setButtonText("\u6D4B\u8BD5\u4E2D...");
      new import_obsidian2.Notice("\u6B63\u5728\u6D4B\u8BD5\u8FDE\u63A5...");
      const result = await this.plugin.syncManager.testConnection(3e4);
      button.setDisabled(false);
      button.setButtonText("\u6D4B\u8BD5");
      if (result.success && result.vaultInfo) {
        new import_obsidian2.Notice(
          `\u2705 \u8FDE\u63A5\u6210\u529F\uFF01
Vault: ${result.vaultInfo.name}
Domain: ${result.vaultInfo.domain}`,
          5e3
        );
      } else {
        new import_obsidian2.Notice(`\u274C \u8FDE\u63A5\u5931\u8D25: ${result.error || "Unknown error"}`, 5e3);
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("\u6279\u91CF\u540C\u6B65").setDesc("\u624B\u52A8\u540C\u6B65\u6240\u6709 Markdown \u6587\u4EF6\u5230\u670D\u52A1\u5668").addButton((button) => button.setButtonText("\u5F00\u59CB\u540C\u6B65").onClick(async () => {
      button.setDisabled(true);
      button.setButtonText("\u540C\u6B65\u4E2D...");
      await this.plugin.syncAllFiles();
      button.setDisabled(false);
      button.setButtonText("\u5F00\u59CB\u540C\u6B65");
    }));
    new import_obsidian2.Setting(containerEl).setName("\u81EA\u52A8\u540C\u6B65").setDesc("\u6587\u4EF6\u4FEE\u6539\u65F6\u81EA\u52A8\u540C\u6B65\u5230\u670D\u52A1\u5668").addToggle((toggle) => toggle.setValue(this.plugin.settings.autoSync).onChange(async (value) => {
      this.plugin.settings.autoSync = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vLi4vLi4vb2JzaWRpYW4tcGx1Z2luL3NyYy9tYWluLnRzIiwgIi4uLy4uLy4uLy4uLy4uL29ic2lkaWFuLXBsdWdpbi9zcmMvY29yZS9jbGllbnQtaWQudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEFwcCwgTm90aWNlLCBQbHVnaW4sIFBsdWdpbk1hbmlmZXN0LCBQbHVnaW5TZXR0aW5nVGFiLCByZXF1ZXN0VXJsLCBTZXR0aW5nLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IENMSUVOVF9JRF9LRVksIGdldE9yQ3JlYXRlQ2xpZW50SWQgfSBmcm9tICcuL2NvcmUvY2xpZW50LWlkJztcblxuaW50ZXJmYWNlIE1hcmtkb3duQnJhaW5TZXR0aW5ncyB7XG4gICAgc2VydmVyVXJsOiBzdHJpbmc7XG4gICAgc3luY0tleTogc3RyaW5nO1xuICAgIGF1dG9TeW5jOiBib29sZWFuO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNYXJrZG93bkJyYWluU2V0dGluZ3MgPSB7XG4gICAgc2VydmVyVXJsOiAnaHR0cHM6Ly9hcGkubWFya2Rvd25icmFpbi5jb20nLFxuICAgIHN5bmNLZXk6ICcnLFxuICAgIGF1dG9TeW5jOiB0cnVlXG59O1xuXG4vLyBcdTU0MENcdTZCNjVcdTkxNERcdTdGNkVcbmludGVyZmFjZSBTeW5jQ29uZmlnIHtcbiAgICBzZXJ2ZXJVcmw6IHN0cmluZztcbiAgICBzeW5jS2V5OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBOb3RlTWV0YWRhdGEge1xuICAgIHRhZ3M/OiBBcnJheTx7XG4gICAgICAgIHRhZzogc3RyaW5nO1xuICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgICAgc3RhcnQ6IHsgbGluZTogbnVtYmVyOyBjb2w6IG51bWJlcjsgb2Zmc2V0OiBudW1iZXIgfTtcbiAgICAgICAgICAgIGVuZDogeyBsaW5lOiBudW1iZXI7IGNvbDogbnVtYmVyOyBvZmZzZXQ6IG51bWJlciB9O1xuICAgICAgICB9O1xuICAgIH0+O1xuICAgIGhlYWRpbmdzPzogQXJyYXk8e1xuICAgICAgICBoZWFkaW5nOiBzdHJpbmc7XG4gICAgICAgIGxldmVsOiBudW1iZXI7XG4gICAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgICAgICBzdGFydDogeyBsaW5lOiBudW1iZXI7IGNvbDogbnVtYmVyOyBvZmZzZXQ6IG51bWJlciB9O1xuICAgICAgICAgICAgZW5kOiB7IGxpbmU6IG51bWJlcjsgY29sOiBudW1iZXI7IG9mZnNldDogbnVtYmVyIH07XG4gICAgICAgIH07XG4gICAgfT47XG4gICAgZnJvbnRtYXR0ZXI/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xufVxuXG4vLyBcdTU0MENcdTZCNjVcdTY1NzBcdTYzNkVcbmludGVyZmFjZSBTeW5jRGF0YSB7XG4gICAgcGF0aDogc3RyaW5nO1xuICAgIGNsaWVudElkOiBzdHJpbmc7ICAgICAgICAgICAvLyBcdTVCQTJcdTYyMzdcdTdBRUZcdTc1MUZcdTYyMTBcdTc2ODRcdTU1MkZcdTRFMDAgSURcbiAgICBjbGllbnRUeXBlOiBzdHJpbmc7ICAgICAgICAgLy8gXHU1QkEyXHU2MjM3XHU3QUVGXHU3QzdCXHU1NzhCXHVGRjFBJ29ic2lkaWFuJ1xuICAgIGNvbnRlbnQ/OiBzdHJpbmc7XG4gICAgaGFzaD86IHN0cmluZztcbiAgICBtdGltZT86IHN0cmluZztcbiAgICBtZXRhZGF0YT86IE5vdGVNZXRhZGF0YTtcbiAgICBhY3Rpb246ICdjcmVhdGUnIHwgJ21vZGlmeScgfCAnZGVsZXRlJztcbn1cblxuLy8gVmF1bHQgXHU0RkUxXHU2MDZGXG5pbnRlcmZhY2UgVmF1bHRJbmZvIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBkb21haW46IHN0cmluZztcbiAgICAnY3JlYXRlZC1hdCc6IHN0cmluZztcbn1cblxuLy8gRnVsbCBTeW5jIFx1OEJGN1x1NkM0MlxuaW50ZXJmYWNlIEZ1bGxTeW5jUmVxdWVzdCB7XG4gICAgY2xpZW50SWRzOiBzdHJpbmdbXTtcbn1cblxuLy8gRnVsbCBTeW5jIFx1NTRDRFx1NUU5NFxuaW50ZXJmYWNlIEZ1bGxTeW5jUmVzcG9uc2Uge1xuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XG4gICAgZGF0YT86IHtcbiAgICAgICAgJ3ZhdWx0LWlkJzogc3RyaW5nO1xuICAgICAgICBhY3Rpb246IHN0cmluZztcbiAgICAgICAgJ2NsaWVudC1ub3Rlcyc6IG51bWJlcjtcbiAgICAgICAgJ2RlbGV0ZWQtY291bnQnOiBudW1iZXI7XG4gICAgICAgICdyZW1haW5pbmctbm90ZXMnOiBudW1iZXI7XG4gICAgfTtcbiAgICBlcnJvcj86IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIFJlc291cmNlU3luY0RhdGEge1xuICAgIHBhdGg6IHN0cmluZztcbiAgICBjb250ZW50Pzogc3RyaW5nO1xuICAgIGNvbnRlbnRUeXBlOiBzdHJpbmc7XG4gICAgc2hhMjU2Pzogc3RyaW5nO1xuICAgIHNpemVCeXRlcz86IG51bWJlcjtcbiAgICBhY3Rpb246ICd1cHNlcnQnIHwgJ2RlbGV0ZSc7XG59XG5cbmNvbnN0IFJFU09VUkNFX0VYVEVOU0lPTlMgPSBuZXcgU2V0KFtcbiAgICAncG5nJywgJ2pwZycsICdqcGVnJywgJ2dpZicsICd3ZWJwJywgJ3N2ZycsICdibXAnLCAnaWNvJyxcbiAgICAncGRmJyxcbiAgICAnbXAzJywgJ29nZycsICd3YXYnLFxuICAgICdtcDQnLCAnd2VibSdcbl0pO1xuXG5mdW5jdGlvbiBpc1Jlc291cmNlRmlsZShmaWxlOiBURmlsZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBSRVNPVVJDRV9FWFRFTlNJT05TLmhhcyhmaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpKTtcbn1cblxuZnVuY3Rpb24gZ2V0Q29udGVudFR5cGUoZXh0ZW5zaW9uOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGV4dCA9IGV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IG1pbWVUeXBlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICAgJ3BuZyc6ICdpbWFnZS9wbmcnLFxuICAgICAgICAnanBnJzogJ2ltYWdlL2pwZWcnLFxuICAgICAgICAnanBlZyc6ICdpbWFnZS9qcGVnJyxcbiAgICAgICAgJ2dpZic6ICdpbWFnZS9naWYnLFxuICAgICAgICAnd2VicCc6ICdpbWFnZS93ZWJwJyxcbiAgICAgICAgJ3N2Zyc6ICdpbWFnZS9zdmcreG1sJyxcbiAgICAgICAgJ2JtcCc6ICdpbWFnZS9ibXAnLFxuICAgICAgICAnaWNvJzogJ2ltYWdlL3gtaWNvbicsXG4gICAgICAgICdwZGYnOiAnYXBwbGljYXRpb24vcGRmJyxcbiAgICAgICAgJ21wMyc6ICdhdWRpby9tcGVnJyxcbiAgICAgICAgJ29nZyc6ICdhdWRpby9vZ2cnLFxuICAgICAgICAnd2F2JzogJ2F1ZGlvL3dhdicsXG4gICAgICAgICdtcDQnOiAndmlkZW8vbXA0JyxcbiAgICAgICAgJ3dlYm0nOiAndmlkZW8vd2VibSdcbiAgICB9O1xuICAgIHJldHVybiBtaW1lVHlwZXNbZXh0XSB8fCAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJztcbn1cblxuYXN5bmMgZnVuY3Rpb24gYXJyYXlCdWZmZXJUb0Jhc2U2NChidWZmZXI6IEFycmF5QnVmZmVyKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgbGV0IGJpbmFyeSA9ICcnO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnl0ZXMuYnl0ZUxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGJpbmFyeSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ0b2EoYmluYXJ5KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gc2hhMjU2SGFzaChidWZmZXI6IEFycmF5QnVmZmVyKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBoYXNoQnVmZmVyID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5kaWdlc3QoJ1NIQS0yNTYnLCBidWZmZXIpO1xuICAgIGNvbnN0IGhhc2hBcnJheSA9IEFycmF5LmZyb20obmV3IFVpbnQ4QXJyYXkoaGFzaEJ1ZmZlcikpO1xuICAgIHJldHVybiBoYXNoQXJyYXkubWFwKGIgPT4gYi50b1N0cmluZygxNikucGFkU3RhcnQoMiwgJzAnKSkuam9pbignJyk7XG59XG5cbi8vIFx1NTQwQ1x1NkI2NVx1N0VERlx1OEJBMVxuaW50ZXJmYWNlIFN5bmNTdGF0cyB7XG4gICAgc3VjY2VzczogbnVtYmVyO1xuICAgIGZhaWxlZDogbnVtYmVyO1xuICAgIHNraXBwZWQ6IG51bWJlcjtcbn1cblxuLy8gXHU1NDBDXHU2QjY1XHU3QkExXHU3NDA2XHU1NjY4XG5jbGFzcyBTeW5jTWFuYWdlciB7XG4gICAgcHJpdmF0ZSBjb25maWc6IFN5bmNDb25maWc7XG5cbiAgICBjb25zdHJ1Y3Rvcihjb25maWc6IFN5bmNDb25maWcpIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgfVxuXG4gICAgdXBkYXRlQ29uZmlnKGNvbmZpZzogU3luY0NvbmZpZykge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB9XG5cbiAgICBhc3luYyB0ZXN0Q29ubmVjdGlvbih0aW1lb3V0OiBudW1iZXIgPSAzMDAwMCk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyB2YXVsdEluZm8/OiBWYXVsdEluZm87IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgdGltZW91dCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgICAgICAgICAgdXJsOiBgJHt0aGlzLmNvbmZpZy5zZXJ2ZXJVcmx9L29ic2lkaWFuL3ZhdWx0L2luZm9gLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLmNvbmZpZy5zeW5jS2V5fWBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRocm93OiBmYWxzZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuanNvbjtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2YXVsdEluZm86IGRhdGEudmF1bHRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS50ZXh0IHx8ICdVbmtub3duIGVycm9yJ31gXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICAgICAgaWYgKGVycm9yPy5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICdcdThGREVcdTYzQTVcdThEODVcdTY1RjZcdUZGMDgzMFx1NzlEMlx1RkYwOSdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBzeW5jKGRhdGE6IFN5bmNEYXRhKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBTdGFydGluZyBzeW5jOicsIHtcbiAgICAgICAgICAgIHBhdGg6IGRhdGEucGF0aCxcbiAgICAgICAgICAgIGFjdGlvbjogZGF0YS5hY3Rpb24sXG4gICAgICAgICAgICBoYXNDb250ZW50OiAhIWRhdGEuY29udGVudCxcbiAgICAgICAgICAgIGNvbnRlbnRMZW5ndGg6IGRhdGEuY29udGVudD8ubGVuZ3RoLFxuICAgICAgICAgICAgc2VydmVyVXJsOiB0aGlzLmNvbmZpZy5zZXJ2ZXJVcmwsXG4gICAgICAgICAgICBoYXNTeW5jS2V5OiAhIXRoaXMuY29uZmlnLnN5bmNLZXlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFJlcXVlc3QgYm9keSBzaXplOicsIHJlcXVlc3RCb2R5Lmxlbmd0aCwgJ2J5dGVzJyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgICAgICAgICAgdXJsOiBgJHt0aGlzLmNvbmZpZy5zZXJ2ZXJVcmx9L29ic2lkaWFuL3N5bmNgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5jb25maWcuc3luY0tleX1gXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0Qm9keSxcbiAgICAgICAgICAgICAgICB0aHJvdzogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFJlc3BvbnNlOicsIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogcmVzcG9uc2UuaGVhZGVycyxcbiAgICAgICAgICAgICAgICBib2R5UHJldmlldzogcmVzcG9uc2UudGV4dD8uc3Vic3RyaW5nKDAsIDIwMClcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFx1MjcxMyBTeW5jIHN1Y2Nlc3NmdWw6JywgZGF0YS5wYXRoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnRleHQgfHwgJ1N5bmMgZmFpbGVkJ31gO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZG93bkJyYWluXSBcdTI3MTcgU3luYyBmYWlsZWQ6Jywge1xuICAgICAgICAgICAgICAgICAgICBwYXRoOiBkYXRhLnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JNc2csXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlQm9keTogcmVzcG9uc2UudGV4dFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JNc2dcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW01hcmtkb3duQnJhaW5dIFx1MjcxNyBTeW5jIGV4Y2VwdGlvbjonLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogZGF0YS5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFx1NTE2OFx1OTFDRlx1NTQwQ1x1NkI2NSAtIFx1NkUwNVx1NzQwNlx1NUI2NFx1NTEzRlx1N0IxNFx1OEJCMFxuICAgICAqIEBwYXJhbSBjbGllbnRJZHMgXHU1QkEyXHU2MjM3XHU3QUVGXHU2MjQwXHU2NzA5XHU3QjE0XHU4QkIwXHU3Njg0IGNsaWVudF9pZHMgXHU1MjE3XHU4ODY4XG4gICAgICogQHJldHVybnMgXHU1MzA1XHU1NDJCXHU1MjIwXHU5NjY0XHU2NTcwXHU5MUNGXHU3Njg0XHU1NENEXHU1RTk0XG4gICAgICogQGNvbXBsZXhpdHkgTygxKSAtIFx1NTM1NVx1NkIyMVx1N0Y1MVx1N0VEQ1x1OEJGN1x1NkM0MlxuICAgICAqIEBjb21wYXRpYmlsaXR5IFx1OTY0RFx1N0VBN1x1NTkwNFx1NzQwNiAtIFx1NTk4Mlx1Njc5Q1x1NjcwRFx1NTJBMVx1NTY2OFx1OEZENFx1NTZERSA0MDRcdUZGMENcdTg5QzZcdTRFM0FcdTYyMTBcdTUyOUZcdUZGMDhcdTY1RTdcdTY3MERcdTUyQTFcdTU2NjhcdUZGMDlcbiAgICAgKi9cbiAgICBhc3luYyBmdWxsU3luYyhjbGllbnRJZHM6IHN0cmluZ1tdKTogUHJvbWlzZTxGdWxsU3luY1Jlc3BvbnNlPiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gU3RhcnRpbmcgZnVsbCBzeW5jLi4uJywge1xuICAgICAgICAgICAgY2xpZW50Tm90ZUNvdW50OiBjbGllbnRJZHMubGVuZ3RoXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0Qm9keTogRnVsbFN5bmNSZXF1ZXN0ID0geyBjbGllbnRJZHMgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgICAgICAgICAgdXJsOiBgJHt0aGlzLmNvbmZpZy5zZXJ2ZXJVcmx9L29ic2lkaWFuL3N5bmMvZnVsbGAsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLmNvbmZpZy5zeW5jS2V5fWBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KSxcbiAgICAgICAgICAgICAgICB0aHJvdzogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBcdTU0MTFcdTU0MEVcdTUxN0NcdTVCQjlcdUZGMUFcdTY1RTdcdTY3MERcdTUyQTFcdTU2NjhcdTRFMERcdTY1MkZcdTYzMDEgZnVsbC1zeW5jICg0MDQpXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tNYXJrZG93bkJyYWluXSBGdWxsIHN5bmMgbm90IHN1cHBvcnRlZCBieSBzZXJ2ZXIgKDQwNCksIHNraXBwaW5nIG9ycGhhbiBjbGVhbnVwJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3ZhdWx0LWlkJzogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdmdWxsLXN5bmMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2NsaWVudC1ub3Rlcyc6IGNsaWVudElkcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGVsZXRlZC1jb3VudCc6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAncmVtYWluaW5nLW5vdGVzJzogY2xpZW50SWRzLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmpzb247XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBcdTI3MTMgRnVsbCBzeW5jIHN1Y2Nlc3NmdWw6Jywge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVkQ291bnQ6IGRhdGFbJ2RlbGV0ZWQtY291bnQnXSxcbiAgICAgICAgICAgICAgICAgICAgcmVtYWluaW5nTm90ZXM6IGRhdGFbJ3JlbWFpbmluZy1ub3RlcyddXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnRleHQgfHwgJ0Z1bGwgc3luYyBmYWlsZWQnfWA7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW01hcmtkb3duQnJhaW5dIFx1MjcxNyBGdWxsIHN5bmMgZmFpbGVkOicsIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvck1zZ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JNc2dcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZG93bkJyYWluXSBcdTI3MTcgRnVsbCBzeW5jIGV4Y2VwdGlvbjonLCB7XG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yTXNnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yTXNnXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgc3luY1Jlc291cmNlKGRhdGE6IFJlc291cmNlU3luY0RhdGEpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFN0YXJ0aW5nIHJlc291cmNlIHN5bmM6Jywge1xuICAgICAgICAgICAgcGF0aDogZGF0YS5wYXRoLFxuICAgICAgICAgICAgYWN0aW9uOiBkYXRhLmFjdGlvbixcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBkYXRhLmNvbnRlbnRUeXBlLFxuICAgICAgICAgICAgc2l6ZUJ5dGVzOiBkYXRhLnNpemVCeXRlc1xuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgICAgICB1cmw6IGAke3RoaXMuY29uZmlnLnNlcnZlclVybH0vb2JzaWRpYW4vcmVzb3VyY2VzL3N5bmNgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5jb25maWcuc3luY0tleX1gXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgICAgICAgICAgICB0aHJvdzogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFx1MjcxMyBSZXNvdXJjZSBzeW5jIHN1Y2Nlc3NmdWw6JywgZGF0YS5wYXRoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnRleHQgfHwgJ1Jlc291cmNlIHN5bmMgZmFpbGVkJ31gO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZG93bkJyYWluXSBcdTI3MTcgUmVzb3VyY2Ugc3luYyBmYWlsZWQ6Jywge1xuICAgICAgICAgICAgICAgICAgICBwYXRoOiBkYXRhLnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JNc2dcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yTXNnIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbTWFya2Rvd25CcmFpbl0gXHUyNzE3IFJlc291cmNlIHN5bmMgZXhjZXB0aW9uOicsIHtcbiAgICAgICAgICAgICAgICBwYXRoOiBkYXRhLnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgLy8gQ2xlYW51cCBpZiBuZWVkZWRcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hcmtkb3duQnJhaW5QbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzITogTWFya2Rvd25CcmFpblNldHRpbmdzO1xuICAgIHN5bmNNYW5hZ2VyITogU3luY01hbmFnZXI7XG4gICAgcHJpdmF0ZSBzeW5jRGVib3VuY2VUaW1lcnM6IE1hcDxzdHJpbmcsIE5vZGVKUy5UaW1lb3V0PjtcbiAgICBwcml2YXRlIHBlbmRpbmdTeW5jczogU2V0PHN0cmluZz47XG4gICAgcHJpdmF0ZSBjbGllbnRJZENhY2hlOiBNYXA8c3RyaW5nLCBzdHJpbmc+O1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG1hbmlmZXN0OiBQbHVnaW5NYW5pZmVzdCkge1xuICAgICAgICBzdXBlcihhcHAsIG1hbmlmZXN0KTtcbiAgICAgICAgdGhpcy5zeW5jRGVib3VuY2VUaW1lcnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMucGVuZGluZ1N5bmNzID0gbmV3IFNldCgpO1xuICAgICAgICB0aGlzLmNsaWVudElkQ2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBQbHVnaW4gbG9hZGluZy4uLicpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBTZXR0aW5ncyBsb2FkZWQ6Jywge1xuICAgICAgICAgICAgc2VydmVyVXJsOiB0aGlzLnNldHRpbmdzLnNlcnZlclVybCxcbiAgICAgICAgICAgIGhhc1N5bmNLZXk6ICEhdGhpcy5zZXR0aW5ncy5zeW5jS2V5LFxuICAgICAgICAgICAgc3luY0tleUxlbmd0aDogdGhpcy5zZXR0aW5ncy5zeW5jS2V5Py5sZW5ndGgsXG4gICAgICAgICAgICBhdXRvU3luYzogdGhpcy5zZXR0aW5ncy5hdXRvU3luY1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTUyMURcdTU5Q0JcdTUzMTZcdTU0MENcdTZCNjVcdTdCQTFcdTc0MDZcdTU2NjhcbiAgICAgICAgdGhpcy5zeW5jTWFuYWdlciA9IG5ldyBTeW5jTWFuYWdlcih7XG4gICAgICAgICAgICBzZXJ2ZXJVcmw6IHRoaXMuc2V0dGluZ3Muc2VydmVyVXJsLFxuICAgICAgICAgICAgc3luY0tleTogdGhpcy5zZXR0aW5ncy5zeW5jS2V5XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFN5bmNNYW5hZ2VyIGluaXRpYWxpemVkJyk7XG5cbiAgICAgICAgLy8gXHU3NkQxXHU1NDJDXHU2NTg3XHU0RUY2XHU1MjFCXHU1RUZBXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0Lm9uKCdjcmVhdGUnLCAoZmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUZpbGVDaGFuZ2UoZmlsZSwgJ2NyZWF0ZScpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlzUmVzb3VyY2VGaWxlKGZpbGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJlc291cmNlQ2hhbmdlKGZpbGUsICd1cHNlcnQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gUmVnaXN0ZXJlZCBldmVudDogZmlsZSBjcmVhdGUnKTtcblxuICAgICAgICAvLyBcdTc2RDFcdTU0MkNcdTY1ODdcdTRFRjZcdTRGRUVcdTY1MzlcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oJ21vZGlmeScsIChmaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZS5leHRlbnNpb24gPT09ICdtZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ1N5bmNzLmFkZChmaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlzUmVzb3VyY2VGaWxlKGZpbGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJlc291cmNlQ2hhbmdlKGZpbGUsICd1cHNlcnQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gUmVnaXN0ZXJlZCBldmVudDogZmlsZSBtb2RpZnknKTtcblxuICAgICAgICAvLyBcdTc2RDFcdTU0MkNcdTUxNDNcdTY1NzBcdTYzNkVcdTdGMTNcdTVCNThcdTY2RjRcdTY1QjBcdTVCOENcdTYyMTBcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5vbigncmVzb2x2ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gbWV0YWRhdGFDYWNoZSBcdTVERjJcdTg5RTNcdTY3OTBcdTVCOENcdTYyMTBcdUZGMENcdTU5MDRcdTc0MDZcdTYyNDBcdTY3MDlcdTVGODVcdTU0MENcdTZCNjVcdTc2ODRcdTY1ODdcdTRFRjZcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGVQYXRoIG9mIHRoaXMucGVuZGluZ1N5bmNzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUZpbGVDaGFuZ2UoZmlsZSwgJ21vZGlmeScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ1N5bmNzLmNsZWFyKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFJlZ2lzdGVyZWQgZXZlbnQ6IG1ldGFkYXRhIHJlc29sdmVkJyk7XG5cbiAgICAgICAgLy8gXHU3NkQxXHU1NDJDXHU2NTg3XHU0RUY2XHU1MjIwXHU5NjY0XG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0Lm9uKCdkZWxldGUnLCAoZmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUZpbGVEZWxldGUoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNvdXJjZUZpbGUoZmlsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmVzb3VyY2VEZWxldGUoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFJlZ2lzdGVyZWQgZXZlbnQ6IGZpbGUgZGVsZXRlJyk7XG5cbiAgICAgICAgLy8gXHU3NkQxXHU1NDJDXHU2NTg3XHU0RUY2XHU5MUNEXHU1NDdEXHU1NDBEXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0Lm9uKCdyZW5hbWUnLCAoZmlsZSwgb2xkUGF0aCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUZpbGVSZW5hbWUoZmlsZSwgb2xkUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNvdXJjZUZpbGUoZmlsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmVzb3VyY2VSZW5hbWUoZmlsZSwgb2xkUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFJlZ2lzdGVyZWQgZXZlbnQ6IGZpbGUgcmVuYW1lJyk7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU4QkJFXHU3RjZFXHU5NzYyXHU2NzdGXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgTWFya2Rvd25CcmFpblNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBTZXR0aW5ncyB0YWIgYWRkZWQnKTtcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTU0N0RcdTRFRTRcdUZGMUFcdTYyNEJcdTUyQThcdTU0MENcdTZCNjVcdTVGNTNcdTUyNERcdTY1ODdcdTRFRjZcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnc3luYy1jdXJyZW50LWZpbGUnLFxuICAgICAgICAgICAgbmFtZTogJ1N5bmMgY3VycmVudCBmaWxlJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVGaWxlQ2hhbmdlKGZpbGUsICdtb2RpZnknKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTQ3RFx1NEVFNFx1RkYxQVx1NTQwQ1x1NkI2NVx1NjI0MFx1NjcwOVx1NjU4N1x1NEVGNlxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdzeW5jLWFsbC1maWxlcycsXG4gICAgICAgICAgICBuYW1lOiAnU3luYyBhbGwgZmlsZXMnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN5bmNBbGxGaWxlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBDb21tYW5kcyByZWdpc3RlcmVkJyk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5idWlsZENsaWVudElkQ2FjaGUoKTtcblxuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFx1MjcxMyBQbHVnaW4gbG9hZGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGJ1aWxkQ2xpZW50SWRDYWNoZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGxldCBjYWNoZWQgPSAwO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICAgICAgY29uc3QgY2xpZW50SWQgPSBjYWNoZT8uZnJvbnRtYXR0ZXI/LltDTElFTlRfSURfS0VZXTtcbiAgICAgICAgICAgIGlmIChjbGllbnRJZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50SWRDYWNoZS5zZXQoZmlsZS5wYXRoLCBTdHJpbmcoY2xpZW50SWQpLnRyaW0oKSk7XG4gICAgICAgICAgICAgICAgY2FjaGVkKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGBbTWFya2Rvd25CcmFpbl0gQ2xpZW50SWQgY2FjaGUgYnVpbHQ6ICR7Y2FjaGVkfS8ke2ZpbGVzLmxlbmd0aH0gZmlsZXNgKTtcbiAgICB9XG5cbiAgICBhc3luYyBoYW5kbGVGaWxlQ2hhbmdlKGZpbGU6IFRGaWxlLCBhY3Rpb246ICdjcmVhdGUnIHwgJ21vZGlmeScpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmF1dG9TeW5jKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIEF1dG8tc3luYyBkaXNhYmxlZCwgc2tpcHBpbmc6JywgZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1NkUwNVx1OTY2NFx1NEU0Qlx1NTI0RFx1NzY4NFx1OTYzMlx1NjI5Nlx1NUI5QVx1NjVGNlx1NTY2OFxuICAgICAgICBjb25zdCBleGlzdGluZ1RpbWVyID0gdGhpcy5zeW5jRGVib3VuY2VUaW1lcnMuZ2V0KGZpbGUucGF0aCk7XG4gICAgICAgIGlmIChleGlzdGluZ1RpbWVyKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoZXhpc3RpbmdUaW1lcik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTRGN0ZcdTc1MjhcdTk2MzJcdTYyOTZcdTkwN0ZcdTUxNERcdTVGRUJcdTkwMUZcdThGREVcdTdFRURcdTc2ODRcdTU0MENcdTZCNjVcbiAgICAgICAgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3luY0RlYm91bmNlVGltZXJzLmRlbGV0ZShmaWxlLnBhdGgpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wZXJmb3JtU3luYyhmaWxlLCBhY3Rpb24pO1xuICAgICAgICB9LCAzMDApOyAvLyAzMDBtcyBcdTk2MzJcdTYyOTZcblxuICAgICAgICB0aGlzLnN5bmNEZWJvdW5jZVRpbWVycy5zZXQoZmlsZS5wYXRoLCB0aW1lcik7XG4gICAgfVxuXG4gICAgYXN5bmMgcGVyZm9ybVN5bmMoZmlsZTogVEZpbGUsIGFjdGlvbjogJ2NyZWF0ZScgfCAnbW9kaWZ5Jykge1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gRmlsZSBjaGFuZ2UgZGV0ZWN0ZWQ6Jywge1xuICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICAgICAgICBleHRlbnNpb246IGZpbGUuZXh0ZW5zaW9uLFxuICAgICAgICAgICAgc2l6ZTogZmlsZS5zdGF0LnNpemVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBGaWxlIHJlYWQgc3VjY2Vzc2Z1bGx5OicsIHtcbiAgICAgICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgY29udGVudExlbmd0aDogY29udGVudC5sZW5ndGhcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBjYWNoZWRNZXRhZGF0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGE6IE5vdGVNZXRhZGF0YSA9IHt9O1xuXG4gICAgICAgICAgICBpZiAoY2FjaGVkTWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVkTWV0YWRhdGEudGFncykge1xuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YS50YWdzID0gY2FjaGVkTWV0YWRhdGEudGFncy5tYXAodGFnID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWc6IHRhZy50YWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogdGFnLnBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVkTWV0YWRhdGEuaGVhZGluZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGEuaGVhZGluZ3MgPSBjYWNoZWRNZXRhZGF0YS5oZWFkaW5ncy5tYXAoaGVhZGluZyA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGluZzogaGVhZGluZy5oZWFkaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IGhlYWRpbmcubGV2ZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogaGVhZGluZy5wb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlZE1ldGFkYXRhLmZyb250bWF0dGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhLmZyb250bWF0dGVyID0gY2FjaGVkTWV0YWRhdGEuZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBNZXRhZGF0YSBleHRyYWN0ZWQ6Jywge1xuICAgICAgICAgICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHRhZ3NDb3VudDogbWV0YWRhdGEudGFncz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRpbmdzQ291bnQ6IG1ldGFkYXRhLmhlYWRpbmdzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgaGFzRnJvbnRtYXR0ZXI6ICEhbWV0YWRhdGEuZnJvbnRtYXR0ZXJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgc3RhdCA9IGZpbGUuc3RhdDtcbiAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBhd2FpdCB0aGlzLmhhc2hTdHJpbmcoY29udGVudCk7XG4gICAgICAgICAgICBjb25zdCBtdGltZSA9IG5ldyBEYXRlKHN0YXQubXRpbWUpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgICAgICBjb25zdCBjbGllbnRJZCA9IGF3YWl0IGdldE9yQ3JlYXRlQ2xpZW50SWQoZmlsZSwgY29udGVudCwgdGhpcy5hcHApO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIEZpbGUgbWV0YWRhdGE6Jywge1xuICAgICAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgICAgICBjbGllbnRJZDogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgaGFzaDogaGFzaCxcbiAgICAgICAgICAgICAgICBtdGltZTogbXRpbWVcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBzeW5jRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgY2xpZW50SWQ6IGNsaWVudElkLFxuICAgICAgICAgICAgICAgIGNsaWVudFR5cGU6ICdvYnNpZGlhbicsXG4gICAgICAgICAgICAgICAgY29udGVudDogY29udGVudCxcbiAgICAgICAgICAgICAgICBoYXNoOiBoYXNoLFxuICAgICAgICAgICAgICAgIG10aW1lOiBtdGltZSxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YTogbWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb25cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc3luY01hbmFnZXIuc3luYyhzeW5jRGF0YSk7XG5cbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50SWRDYWNoZS5zZXQoZmlsZS5wYXRoLCBjbGllbnRJZCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBcdTI3MTMgRmlsZSBzeW5jZWQgc3VjY2Vzc2Z1bGx5OicsIGZpbGUucGF0aCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZG93bkJyYWluXSBcdTI3MTcgRmlsZSBzeW5jIGZhaWxlZDonLCBmaWxlLnBhdGgsIHJlc3VsdC5lcnJvcik7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1NDBDXHU2QjY1XHU1OTMxXHU4RDI1OiAke2ZpbGUucGF0aH1cXG4ke3Jlc3VsdC5lcnJvcn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZG93bkJyYWluXSBcdTI3MTcgRmlsZSBjaGFuZ2UgaGFuZGxlciBlcnJvcjonLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICAgICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdTU0MENcdTZCNjVcdTk1MTlcdThCRUY6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBoYW5kbGVGaWxlRGVsZXRlKGZpbGU6IFRGaWxlKSB7XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5hdXRvU3luYykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBBdXRvLXN5bmMgZGlzYWJsZWQsIHNraXBwaW5nIGRlbGV0ZTonLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBGaWxlIGRlbGV0aW9uIGRldGVjdGVkOicsIHtcbiAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgIGV4dGVuc2lvbjogZmlsZS5leHRlbnNpb25cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgY2xpZW50SWQgPSB0aGlzLmNsaWVudElkQ2FjaGUuZ2V0KGZpbGUucGF0aCk7XG5cbiAgICAgICAgaWYgKCFjbGllbnRJZCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdbTWFya2Rvd25CcmFpbl0gQ2Fubm90IHN5bmMgZGVsZXRpb24gLSBjbGllbnRJZCBub3QgaW4gY2FjaGU6JywgZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc3luY01hbmFnZXIuc3luYyh7XG4gICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICBjbGllbnRJZDogY2xpZW50SWQsXG4gICAgICAgICAgICBjbGllbnRUeXBlOiAnb2JzaWRpYW4nLFxuICAgICAgICAgICAgYWN0aW9uOiAnZGVsZXRlJ1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHRoaXMuY2xpZW50SWRDYWNoZS5kZWxldGUoZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gXHUyNzEzIEZpbGUgZGVsZXRpb24gc3luY2VkOicsIGZpbGUucGF0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbTWFya2Rvd25CcmFpbl0gXHUyNzE3IEZpbGUgZGVsZXRpb24gc3luYyBmYWlsZWQ6JywgZmlsZS5wYXRoLCByZXN1bHQuZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgaGFuZGxlRmlsZVJlbmFtZShmaWxlOiBURmlsZSwgb2xkUGF0aDogc3RyaW5nKSB7XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5hdXRvU3luYykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBBdXRvLXN5bmMgZGlzYWJsZWQsIHNraXBwaW5nIHJlbmFtZTonLCBvbGRQYXRoLCAnLT4nLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBGaWxlIHJlbmFtZSBkZXRlY3RlZDonLCB7XG4gICAgICAgICAgICBvbGRQYXRoOiBvbGRQYXRoLFxuICAgICAgICAgICAgbmV3UGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgZXh0ZW5zaW9uOiBmaWxlLmV4dGVuc2lvblxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBjYWNoZWRDbGllbnRJZCA9IHRoaXMuY2xpZW50SWRDYWNoZS5nZXQob2xkUGF0aCk7XG4gICAgICAgIGlmIChjYWNoZWRDbGllbnRJZCkge1xuICAgICAgICAgICAgdGhpcy5jbGllbnRJZENhY2hlLmRlbGV0ZShvbGRQYXRoKTtcbiAgICAgICAgICAgIHRoaXMuY2xpZW50SWRDYWNoZS5zZXQoZmlsZS5wYXRoLCBjYWNoZWRDbGllbnRJZCk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBTeW5jaW5nIHJlbmFtZSB3aXRoIGZyb250bWF0dGVyIFVVSUQnKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGVyZm9ybVN5bmMoZmlsZSwgJ21vZGlmeScpO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFx1MjcxMyBGaWxlIHJlbmFtZSBzeW5jZWQ6Jywgb2xkUGF0aCwgJy0+JywgZmlsZS5wYXRoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZG93bkJyYWluXSBcdTI3MTcgUmVuYW1lIHN5bmMgZXhjZXB0aW9uOicsIHtcbiAgICAgICAgICAgICAgICBvbGRQYXRoOiBvbGRQYXRoLFxuICAgICAgICAgICAgICAgIG5ld1BhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IsXG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdTkxQ0RcdTU0N0RcdTU0MERcdTU0MENcdTZCNjVcdTk1MTlcdThCRUY6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBoYW5kbGVSZXNvdXJjZUNoYW5nZShmaWxlOiBURmlsZSwgYWN0aW9uOiAndXBzZXJ0Jykge1xuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuYXV0b1N5bmMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gQXV0by1zeW5jIGRpc2FibGVkLCBza2lwcGluZyByZXNvdXJjZTonLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZXhpc3RpbmdUaW1lciA9IHRoaXMuc3luY0RlYm91bmNlVGltZXJzLmdldChmaWxlLnBhdGgpO1xuICAgICAgICBpZiAoZXhpc3RpbmdUaW1lcikge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGV4aXN0aW5nVGltZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3luY0RlYm91bmNlVGltZXJzLmRlbGV0ZShmaWxlLnBhdGgpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wZXJmb3JtUmVzb3VyY2VTeW5jKGZpbGUsIGFjdGlvbik7XG4gICAgICAgIH0sIDUwMCk7XG5cbiAgICAgICAgdGhpcy5zeW5jRGVib3VuY2VUaW1lcnMuc2V0KGZpbGUucGF0aCwgdGltZXIpO1xuICAgIH1cblxuICAgIGFzeW5jIHBlcmZvcm1SZXNvdXJjZVN5bmMoZmlsZTogVEZpbGUsIGFjdGlvbjogJ3Vwc2VydCcpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBSZXNvdXJjZSBjaGFuZ2UgZGV0ZWN0ZWQ6Jywge1xuICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICAgICAgICBleHRlbnNpb246IGZpbGUuZXh0ZW5zaW9uLFxuICAgICAgICAgICAgc2l6ZTogZmlsZS5zdGF0LnNpemVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWRCaW5hcnkoZmlsZSk7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgYXJyYXlCdWZmZXJUb0Jhc2U2NChidWZmZXIpO1xuICAgICAgICAgICAgY29uc3Qgc2hhMjU2ID0gYXdhaXQgc2hhMjU2SGFzaChidWZmZXIpO1xuXG4gICAgICAgICAgICBjb25zdCBzeW5jRGF0YTogUmVzb3VyY2VTeW5jRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgY29udGVudDogY29udGVudCxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogZ2V0Q29udGVudFR5cGUoZmlsZS5leHRlbnNpb24pLFxuICAgICAgICAgICAgICAgIHNoYTI1Njogc2hhMjU2LFxuICAgICAgICAgICAgICAgIHNpemVCeXRlczogYnVmZmVyLmJ5dGVMZW5ndGgsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb25cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc3luY01hbmFnZXIuc3luY1Jlc291cmNlKHN5bmNEYXRhKTtcblxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBcdTI3MTMgUmVzb3VyY2Ugc3luY2VkIHN1Y2Nlc3NmdWxseTonLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbTWFya2Rvd25CcmFpbl0gXHUyNzE3IFJlc291cmNlIHN5bmMgZmFpbGVkOicsIGZpbGUucGF0aCwgcmVzdWx0LmVycm9yKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdThENDRcdTZFOTBcdTU0MENcdTZCNjVcdTU5MzFcdThEMjU6ICR7ZmlsZS5wYXRofVxcbiR7cmVzdWx0LmVycm9yfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW01hcmtkb3duQnJhaW5dIFx1MjcxNyBSZXNvdXJjZSBzeW5jIGV4Y2VwdGlvbjonLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdThENDRcdTZFOTBcdTU0MENcdTZCNjVcdTk1MTlcdThCRUY6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBoYW5kbGVSZXNvdXJjZURlbGV0ZShmaWxlOiBURmlsZSkge1xuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuYXV0b1N5bmMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gQXV0by1zeW5jIGRpc2FibGVkLCBza2lwcGluZyByZXNvdXJjZSBkZWxldGU6JywgZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gUmVzb3VyY2UgZGVsZXRpb24gZGV0ZWN0ZWQ6JywgZmlsZS5wYXRoKTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnN5bmNNYW5hZ2VyLnN5bmNSZXNvdXJjZSh7XG4gICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICBjb250ZW50VHlwZTogZ2V0Q29udGVudFR5cGUoZmlsZS5leHRlbnNpb24pLFxuICAgICAgICAgICAgYWN0aW9uOiAnZGVsZXRlJ1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gXHUyNzEzIFJlc291cmNlIGRlbGV0aW9uIHN5bmNlZDonLCBmaWxlLnBhdGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW01hcmtkb3duQnJhaW5dIFx1MjcxNyBSZXNvdXJjZSBkZWxldGlvbiBzeW5jIGZhaWxlZDonLCBmaWxlLnBhdGgsIHJlc3VsdC5lcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBoYW5kbGVSZXNvdXJjZVJlbmFtZShmaWxlOiBURmlsZSwgb2xkUGF0aDogc3RyaW5nKSB7XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5hdXRvU3luYykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBBdXRvLXN5bmMgZGlzYWJsZWQsIHNraXBwaW5nIHJlc291cmNlIHJlbmFtZTonLCBvbGRQYXRoLCAnLT4nLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBSZXNvdXJjZSByZW5hbWUgZGV0ZWN0ZWQ6Jywgb2xkUGF0aCwgJy0+JywgZmlsZS5wYXRoKTtcblxuICAgICAgICBhd2FpdCB0aGlzLnN5bmNNYW5hZ2VyLnN5bmNSZXNvdXJjZSh7XG4gICAgICAgICAgICBwYXRoOiBvbGRQYXRoLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IGdldENvbnRlbnRUeXBlKGZpbGUuZXh0ZW5zaW9uKSxcbiAgICAgICAgICAgIGFjdGlvbjogJ2RlbGV0ZSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wZXJmb3JtUmVzb3VyY2VTeW5jKGZpbGUsICd1cHNlcnQnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcdTUxNjhcdTkxQ0ZcdTU0MENcdTZCNjVcdTYyNDBcdTY3MDlcdTY1ODdcdTRFRjZcbiAgICAgKiBAZmxvdyBcdTY1MzZcdTk2QzYgSURzIFx1MjE5MiBcdTZFMDVcdTc0MDZcdTVCNjRcdTUxM0YgXHUyMTkyIFx1NTg5RVx1OTFDRlx1NTQwQ1x1NkI2NVxuICAgICAqIEBjb21wbGV4aXR5IE8obikgd2hlcmUgbiA9IFx1NjU4N1x1NEVGNlx1NjU3MFx1OTFDRlxuICAgICAqL1xuICAgIGFzeW5jIHN5bmNBbGxGaWxlcygpIHtcbiAgICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbTWFya2Rvd25CcmFpbl0gU3RhcnRpbmcgZnVsbCBzeW5jIGZvciAke2ZpbGVzLmxlbmd0aH0gZmlsZXNgKTtcbiAgICAgICAgbmV3IE5vdGljZShgXHU1RjAwXHU1OUNCXHU1MTY4XHU5MUNGXHU1NDBDXHU2QjY1ICR7ZmlsZXMubGVuZ3RofSBcdTRFMkFcdTY1ODdcdTRFRjYuLi5gKTtcblxuICAgICAgICAvLyBcdTZCNjVcdTlBQTQgMTogXHU2NTM2XHU5NkM2IGNsaWVudF9pZHNcbiAgICAgICAgY29uc3QgY2xpZW50SWRzID0gYXdhaXQgdGhpcy5jb2xsZWN0Q2xpZW50SWRzKGZpbGVzKTtcbiAgICAgICAgY29uc29sZS5sb2coYFtNYXJrZG93bkJyYWluXSBDb2xsZWN0ZWQgJHtjbGllbnRJZHMubGVuZ3RofSBjbGllbnQgSURzYCk7XG5cbiAgICAgICAgLy8gXHU2QjY1XHU5QUE0IDI6IFx1NkUwNVx1NzQwNlx1NUI2NFx1NTEzRlx1NjU4N1x1Njg2MyAoTygxKSBcdTUzNTVcdTZCMjFcdThCRjdcdTZDNDIpXG4gICAgICAgIGF3YWl0IHRoaXMuY2xlYW51cE9ycGhhbnMoY2xpZW50SWRzKTtcblxuICAgICAgICAvLyBcdTZCNjVcdTlBQTQgMzogXHU1ODlFXHU5MUNGXHU1NDBDXHU2QjY1XG4gICAgICAgIGF3YWl0IHRoaXMuaW5jcmVtZW50YWxTeW5jQmF0Y2goZmlsZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFx1NjUzNlx1OTZDNlx1NjI0MFx1NjcwOVx1NjU4N1x1NEVGNlx1NzY4NCBjbGllbnRfaWRzXG4gICAgICogQGNvbXBsZXhpdHkgTyhuKSB0aW1lLCBPKG4pIHNwYWNlXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBjb2xsZWN0Q2xpZW50SWRzKGZpbGVzOiBURmlsZVtdKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgICAgICBjb25zdCBpZHM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgICAgICAvLyBcdTUzRUFcdTUzMDVcdTU0MkJcdTk3NUVcdTdBN0FcdTY1ODdcdTRFRjZcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudD8udHJpbSgpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWRzLnB1c2goYXdhaXQgZ2V0T3JDcmVhdGVDbGllbnRJZChmaWxlLCBjb250ZW50LCB0aGlzLmFwcCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW01hcmtkb3duQnJhaW5dIEZhaWxlZCB0byByZWFkICR7ZmlsZS5wYXRofTpgLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlkcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcdTZFMDVcdTc0MDZcdTVCNjRcdTUxM0ZcdTdCMTRcdThCQjBcbiAgICAgKiBAY29tcGxleGl0eSBPKDEpIC0gXHU1MzU1XHU2QjIxXHU3RjUxXHU3RURDXHU4QkY3XHU2QzQyXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBjbGVhbnVwT3JwaGFucyhjbGllbnRJZHM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnN5bmNNYW5hZ2VyLmZ1bGxTeW5jKGNsaWVudElkcyk7XG4gICAgICAgICAgICBjb25zdCBkZWxldGVkID0gcmVzdWx0LmRhdGE/LlsnZGVsZXRlZC1jb3VudCddIHx8IDA7XG5cbiAgICAgICAgICAgIGlmIChkZWxldGVkID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbTWFya2Rvd25CcmFpbl0gXHUyNzEzIENsZWFuZWQgJHtkZWxldGVkfSBvcnBoYW4gbm90ZXNgKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTZFMDVcdTc0MDZcdTRFODYgJHtkZWxldGVkfSBcdTRFMkFcdTVCNjRcdTUxM0ZcdTdCMTRcdThCQjBgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFx1MjcxMyBObyBvcnBoYW4gbm90ZXMgZm91bmQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIEZ1bGwtc3luYyBcdTU5MzFcdThEMjVcdTRFMERcdTRFMkRcdTY1QURcdTZENDFcdTdBMEJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNYXJrZG93bkJyYWluXSBGdWxsIHN5bmMgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXHU2Mjc5XHU5MUNGXHU1ODlFXHU5MUNGXHU1NDBDXHU2QjY1XG4gICAgICogQGNvbXBsZXhpdHkgTyhuKSB3aXRoIGJhdGNoaW5nXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBpbmNyZW1lbnRhbFN5bmNCYXRjaChmaWxlczogVEZpbGVbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzdGF0czogU3luY1N0YXRzID0geyBzdWNjZXNzOiAwLCBmYWlsZWQ6IDAsIHNraXBwZWQ6IDAgfTtcbiAgICAgICAgY29uc3QgYmF0Y2hTaXplID0gMTA7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkgKz0gYmF0Y2hTaXplKSB7XG4gICAgICAgICAgICBjb25zdCBiYXRjaCA9IGZpbGVzLnNsaWNlKGksIGkgKyBiYXRjaFNpemUpO1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoYmF0Y2gubWFwKGZpbGUgPT4gdGhpcy5zeW5jT25lRmlsZShmaWxlLCBzdGF0cykpKTtcblxuICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLm1pbihpICsgYmF0Y2hTaXplLCBmaWxlcy5sZW5ndGgpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1NDBDXHU2QjY1XHU4RkRCXHU1RUE2OiAke3Byb2dyZXNzfS8ke2ZpbGVzLmxlbmd0aH0gKFx1NjIxMFx1NTI5RjogJHtzdGF0cy5zdWNjZXNzfSwgXHU1OTMxXHU4RDI1OiAke3N0YXRzLmZhaWxlZH0sIFx1OERGM1x1OEZDNzogJHtzdGF0cy5za2lwcGVkfSlgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZpbmFsTXNnID0gYFx1NTQwQ1x1NkI2NVx1NUI4Q1x1NjIxMCEgXHU2MDNCXHU4QkExOiAke2ZpbGVzLmxlbmd0aH0sIFx1NjIxMFx1NTI5RjogJHtzdGF0cy5zdWNjZXNzfSwgXHU1OTMxXHU4RDI1OiAke3N0YXRzLmZhaWxlZH0sIFx1OERGM1x1OEZDNzogJHtzdGF0cy5za2lwcGVkfWA7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbTWFya2Rvd25CcmFpbl0gJHtmaW5hbE1zZ31gKTtcbiAgICAgICAgbmV3IE5vdGljZShmaW5hbE1zZywgODAwMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXHU1NDBDXHU2QjY1XHU1MzU1XHU0RTJBXHU2NTg3XHU0RUY2XG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBzeW5jT25lRmlsZShmaWxlOiBURmlsZSwgc3RhdHM6IFN5bmNTdGF0cyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGVyZm9ybVN5bmMoZmlsZSwgJ21vZGlmeScpO1xuICAgICAgICAgICAgc3RhdHMuc3VjY2VzcysrO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgc3RhdHMuZmFpbGVkKys7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbTWFya2Rvd25CcmFpbl0gXHUyNzE3IEZhaWxlZCB0byBzeW5jICR7ZmlsZS5wYXRofTpgLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNRDUgXHU1NEM4XHU1RTBDXHU1MUZEXHU2NTcwXHVGRjA4XHU3NTI4XHU0RThFXHU2OEMwXHU2RDRCXHU2NTg3XHU0RUY2XHU1MTg1XHU1QkI5XHU1M0Q4XHU1MzE2XHVGRjA5XG4gICAgYXN5bmMgaGFzaFN0cmluZyhzdHI6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbiAgICAgICAgY29uc3QgZGF0YSA9IGVuY29kZXIuZW5jb2RlKHN0cik7XG4gICAgICAgIGNvbnN0IGhhc2hCdWZmZXIgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmRpZ2VzdCgnTUQ1JywgZGF0YSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDIE1ENSBcdTRFMERcdTUzRUZcdTc1MjhcdUZGMENcdTk2NERcdTdFQTdcdTRGN0ZcdTc1MjggU0hBLTI1NlxuICAgICAgICAgICAgcmV0dXJuIGNyeXB0by5zdWJ0bGUuZGlnZXN0KCdTSEEtMjU2JywgZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBoYXNoQXJyYXkgPSBBcnJheS5mcm9tKG5ldyBVaW50OEFycmF5KGhhc2hCdWZmZXIpKTtcbiAgICAgICAgcmV0dXJuIGhhc2hBcnJheS5tYXAoYiA9PiBiLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpKS5qb2luKCcnKTtcbiAgICB9XG5cbiAgICBvbnVubG9hZCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1VubG9hZGluZyBNYXJrZG93bkJyYWluIHBsdWdpbicpO1xuICAgICAgICAvLyBcdTZFMDVcdTc0MDZcdTYyNDBcdTY3MDlcdTk2MzJcdTYyOTZcdTVCOUFcdTY1RjZcdTU2NjhcbiAgICAgICAgZm9yIChjb25zdCB0aW1lciBvZiB0aGlzLnN5bmNEZWJvdW5jZVRpbWVycy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN5bmNEZWJvdW5jZVRpbWVycy5jbGVhcigpO1xuICAgICAgICB0aGlzLnN5bmNNYW5hZ2VyLmRlc3Ryb3koKTtcbiAgICB9XG5cbiAgICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU1NDBDXHU2QjY1XHU3QkExXHU3NDA2XHU1NjY4XHU5MTREXHU3RjZFXG4gICAgICAgIHRoaXMuc3luY01hbmFnZXIudXBkYXRlQ29uZmlnKHtcbiAgICAgICAgICAgIHNlcnZlclVybDogdGhpcy5zZXR0aW5ncy5zZXJ2ZXJVcmwsXG4gICAgICAgICAgICBzeW5jS2V5OiB0aGlzLnNldHRpbmdzLnN5bmNLZXlcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vLyBcdThCQkVcdTdGNkVcdTk3NjJcdTY3N0ZcbmNsYXNzIE1hcmtkb3duQnJhaW5TZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gICAgcGx1Z2luOiBNYXJrZG93bkJyYWluUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTWFya2Rvd25CcmFpblBsdWdpbikge1xuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnTWFya2Rvd25CcmFpbiBcdTU0MENcdTZCNjVcdThCQkVcdTdGNkUnIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1NjcwRFx1NTJBMVx1NTY2OFx1NTczMFx1NTc0MCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnTWFya2Rvd25CcmFpbiBcdTY3MERcdTUyQTFcdTU2NjggQVBJIFx1NTczMFx1NTc0MCcpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2h0dHBzOi8vYXBpLm1hcmtkb3duYnJhaW4uY29tJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VydmVyVXJsKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VydmVyVXJsID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdTeW5jIEtleScpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU0RUNFXHU3QkExXHU3NDA2XHU1NDBFXHU1M0YwXHU4M0I3XHU1M0Q2XHU3Njg0XHU1NDBDXHU2QjY1XHU1QkM2XHU5NEE1JylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcigneHh4eHh4eHgteHh4eC14eHh4LXh4eHgteHh4eHh4eHh4eHh4JylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc3luY0tleSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNLZXkgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIFx1NkQ0Qlx1OEJENVx1OEZERVx1NjNBNVx1NjMwOVx1OTRBRVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTZENEJcdThCRDVcdThGREVcdTYzQTUnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1NkQ0Qlx1OEJENVx1NEUwRVx1NjcwRFx1NTJBMVx1NTY2OFx1NzY4NFx1OEZERVx1NjNBNVx1RkYwODMwXHU3OUQyXHU4RDg1XHU2NUY2XHVGRjA5JylcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdcdTZENEJcdThCRDUnKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHU2RDRCXHU4QkQ1XHU0RTJELi4uJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2QjYzXHU1NzI4XHU2RDRCXHU4QkQ1XHU4RkRFXHU2M0E1Li4uJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wbHVnaW4uc3luY01hbmFnZXIudGVzdENvbm5lY3Rpb24oMzAwMDApO1xuXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdTZENEJcdThCRDUnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0LnZhdWx0SW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXHUyNzA1IFx1OEZERVx1NjNBNVx1NjIxMFx1NTI5Rlx1RkYwMVxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBWYXVsdDogJHtyZXN1bHQudmF1bHRJbmZvLm5hbWV9XFxuYCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYERvbWFpbjogJHtyZXN1bHQudmF1bHRJbmZvLmRvbWFpbn1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDUwMDBcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTI3NEMgXHU4RkRFXHU2M0E1XHU1OTMxXHU4RDI1OiAke3Jlc3VsdC5lcnJvciB8fCAnVW5rbm93biBlcnJvcid9YCwgNTAwMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gXHU2Mjc5XHU5MUNGXHU1NDBDXHU2QjY1XHU2MzA5XHU5NEFFXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1NjI3OVx1OTFDRlx1NTQwQ1x1NkI2NScpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU2MjRCXHU1MkE4XHU1NDBDXHU2QjY1XHU2MjQwXHU2NzA5IE1hcmtkb3duIFx1NjU4N1x1NEVGNlx1NTIzMFx1NjcwRFx1NTJBMVx1NTY2OCcpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHU1RjAwXHU1OUNCXHU1NDBDXHU2QjY1JylcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1NTQwQ1x1NkI2NVx1NEUyRC4uLicpO1xuXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnN5bmNBbGxGaWxlcygpO1xuXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdTVGMDBcdTU5Q0JcdTU0MENcdTZCNjUnKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHU4MUVBXHU1MkE4XHU1NDBDXHU2QjY1JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdTY1ODdcdTRFRjZcdTRGRUVcdTY1MzlcdTY1RjZcdTgxRUFcdTUyQThcdTU0MENcdTZCNjVcdTUyMzBcdTY3MERcdTUyQTFcdTU2NjgnKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9TeW5jKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1N5bmMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBURmlsZSwgQXBwLCBwYXJzZVlhbWwgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBjb25zdCBDTElFTlRfSURfS0VZID0gJ21hcmtkb3duYnJhaW4taWQnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T3JDcmVhdGVDbGllbnRJZChcbiAgZmlsZTogVEZpbGUsXG4gIGNvbnRlbnQ6IHN0cmluZyxcbiAgYXBwOiBBcHBcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IGNhY2hlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICBpZiAoY2FjaGU/LmZyb250bWF0dGVyPy5bQ0xJRU5UX0lEX0tFWV0pIHtcbiAgICByZXR1cm4gU3RyaW5nKGNhY2hlLmZyb250bWF0dGVyW0NMSUVOVF9JRF9LRVldKS50cmltKCk7XG4gIH1cblxuICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICBjb25zdCBsYXRlc3RDb250ZW50ID0gZmlsZUNvbnRlbnQgfHwgY29udGVudDtcblxuICBjb25zdCBmcm9udG1hdHRlck1hdGNoID0gbGF0ZXN0Q29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuICBpZiAoZnJvbnRtYXR0ZXJNYXRjaCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBmcm9udG1hdHRlciA9IHBhcnNlWWFtbChmcm9udG1hdHRlck1hdGNoWzFdKTtcbiAgICAgIGlmIChmcm9udG1hdHRlcj8uW0NMSUVOVF9JRF9LRVldKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcoZnJvbnRtYXR0ZXJbQ0xJRU5UX0lEX0tFWV0pLnRyaW0oKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIFlBTUwgcGFyc2UgZXJyb3IsIHdpbGwgZ2VuZXJhdGUgbmV3IElEXG4gICAgfVxuICB9XG5cbiAgY29uc3QgbmV3SWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuXG4gIGF3YWl0IGFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgKGZyb250bWF0dGVyKSA9PiB7XG4gICAgZnJvbnRtYXR0ZXJbQ0xJRU5UX0lEX0tFWV0gPSBuZXdJZDtcbiAgfSk7XG5cbiAgcmV0dXJuIG5ld0lkO1xufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxtQkFBa0c7OztBQ0FsRyxzQkFBc0M7QUFFL0IsSUFBTSxnQkFBZ0I7QUFFN0IsZUFBc0Isb0JBQ3BCLE1BQ0EsU0FDQSxLQUNpQjtBQVJuQjtBQVNFLFFBQU0sUUFBUSxJQUFJLGNBQWMsYUFBYSxJQUFJO0FBQ2pELE9BQUksb0NBQU8sZ0JBQVAsbUJBQXFCLGdCQUFnQjtBQUN2QyxXQUFPLE9BQU8sTUFBTSxZQUFZLGFBQWEsQ0FBQyxFQUFFLEtBQUs7QUFBQSxFQUN2RDtBQUVBLFFBQU0sY0FBYyxNQUFNLElBQUksTUFBTSxLQUFLLElBQUk7QUFDN0MsUUFBTSxnQkFBZ0IsZUFBZTtBQUVyQyxRQUFNLG1CQUFtQixjQUFjLE1BQU0sdUJBQXVCO0FBQ3BFLE1BQUksa0JBQWtCO0FBQ3BCLFFBQUk7QUFDRixZQUFNLGtCQUFjLDJCQUFVLGlCQUFpQixDQUFDLENBQUM7QUFDakQsVUFBSSwyQ0FBYyxnQkFBZ0I7QUFDaEMsZUFBTyxPQUFPLFlBQVksYUFBYSxDQUFDLEVBQUUsS0FBSztBQUFBLE1BQ2pEO0FBQUEsSUFDRixTQUFRO0FBQUEsSUFFUjtBQUFBLEVB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U0FBUyxPQUFPLEVBQ3JDLFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLFdBQUssT0FBTyxTQUFTLFVBQVU7QUFDL0IsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ25DLENBQUMsQ0FBQztBQUdWLFFBQUkseUJBQVEsV0FBVyxFQUNsQixRQUFRLDBCQUFNLEVBQ2QsUUFBUSx3RkFBa0IsRUFDMUIsVUFBVSxZQUFVLE9BQ2hCLGNBQWMsY0FBSSxFQUNsQixRQUFRLFlBQVk7QUFDakIsYUFBTyxZQUFZLElBQUk7QUFDdkIsYUFBTyxjQUFjLHVCQUFRO0FBRTdCLFVBQUksd0JBQU8seUNBQVc7QUFFdEIsWUFBTSxTQUFTLE1BQU0sS0FBSyxPQUFPLFlBQVksZUFBZSxHQUFLO0FBRWpFLGFBQU8sWUFBWSxLQUFLO0FBQ3hCLGFBQU8sY0FBYyxjQUFJO0FBRXpCLFVBQUksT0FBTyxXQUFXLE9BQU8sV0FBVztBQUNwQyxZQUFJO0FBQUEsVUFDQTtBQUFBLFNBQ1UsT0FBTyxVQUFVLElBQUk7QUFBQSxVQUNwQixPQUFPLFVBQVUsTUFBTTtBQUFBLFVBQ2xDO0FBQUEsUUFDSjtBQUFBLE1BQ0osT0FBTztBQUNILFlBQUksd0JBQU8sb0NBQVcsT0FBTyxTQUFTLGVBQWUsSUFBSSxHQUFJO0FBQUEsTUFDakU7QUFBQSxJQUNKLENBQUMsQ0FBQztBQUdWLFFBQUkseUJBQVEsV0FBVyxFQUNsQixRQUFRLDBCQUFNLEVBQ2QsUUFBUSxvRkFBd0IsRUFDaEMsVUFBVSxZQUFVLE9BQ2hCLGNBQWMsMEJBQU0sRUFDcEIsUUFBUSxZQUFZO0FBQ2pCLGFBQU8sWUFBWSxJQUFJO0FBQ3ZCLGFBQU8sY0FBYyx1QkFBUTtBQUU3QixZQUFNLEtBQUssT0FBTyxhQUFhO0FBRS9CLGFBQU8sWUFBWSxLQUFLO0FBQ3hCLGFBQU8sY0FBYywwQkFBTTtBQUFBLElBQy9CLENBQUMsQ0FBQztBQUVWLFFBQUkseUJBQVEsV0FBVyxFQUNsQixRQUFRLDBCQUFNLEVBQ2QsUUFBUSxnRkFBZSxFQUN2QixVQUFVLFlBQVUsT0FDaEIsU0FBUyxLQUFLLE9BQU8sU0FBUyxRQUFRLEVBQ3RDLFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLFdBQUssT0FBTyxTQUFTLFdBQVc7QUFDaEMsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ25DLENBQUMsQ0FBQztBQUFBLEVBQ2Q7QUFDSjsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIl0KfQo=
