/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MarkdownBrainPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian2 = require("obsidian");

// src/core/client-id.ts
var import_obsidian = require("obsidian");
async function getOrCreateClientId(file, content, app) {
  var _a;
  const cache = app.metadataCache.getFileCache(file);
  if ((_a = cache == null ? void 0 : cache.frontmatter) == null ? void 0 : _a["markdownbrain-id"]) {
    return String(cache.frontmatter["markdownbrain-id"]).trim();
  }
  const fileContent = await app.vault.read(file);
  const latestContent = fileContent || content;
  const frontmatterMatch = latestContent.match(/^---\n([\s\S]*?)\n---/);
  if (frontmatterMatch) {
    try {
      const frontmatter = (0, import_obsidian.parseYaml)(frontmatterMatch[1]);
      if (frontmatter == null ? void 0 : frontmatter["markdownbrain-id"]) {
        return String(frontmatter["markdownbrain-id"]).trim();
      }
    } catch (e) {
    }
  }
  const newId = crypto.randomUUID();
  await app.fileManager.processFrontMatter(file, (frontmatter) => {
    frontmatter["markdownbrain-id"] = newId;
  });
  return newId;
}

// main.ts
var DEFAULT_SETTINGS = {
  serverUrl: "https://api.markdownbrain.com",
  syncKey: "",
  autoSync: true
};
var SyncManager = class {
  constructor(config) {
    this.config = config;
  }
  updateConfig(config) {
    this.config = config;
  }
  async testConnection(timeout = 3e4) {
    try {
      const controller = new AbortController();
      const timeoutId = setTimeout(() => controller.abort(), timeout);
      const response = await (0, import_obsidian2.requestUrl)({
        url: `${this.config.serverUrl}/obsidian/vault/info`,
        method: "GET",
        headers: {
          "Authorization": `Bearer ${this.config.syncKey}`
        },
        throw: false
      });
      clearTimeout(timeoutId);
      if (response.status === 200) {
        const data = response.json;
        return {
          success: true,
          vaultInfo: data.vault
        };
      } else {
        return {
          success: false,
          error: `HTTP ${response.status}: ${response.text || "Unknown error"}`
        };
      }
    } catch (error) {
      if ((error == null ? void 0 : error.name) === "AbortError") {
        return {
          success: false,
          error: "\u8FDE\u63A5\u8D85\u65F6\uFF0830\u79D2\uFF09"
        };
      }
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error"
      };
    }
  }
  async sync(data) {
    var _a, _b;
    console.log("[MarkdownBrain] Starting sync:", {
      path: data.path,
      action: data.action,
      hasContent: !!data.content,
      contentLength: (_a = data.content) == null ? void 0 : _a.length,
      serverUrl: this.config.serverUrl,
      hasSyncKey: !!this.config.syncKey
    });
    try {
      const requestBody = JSON.stringify(data);
      console.log("[MarkdownBrain] Request body size:", requestBody.length, "bytes");
      const response = await (0, import_obsidian2.requestUrl)({
        url: `${this.config.serverUrl}/obsidian/sync`,
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${this.config.syncKey}`
        },
        body: requestBody,
        throw: false
      });
      console.log("[MarkdownBrain] Response:", {
        status: response.status,
        statusText: response.status,
        headers: response.headers,
        bodyPreview: (_b = response.text) == null ? void 0 : _b.substring(0, 200)
      });
      if (response.status === 200) {
        console.log("[MarkdownBrain] \u2713 Sync successful:", data.path);
        return { success: true };
      } else {
        const errorMsg = `HTTP ${response.status}: ${response.text || "Sync failed"}`;
        console.error("[MarkdownBrain] \u2717 Sync failed:", {
          path: data.path,
          status: response.status,
          error: errorMsg,
          responseBody: response.text
        });
        return {
          success: false,
          error: errorMsg
        };
      }
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 Sync exception:", {
        path: data.path,
        error,
        errorMessage: error instanceof Error ? error.message : "Unknown error",
        errorStack: error instanceof Error ? error.stack : void 0
      });
      return {
        success: false,
        error: error instanceof Error ? error.message : "Unknown error"
      };
    }
  }
  /**
   * 全量同步 - 清理孤儿笔记
   * @param clientIds 客户端所有笔记的 client_ids 列表
   * @returns 包含删除数量的响应
   * @complexity O(1) - 单次网络请求
   * @compatibility 降级处理 - 如果服务器返回 404，视为成功（旧服务器）
   */
  async fullSync(clientIds) {
    console.log("[MarkdownBrain] Starting full sync...", {
      clientNoteCount: clientIds.length
    });
    try {
      const requestBody = { clientIds };
      const response = await (0, import_obsidian2.requestUrl)({
        url: `${this.config.serverUrl}/obsidian/sync/full`,
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${this.config.syncKey}`
        },
        body: JSON.stringify(requestBody),
        throw: false
      });
      if (response.status === 404) {
        console.warn("[MarkdownBrain] Full sync not supported by server (404), skipping orphan cleanup");
        return {
          success: true,
          data: {
            "vault-id": "",
            action: "full-sync",
            "client-notes": clientIds.length,
            "deleted-count": 0,
            "remaining-notes": clientIds.length
          }
        };
      }
      if (response.status === 200) {
        const data = response.json;
        console.log("[MarkdownBrain] \u2713 Full sync successful:", {
          deletedCount: data["deleted-count"],
          remainingNotes: data["remaining-notes"]
        });
        return {
          success: true,
          data
        };
      } else {
        const errorMsg = `HTTP ${response.status}: ${response.text || "Full sync failed"}`;
        console.error("[MarkdownBrain] \u2717 Full sync failed:", {
          status: response.status,
          error: errorMsg
        });
        return {
          success: false,
          error: errorMsg
        };
      }
    } catch (error) {
      const errorMsg = error instanceof Error ? error.message : "Unknown error";
      console.error("[MarkdownBrain] \u2717 Full sync exception:", {
        error: errorMsg
      });
      return {
        success: false,
        error: errorMsg
      };
    }
  }
  destroy() {
  }
};
var MarkdownBrainPlugin = class extends import_obsidian2.Plugin {
  constructor(app, manifest) {
    super(app, manifest);
    this.syncDebounceTimers = /* @__PURE__ */ new Map();
    this.pendingSyncs = /* @__PURE__ */ new Set();
  }
  async onload() {
    var _a;
    console.log("[MarkdownBrain] ========================================");
    console.log("[MarkdownBrain] Plugin loading...");
    await this.loadSettings();
    console.log("[MarkdownBrain] Settings loaded:", {
      serverUrl: this.settings.serverUrl,
      hasSyncKey: !!this.settings.syncKey,
      syncKeyLength: (_a = this.settings.syncKey) == null ? void 0 : _a.length,
      autoSync: this.settings.autoSync
    });
    this.syncManager = new SyncManager({
      serverUrl: this.settings.serverUrl,
      syncKey: this.settings.syncKey
    });
    console.log("[MarkdownBrain] SyncManager initialized");
    this.registerEvent(
      this.app.vault.on("create", (file) => {
        if (file instanceof import_obsidian2.TFile && file.extension === "md") {
          this.handleFileChange(file, "create");
        }
      })
    );
    console.log("[MarkdownBrain] Registered event: file create");
    this.registerEvent(
      this.app.vault.on("modify", (file) => {
        if (file instanceof import_obsidian2.TFile && file.extension === "md") {
          this.pendingSyncs.add(file.path);
        }
      })
    );
    console.log("[MarkdownBrain] Registered event: file modify");
    this.registerEvent(
      this.app.metadataCache.on("resolved", () => {
        for (const filePath of this.pendingSyncs) {
          const file = this.app.vault.getAbstractFileByPath(filePath);
          if (file instanceof import_obsidian2.TFile) {
            this.handleFileChange(file, "modify");
          }
        }
        this.pendingSyncs.clear();
      })
    );
    console.log("[MarkdownBrain] Registered event: metadata resolved");
    this.registerEvent(
      this.app.vault.on("delete", (file) => {
        if (file instanceof import_obsidian2.TFile && file.extension === "md") {
          this.handleFileDelete(file);
        }
      })
    );
    console.log("[MarkdownBrain] Registered event: file delete");
    this.registerEvent(
      this.app.vault.on("rename", (file, oldPath) => {
        if (file instanceof import_obsidian2.TFile && file.extension === "md") {
          this.handleFileRename(file, oldPath);
        }
      })
    );
    console.log("[MarkdownBrain] Registered event: file rename");
    this.addSettingTab(new MarkdownBrainSettingTab(this.app, this));
    console.log("[MarkdownBrain] Settings tab added");
    this.addCommand({
      id: "sync-current-file",
      name: "Sync current file",
      callback: () => {
        const file = this.app.workspace.getActiveFile();
        if (file) {
          this.handleFileChange(file, "modify");
        }
      }
    });
    this.addCommand({
      id: "sync-all-files",
      name: "Sync all files",
      callback: () => {
        this.syncAllFiles();
      }
    });
    console.log("[MarkdownBrain] Commands registered");
    console.log("[MarkdownBrain] \u2713 Plugin loaded successfully");
    console.log("[MarkdownBrain] ========================================");
  }
  async handleFileChange(file, action) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping:", file.path);
      return;
    }
    const existingTimer = this.syncDebounceTimers.get(file.path);
    if (existingTimer) {
      clearTimeout(existingTimer);
    }
    const timer = setTimeout(async () => {
      this.syncDebounceTimers.delete(file.path);
      await this.performSync(file, action);
    }, 300);
    this.syncDebounceTimers.set(file.path, timer);
  }
  async performSync(file, action) {
    var _a, _b;
    console.log("[MarkdownBrain] File change detected:", {
      path: file.path,
      action,
      extension: file.extension,
      size: file.stat.size
    });
    try {
      const content = await this.app.vault.read(file);
      console.log("[MarkdownBrain] File read successfully:", {
        path: file.path,
        contentLength: content.length
      });
      const cachedMetadata = this.app.metadataCache.getFileCache(file);
      const metadata = {};
      if (cachedMetadata) {
        if (cachedMetadata.tags) {
          metadata.tags = cachedMetadata.tags.map((tag) => ({
            tag: tag.tag,
            position: tag.position
          }));
        }
        if (cachedMetadata.headings) {
          metadata.headings = cachedMetadata.headings.map((heading) => ({
            heading: heading.heading,
            level: heading.level,
            position: heading.position
          }));
        }
        if (cachedMetadata.frontmatter) {
          metadata.frontmatter = cachedMetadata.frontmatter;
        }
        console.log("[MarkdownBrain] Metadata extracted:", {
          path: file.path,
          tagsCount: ((_a = metadata.tags) == null ? void 0 : _a.length) || 0,
          headingsCount: ((_b = metadata.headings) == null ? void 0 : _b.length) || 0,
          hasFrontmatter: !!metadata.frontmatter
        });
      }
      const stat = file.stat;
      const hash = await this.hashString(content);
      const mtime = new Date(stat.mtime).toISOString();
      const clientId = await getOrCreateClientId(file, content, this.app);
      console.log("[MarkdownBrain] File metadata:", {
        path: file.path,
        clientId,
        hash,
        mtime
      });
      const syncData = {
        path: file.path,
        clientId,
        clientType: "obsidian",
        content,
        hash,
        mtime,
        metadata,
        action
      };
      const result = await this.syncManager.sync(syncData);
      if (result.success) {
        console.log("[MarkdownBrain] \u2713 File synced successfully:", file.path);
      } else {
        console.error("[MarkdownBrain] \u2717 File sync failed:", file.path, result.error);
        new import_obsidian2.Notice(`\u540C\u6B65\u5931\u8D25: ${file.path}
${result.error}`);
      }
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 File change handler error:", {
        path: file.path,
        error,
        errorMessage: error instanceof Error ? error.message : "Unknown error",
        errorStack: error instanceof Error ? error.stack : void 0
      });
      new import_obsidian2.Notice(`\u540C\u6B65\u9519\u8BEF: ${error instanceof Error ? error.message : "Unknown error"}`);
    }
  }
  async handleFileDelete(file) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping delete:", file.path);
      return;
    }
    console.log("[MarkdownBrain] File deletion detected:", {
      path: file.path,
      extension: file.extension
    });
    try {
      const content = await this.app.vault.read(file);
      const clientId = await getOrCreateClientId(file, content, this.app);
      const result = await this.syncManager.sync({
        path: file.path,
        clientId,
        clientType: "obsidian",
        action: "delete"
      });
      if (result.success) {
        console.log("[MarkdownBrain] \u2713 File deletion synced:", file.path);
      } else {
        console.error("[MarkdownBrain] \u2717 File deletion sync failed:", file.path, result.error);
      }
    } catch (error) {
      console.warn("[MarkdownBrain] Cannot sync file deletion (file already removed or never synced):", file.path);
    }
  }
  async handleFileRename(file, oldPath) {
    if (!this.settings.autoSync) {
      console.log("[MarkdownBrain] Auto-sync disabled, skipping rename:", oldPath, "->", file.path);
      return;
    }
    console.log("[MarkdownBrain] File rename detected:", {
      oldPath,
      newPath: file.path,
      extension: file.extension
    });
    try {
      console.log("[MarkdownBrain] Syncing rename with frontmatter UUID");
      await this.performSync(file, "modify");
      console.log("[MarkdownBrain] \u2713 File rename synced:", oldPath, "->", file.path);
    } catch (error) {
      console.error("[MarkdownBrain] \u2717 Rename sync exception:", {
        oldPath,
        newPath: file.path,
        error,
        errorMessage: error instanceof Error ? error.message : "Unknown error"
      });
      new import_obsidian2.Notice(`\u91CD\u547D\u540D\u540C\u6B65\u9519\u8BEF: ${error instanceof Error ? error.message : "Unknown error"}`);
    }
  }
  /**
   * 全量同步所有文件
   * @flow 收集 IDs → 清理孤儿 → 增量同步
   * @complexity O(n) where n = 文件数量
   */
  async syncAllFiles() {
    const files = this.app.vault.getMarkdownFiles();
    console.log(`[MarkdownBrain] Starting full sync for ${files.length} files`);
    new import_obsidian2.Notice(`\u5F00\u59CB\u5168\u91CF\u540C\u6B65 ${files.length} \u4E2A\u6587\u4EF6...`);
    const clientIds = await this.collectClientIds(files);
    console.log(`[MarkdownBrain] Collected ${clientIds.length} client IDs`);
    await this.cleanupOrphans(clientIds);
    await this.incrementalSyncBatch(files);
  }
  /**
   * 收集所有文件的 client_ids
   * @complexity O(n) time, O(n) space
   */
  async collectClientIds(files) {
    const ids = [];
    for (const file of files) {
      try {
        const content = await this.app.vault.read(file);
        if ((content == null ? void 0 : content.trim().length) > 0) {
          ids.push(await getOrCreateClientId(file, content, this.app));
        }
      } catch (error) {
        console.error(`[MarkdownBrain] Failed to read ${file.path}:`, error);
      }
    }
    return ids;
  }
  /**
   * 清理孤儿笔记
   * @complexity O(1) - 单次网络请求
   */
  async cleanupOrphans(clientIds) {
    var _a;
    try {
      const result = await this.syncManager.fullSync(clientIds);
      const deleted = ((_a = result.data) == null ? void 0 : _a["deleted-count"]) || 0;
      if (deleted > 0) {
        console.log(`[MarkdownBrain] \u2713 Cleaned ${deleted} orphan notes`);
        new import_obsidian2.Notice(`\u6E05\u7406\u4E86 ${deleted} \u4E2A\u5B64\u513F\u7B14\u8BB0`);
      } else if (result.success) {
        console.log("[MarkdownBrain] \u2713 No orphan notes found");
      }
    } catch (error) {
      console.error("[MarkdownBrain] Full sync error:", error);
    }
  }
  /**
   * 批量增量同步
   * @complexity O(n) with batching
   */
  async incrementalSyncBatch(files) {
    const stats = { success: 0, failed: 0, skipped: 0 };
    const batchSize = 10;
    for (let i = 0; i < files.length; i += batchSize) {
      const batch = files.slice(i, i + batchSize);
      await Promise.all(batch.map((file) => this.syncOneFile(file, stats)));
      const progress = Math.min(i + batchSize, files.length);
      new import_obsidian2.Notice(`\u540C\u6B65\u8FDB\u5EA6: ${progress}/${files.length} (\u6210\u529F: ${stats.success}, \u5931\u8D25: ${stats.failed}, \u8DF3\u8FC7: ${stats.skipped})`);
    }
    const finalMsg = `\u540C\u6B65\u5B8C\u6210! \u603B\u8BA1: ${files.length}, \u6210\u529F: ${stats.success}, \u5931\u8D25: ${stats.failed}, \u8DF3\u8FC7: ${stats.skipped}`;
    console.log(`[MarkdownBrain] ${finalMsg}`);
    new import_obsidian2.Notice(finalMsg, 8e3);
  }
  /**
   * 同步单个文件
   */
  async syncOneFile(file, stats) {
    try {
      await this.performSync(file, "modify");
      stats.success++;
    } catch (error) {
      stats.failed++;
      console.error(`[MarkdownBrain] \u2717 Failed to sync ${file.path}:`, error);
    }
  }
  // MD5 哈希函数（用于检测文件内容变化）
  async hashString(str) {
    const encoder = new TextEncoder();
    const data = encoder.encode(str);
    const hashBuffer = await crypto.subtle.digest("MD5", data).catch(() => {
      return crypto.subtle.digest("SHA-256", data);
    });
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    return hashArray.map((b) => b.toString(16).padStart(2, "0")).join("");
  }
  onunload() {
    console.log("Unloading MarkdownBrain plugin");
    for (const timer of this.syncDebounceTimers.values()) {
      clearTimeout(timer);
    }
    this.syncDebounceTimers.clear();
    this.syncManager.destroy();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.syncManager.updateConfig({
      serverUrl: this.settings.serverUrl,
      syncKey: this.settings.syncKey
    });
  }
};
var MarkdownBrainSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "MarkdownBrain \u540C\u6B65\u8BBE\u7F6E" });
    new import_obsidian2.Setting(containerEl).setName("\u670D\u52A1\u5668\u5730\u5740").setDesc("MarkdownBrain \u670D\u52A1\u5668 API \u5730\u5740").addText((text) => text.setPlaceholder("https://api.markdownbrain.com").setValue(this.plugin.settings.serverUrl).onChange(async (value) => {
      this.plugin.settings.serverUrl = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("Sync Key").setDesc("\u4ECE\u7BA1\u7406\u540E\u53F0\u83B7\u53D6\u7684\u540C\u6B65\u5BC6\u94A5").addText((text) => text.setPlaceholder("xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx").setValue(this.plugin.settings.syncKey).onChange(async (value) => {
      this.plugin.settings.syncKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("\u6D4B\u8BD5\u8FDE\u63A5").setDesc("\u6D4B\u8BD5\u4E0E\u670D\u52A1\u5668\u7684\u8FDE\u63A5\uFF0830\u79D2\u8D85\u65F6\uFF09").addButton((button) => button.setButtonText("\u6D4B\u8BD5").onClick(async () => {
      button.setDisabled(true);
      button.setButtonText("\u6D4B\u8BD5\u4E2D...");
      new import_obsidian2.Notice("\u6B63\u5728\u6D4B\u8BD5\u8FDE\u63A5...");
      const result = await this.plugin.syncManager.testConnection(3e4);
      button.setDisabled(false);
      button.setButtonText("\u6D4B\u8BD5");
      if (result.success && result.vaultInfo) {
        new import_obsidian2.Notice(
          `\u2705 \u8FDE\u63A5\u6210\u529F\uFF01
Vault: ${result.vaultInfo.name}
Domain: ${result.vaultInfo.domain}`,
          5e3
        );
      } else {
        new import_obsidian2.Notice(`\u274C \u8FDE\u63A5\u5931\u8D25: ${result.error || "Unknown error"}`, 5e3);
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("\u6279\u91CF\u540C\u6B65").setDesc("\u624B\u52A8\u540C\u6B65\u6240\u6709 Markdown \u6587\u4EF6\u5230\u670D\u52A1\u5668").addButton((button) => button.setButtonText("\u5F00\u59CB\u540C\u6B65").onClick(async () => {
      button.setDisabled(true);
      button.setButtonText("\u540C\u6B65\u4E2D...");
      await this.plugin.syncAllFiles();
      button.setDisabled(false);
      button.setButtonText("\u5F00\u59CB\u540C\u6B65");
    }));
    new import_obsidian2.Setting(containerEl).setName("\u81EA\u52A8\u540C\u6B65").setDesc("\u6587\u4EF6\u4FEE\u6539\u65F6\u81EA\u52A8\u540C\u6B65\u5230\u670D\u52A1\u5668").addToggle((toggle) => toggle.setValue(this.plugin.settings.autoSync).onChange(async (value) => {
      this.plugin.settings.autoSync = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vLi4vLi4vb2JzaWRpYW4tcGx1Z2luL21haW4udHMiLCAiLi4vLi4vLi4vLi4vLi4vb2JzaWRpYW4tcGx1Z2luL3NyYy9jb3JlL2NsaWVudC1pZC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFBsdWdpbiwgUGx1Z2luTWFuaWZlc3QsIFBsdWdpblNldHRpbmdUYWIsIHJlcXVlc3RVcmwsIFNldHRpbmcsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgZ2V0T3JDcmVhdGVDbGllbnRJZCB9IGZyb20gJy4vc3JjL2NvcmUvY2xpZW50LWlkJztcblxuaW50ZXJmYWNlIE1hcmtkb3duQnJhaW5TZXR0aW5ncyB7XG4gICAgc2VydmVyVXJsOiBzdHJpbmc7XG4gICAgc3luY0tleTogc3RyaW5nO1xuICAgIGF1dG9TeW5jOiBib29sZWFuO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNYXJrZG93bkJyYWluU2V0dGluZ3MgPSB7XG4gICAgc2VydmVyVXJsOiAnaHR0cHM6Ly9hcGkubWFya2Rvd25icmFpbi5jb20nLFxuICAgIHN5bmNLZXk6ICcnLFxuICAgIGF1dG9TeW5jOiB0cnVlXG59O1xuXG4vLyBcdTU0MENcdTZCNjVcdTkxNERcdTdGNkVcbmludGVyZmFjZSBTeW5jQ29uZmlnIHtcbiAgICBzZXJ2ZXJVcmw6IHN0cmluZztcbiAgICBzeW5jS2V5OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBOb3RlTWV0YWRhdGEge1xuICAgIHRhZ3M/OiBBcnJheTx7XG4gICAgICAgIHRhZzogc3RyaW5nO1xuICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgICAgc3RhcnQ6IHsgbGluZTogbnVtYmVyOyBjb2w6IG51bWJlcjsgb2Zmc2V0OiBudW1iZXIgfTtcbiAgICAgICAgICAgIGVuZDogeyBsaW5lOiBudW1iZXI7IGNvbDogbnVtYmVyOyBvZmZzZXQ6IG51bWJlciB9O1xuICAgICAgICB9O1xuICAgIH0+O1xuICAgIGhlYWRpbmdzPzogQXJyYXk8e1xuICAgICAgICBoZWFkaW5nOiBzdHJpbmc7XG4gICAgICAgIGxldmVsOiBudW1iZXI7XG4gICAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgICAgICBzdGFydDogeyBsaW5lOiBudW1iZXI7IGNvbDogbnVtYmVyOyBvZmZzZXQ6IG51bWJlciB9O1xuICAgICAgICAgICAgZW5kOiB7IGxpbmU6IG51bWJlcjsgY29sOiBudW1iZXI7IG9mZnNldDogbnVtYmVyIH07XG4gICAgICAgIH07XG4gICAgfT47XG4gICAgZnJvbnRtYXR0ZXI/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xufVxuXG4vLyBcdTU0MENcdTZCNjVcdTY1NzBcdTYzNkVcbmludGVyZmFjZSBTeW5jRGF0YSB7XG4gICAgcGF0aDogc3RyaW5nO1xuICAgIGNsaWVudElkOiBzdHJpbmc7ICAgICAgICAgICAvLyBcdTVCQTJcdTYyMzdcdTdBRUZcdTc1MUZcdTYyMTBcdTc2ODRcdTU1MkZcdTRFMDAgSURcbiAgICBjbGllbnRUeXBlOiBzdHJpbmc7ICAgICAgICAgLy8gXHU1QkEyXHU2MjM3XHU3QUVGXHU3QzdCXHU1NzhCXHVGRjFBJ29ic2lkaWFuJ1xuICAgIGNvbnRlbnQ/OiBzdHJpbmc7XG4gICAgaGFzaD86IHN0cmluZztcbiAgICBtdGltZT86IHN0cmluZztcbiAgICBtZXRhZGF0YT86IE5vdGVNZXRhZGF0YTtcbiAgICBhY3Rpb246ICdjcmVhdGUnIHwgJ21vZGlmeScgfCAnZGVsZXRlJztcbn1cblxuLy8gVmF1bHQgXHU0RkUxXHU2MDZGXG5pbnRlcmZhY2UgVmF1bHRJbmZvIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBkb21haW46IHN0cmluZztcbiAgICAnY3JlYXRlZC1hdCc6IHN0cmluZztcbn1cblxuLy8gRnVsbCBTeW5jIFx1OEJGN1x1NkM0MlxuaW50ZXJmYWNlIEZ1bGxTeW5jUmVxdWVzdCB7XG4gICAgY2xpZW50SWRzOiBzdHJpbmdbXTtcbn1cblxuLy8gRnVsbCBTeW5jIFx1NTRDRFx1NUU5NFxuaW50ZXJmYWNlIEZ1bGxTeW5jUmVzcG9uc2Uge1xuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XG4gICAgZGF0YT86IHtcbiAgICAgICAgJ3ZhdWx0LWlkJzogc3RyaW5nO1xuICAgICAgICBhY3Rpb246IHN0cmluZztcbiAgICAgICAgJ2NsaWVudC1ub3Rlcyc6IG51bWJlcjtcbiAgICAgICAgJ2RlbGV0ZWQtY291bnQnOiBudW1iZXI7XG4gICAgICAgICdyZW1haW5pbmctbm90ZXMnOiBudW1iZXI7XG4gICAgfTtcbiAgICBlcnJvcj86IHN0cmluZztcbn1cblxuLy8gXHU1NDBDXHU2QjY1XHU3RURGXHU4QkExXG5pbnRlcmZhY2UgU3luY1N0YXRzIHtcbiAgICBzdWNjZXNzOiBudW1iZXI7XG4gICAgZmFpbGVkOiBudW1iZXI7XG4gICAgc2tpcHBlZDogbnVtYmVyO1xufVxuXG4vLyBcdTU0MENcdTZCNjVcdTdCQTFcdTc0MDZcdTU2NjhcbmNsYXNzIFN5bmNNYW5hZ2VyIHtcbiAgICBwcml2YXRlIGNvbmZpZzogU3luY0NvbmZpZztcblxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZzogU3luY0NvbmZpZykge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB9XG5cbiAgICB1cGRhdGVDb25maWcoY29uZmlnOiBTeW5jQ29uZmlnKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIH1cblxuICAgIGFzeW5jIHRlc3RDb25uZWN0aW9uKHRpbWVvdXQ6IG51bWJlciA9IDMwMDAwKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IHZhdWx0SW5mbz86IFZhdWx0SW5mbzsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCB0aW1lb3V0KTtcblxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgICAgICB1cmw6IGAke3RoaXMuY29uZmlnLnNlcnZlclVybH0vb2JzaWRpYW4vdmF1bHQvaW5mb2AsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuY29uZmlnLnN5bmNLZXl9YFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdGhyb3c6IGZhbHNlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5qc29uO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhdWx0SW5mbzogZGF0YS52YXVsdFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnRleHQgfHwgJ1Vua25vd24gZXJyb3InfWBcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgICAgICBpZiAoZXJyb3I/Lm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ1x1OEZERVx1NjNBNVx1OEQ4NVx1NjVGNlx1RkYwODMwXHU3OUQyXHVGRjA5J1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHN5bmMoZGF0YTogU3luY0RhdGEpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFN0YXJ0aW5nIHN5bmM6Jywge1xuICAgICAgICAgICAgcGF0aDogZGF0YS5wYXRoLFxuICAgICAgICAgICAgYWN0aW9uOiBkYXRhLmFjdGlvbixcbiAgICAgICAgICAgIGhhc0NvbnRlbnQ6ICEhZGF0YS5jb250ZW50LFxuICAgICAgICAgICAgY29udGVudExlbmd0aDogZGF0YS5jb250ZW50Py5sZW5ndGgsXG4gICAgICAgICAgICBzZXJ2ZXJVcmw6IHRoaXMuY29uZmlnLnNlcnZlclVybCxcbiAgICAgICAgICAgIGhhc1N5bmNLZXk6ICEhdGhpcy5jb25maWcuc3luY0tleVxuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEJvZHkgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gUmVxdWVzdCBib2R5IHNpemU6JywgcmVxdWVzdEJvZHkubGVuZ3RoLCAnYnl0ZXMnKTtcblxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgICAgICB1cmw6IGAke3RoaXMuY29uZmlnLnNlcnZlclVybH0vb2JzaWRpYW4vc3luY2AsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLmNvbmZpZy5zeW5jS2V5fWBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RCb2R5LFxuICAgICAgICAgICAgICAgIHRocm93OiBmYWxzZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gUmVzcG9uc2U6Jywge1xuICAgICAgICAgICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiByZXNwb25zZS5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIGJvZHlQcmV2aWV3OiByZXNwb25zZS50ZXh0Py5zdWJzdHJpbmcoMCwgMjAwKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gXHUyNzEzIFN5bmMgc3VjY2Vzc2Z1bDonLCBkYXRhLnBhdGgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2UudGV4dCB8fCAnU3luYyBmYWlsZWQnfWA7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW01hcmtkb3duQnJhaW5dIFx1MjcxNyBTeW5jIGZhaWxlZDonLCB7XG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGRhdGEucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvck1zZyxcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VCb2R5OiByZXNwb25zZS50ZXh0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvck1zZ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbTWFya2Rvd25CcmFpbl0gXHUyNzE3IFN5bmMgZXhjZXB0aW9uOicsIHtcbiAgICAgICAgICAgICAgICBwYXRoOiBkYXRhLnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXHU1MTY4XHU5MUNGXHU1NDBDXHU2QjY1IC0gXHU2RTA1XHU3NDA2XHU1QjY0XHU1MTNGXHU3QjE0XHU4QkIwXG4gICAgICogQHBhcmFtIGNsaWVudElkcyBcdTVCQTJcdTYyMzdcdTdBRUZcdTYyNDBcdTY3MDlcdTdCMTRcdThCQjBcdTc2ODQgY2xpZW50X2lkcyBcdTUyMTdcdTg4NjhcbiAgICAgKiBAcmV0dXJucyBcdTUzMDVcdTU0MkJcdTUyMjBcdTk2NjRcdTY1NzBcdTkxQ0ZcdTc2ODRcdTU0Q0RcdTVFOTRcbiAgICAgKiBAY29tcGxleGl0eSBPKDEpIC0gXHU1MzU1XHU2QjIxXHU3RjUxXHU3RURDXHU4QkY3XHU2QzQyXG4gICAgICogQGNvbXBhdGliaWxpdHkgXHU5NjREXHU3RUE3XHU1OTA0XHU3NDA2IC0gXHU1OTgyXHU2NzlDXHU2NzBEXHU1MkExXHU1NjY4XHU4RkQ0XHU1NkRFIDQwNFx1RkYwQ1x1ODlDNlx1NEUzQVx1NjIxMFx1NTI5Rlx1RkYwOFx1NjVFN1x1NjcwRFx1NTJBMVx1NTY2OFx1RkYwOVxuICAgICAqL1xuICAgIGFzeW5jIGZ1bGxTeW5jKGNsaWVudElkczogc3RyaW5nW10pOiBQcm9taXNlPEZ1bGxTeW5jUmVzcG9uc2U+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBTdGFydGluZyBmdWxsIHN5bmMuLi4nLCB7XG4gICAgICAgICAgICBjbGllbnROb3RlQ291bnQ6IGNsaWVudElkcy5sZW5ndGhcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5OiBGdWxsU3luY1JlcXVlc3QgPSB7IGNsaWVudElkcyB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgICAgICB1cmw6IGAke3RoaXMuY29uZmlnLnNlcnZlclVybH0vb2JzaWRpYW4vc3luYy9mdWxsYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuY29uZmlnLnN5bmNLZXl9YFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpLFxuICAgICAgICAgICAgICAgIHRocm93OiBmYWxzZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFx1NTQxMVx1NTQwRVx1NTE3Q1x1NUJCOVx1RkYxQVx1NjVFN1x1NjcwRFx1NTJBMVx1NTY2OFx1NEUwRFx1NjUyRlx1NjMwMSBmdWxsLXN5bmMgKDQwNClcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwNCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignW01hcmtkb3duQnJhaW5dIEZ1bGwgc3luYyBub3Qgc3VwcG9ydGVkIGJ5IHNlcnZlciAoNDA0KSwgc2tpcHBpbmcgb3JwaGFuIGNsZWFudXAnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAndmF1bHQtaWQnOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ2Z1bGwtc3luYycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnY2xpZW50LW5vdGVzJzogY2xpZW50SWRzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdkZWxldGVkLWNvdW50JzogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdyZW1haW5pbmctbm90ZXMnOiBjbGllbnRJZHMubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuanNvbjtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFx1MjcxMyBGdWxsIHN5bmMgc3VjY2Vzc2Z1bDonLCB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZWRDb3VudDogZGF0YVsnZGVsZXRlZC1jb3VudCddLFxuICAgICAgICAgICAgICAgICAgICByZW1haW5pbmdOb3RlczogZGF0YVsncmVtYWluaW5nLW5vdGVzJ11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2UudGV4dCB8fCAnRnVsbCBzeW5jIGZhaWxlZCd9YDtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbTWFya2Rvd25CcmFpbl0gXHUyNzE3IEZ1bGwgc3luYyBmYWlsZWQ6Jywge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yTXNnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvck1zZ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW01hcmtkb3duQnJhaW5dIFx1MjcxNyBGdWxsIHN5bmMgZXhjZXB0aW9uOicsIHtcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JNc2dcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JNc2dcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkZXN0cm95KCkge1xuICAgICAgICAvLyBDbGVhbnVwIGlmIG5lZWRlZFxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFya2Rvd25CcmFpblBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gICAgc2V0dGluZ3MhOiBNYXJrZG93bkJyYWluU2V0dGluZ3M7XG4gICAgc3luY01hbmFnZXIhOiBTeW5jTWFuYWdlcjtcbiAgICBwcml2YXRlIHN5bmNEZWJvdW5jZVRpbWVyczogTWFwPHN0cmluZywgTm9kZUpTLlRpbWVvdXQ+O1xuICAgIHByaXZhdGUgcGVuZGluZ1N5bmNzOiBTZXQ8c3RyaW5nPjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBtYW5pZmVzdDogUGx1Z2luTWFuaWZlc3QpIHtcbiAgICAgICAgc3VwZXIoYXBwLCBtYW5pZmVzdCk7XG4gICAgICAgIHRoaXMuc3luY0RlYm91bmNlVGltZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLnBlbmRpbmdTeW5jcyA9IG5ldyBTZXQoKTtcbiAgICB9XG5cbiAgICBhc3luYyBvbmxvYWQoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpO1xuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFBsdWdpbiBsb2FkaW5nLi4uJyk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFNldHRpbmdzIGxvYWRlZDonLCB7XG4gICAgICAgICAgICBzZXJ2ZXJVcmw6IHRoaXMuc2V0dGluZ3Muc2VydmVyVXJsLFxuICAgICAgICAgICAgaGFzU3luY0tleTogISF0aGlzLnNldHRpbmdzLnN5bmNLZXksXG4gICAgICAgICAgICBzeW5jS2V5TGVuZ3RoOiB0aGlzLnNldHRpbmdzLnN5bmNLZXk/Lmxlbmd0aCxcbiAgICAgICAgICAgIGF1dG9TeW5jOiB0aGlzLnNldHRpbmdzLmF1dG9TeW5jXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1NTQwQ1x1NkI2NVx1N0JBMVx1NzQwNlx1NTY2OFxuICAgICAgICB0aGlzLnN5bmNNYW5hZ2VyID0gbmV3IFN5bmNNYW5hZ2VyKHtcbiAgICAgICAgICAgIHNlcnZlclVybDogdGhpcy5zZXR0aW5ncy5zZXJ2ZXJVcmwsXG4gICAgICAgICAgICBzeW5jS2V5OiB0aGlzLnNldHRpbmdzLnN5bmNLZXlcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gU3luY01hbmFnZXIgaW5pdGlhbGl6ZWQnKTtcblxuICAgICAgICAvLyBcdTc2RDFcdTU0MkNcdTY1ODdcdTRFRjZcdTUyMUJcdTVFRkFcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oJ2NyZWF0ZScsIChmaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUZpbGVDaGFuZ2UoZmlsZSwgJ2NyZWF0ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gUmVnaXN0ZXJlZCBldmVudDogZmlsZSBjcmVhdGUnKTtcblxuICAgICAgICAvLyBcdTc2RDFcdTU0MkNcdTY1ODdcdTRFRjZcdTRGRUVcdTY1MzlcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oJ21vZGlmeScsIChmaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4MDdcdThCQjBcdTRFM0FcdTVGODVcdTU0MENcdTZCNjVcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nU3luY3MuYWRkKGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBSZWdpc3RlcmVkIGV2ZW50OiBmaWxlIG1vZGlmeScpO1xuXG4gICAgICAgIC8vIFx1NzZEMVx1NTQyQ1x1NTE0M1x1NjU3MFx1NjM2RVx1N0YxM1x1NUI1OFx1NjZGNFx1NjVCMFx1NUI4Q1x1NjIxMFxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLm9uKCdyZXNvbHZlZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBtZXRhZGF0YUNhY2hlIFx1NURGMlx1ODlFM1x1Njc5MFx1NUI4Q1x1NjIxMFx1RkYwQ1x1NTkwNFx1NzQwNlx1NjI0MFx1NjcwOVx1NUY4NVx1NTQwQ1x1NkI2NVx1NzY4NFx1NjU4N1x1NEVGNlxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZVBhdGggb2YgdGhpcy5wZW5kaW5nU3luY3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRmlsZUNoYW5nZShmaWxlLCAnbW9kaWZ5Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nU3luY3MuY2xlYXIoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gUmVnaXN0ZXJlZCBldmVudDogbWV0YWRhdGEgcmVzb2x2ZWQnKTtcblxuICAgICAgICAvLyBcdTc2RDFcdTU0MkNcdTY1ODdcdTRFRjZcdTUyMjBcdTk2NjRcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oJ2RlbGV0ZScsIChmaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUZpbGVEZWxldGUoZmlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBSZWdpc3RlcmVkIGV2ZW50OiBmaWxlIGRlbGV0ZScpO1xuXG4gICAgICAgIC8vIFx1NzZEMVx1NTQyQ1x1NjU4N1x1NEVGNlx1OTFDRFx1NTQ3RFx1NTQwRFxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5vbigncmVuYW1lJywgKGZpbGUsIG9sZFBhdGgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRmlsZVJlbmFtZShmaWxlLCBvbGRQYXRoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFJlZ2lzdGVyZWQgZXZlbnQ6IGZpbGUgcmVuYW1lJyk7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU4QkJFXHU3RjZFXHU5NzYyXHU2NzdGXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgTWFya2Rvd25CcmFpblNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBTZXR0aW5ncyB0YWIgYWRkZWQnKTtcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTU0N0RcdTRFRTRcdUZGMUFcdTYyNEJcdTUyQThcdTU0MENcdTZCNjVcdTVGNTNcdTUyNERcdTY1ODdcdTRFRjZcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnc3luYy1jdXJyZW50LWZpbGUnLFxuICAgICAgICAgICAgbmFtZTogJ1N5bmMgY3VycmVudCBmaWxlJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVGaWxlQ2hhbmdlKGZpbGUsICdtb2RpZnknKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTQ3RFx1NEVFNFx1RkYxQVx1NTQwQ1x1NkI2NVx1NjI0MFx1NjcwOVx1NjU4N1x1NEVGNlxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdzeW5jLWFsbC1maWxlcycsXG4gICAgICAgICAgICBuYW1lOiAnU3luYyBhbGwgZmlsZXMnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN5bmNBbGxGaWxlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBDb21tYW5kcyByZWdpc3RlcmVkJyk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBcdTI3MTMgUGx1Z2luIGxvYWRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Jyk7XG4gICAgfVxuXG4gICAgYXN5bmMgaGFuZGxlRmlsZUNoYW5nZShmaWxlOiBURmlsZSwgYWN0aW9uOiAnY3JlYXRlJyB8ICdtb2RpZnknKSB7XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5hdXRvU3luYykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBBdXRvLXN5bmMgZGlzYWJsZWQsIHNraXBwaW5nOicsIGZpbGUucGF0aCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTZFMDVcdTk2NjRcdTRFNEJcdTUyNERcdTc2ODRcdTk2MzJcdTYyOTZcdTVCOUFcdTY1RjZcdTU2NjhcbiAgICAgICAgY29uc3QgZXhpc3RpbmdUaW1lciA9IHRoaXMuc3luY0RlYm91bmNlVGltZXJzLmdldChmaWxlLnBhdGgpO1xuICAgICAgICBpZiAoZXhpc3RpbmdUaW1lcikge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGV4aXN0aW5nVGltZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHU0RjdGXHU3NTI4XHU5NjMyXHU2Mjk2XHU5MDdGXHU1MTREXHU1RkVCXHU5MDFGXHU4RkRFXHU3RUVEXHU3Njg0XHU1NDBDXHU2QjY1XG4gICAgICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN5bmNEZWJvdW5jZVRpbWVycy5kZWxldGUoZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGVyZm9ybVN5bmMoZmlsZSwgYWN0aW9uKTtcbiAgICAgICAgfSwgMzAwKTsgLy8gMzAwbXMgXHU5NjMyXHU2Mjk2XG5cbiAgICAgICAgdGhpcy5zeW5jRGVib3VuY2VUaW1lcnMuc2V0KGZpbGUucGF0aCwgdGltZXIpO1xuICAgIH1cblxuICAgIGFzeW5jIHBlcmZvcm1TeW5jKGZpbGU6IFRGaWxlLCBhY3Rpb246ICdjcmVhdGUnIHwgJ21vZGlmeScpIHtcblxuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIEZpbGUgY2hhbmdlIGRldGVjdGVkOicsIHtcbiAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgICAgICAgZXh0ZW5zaW9uOiBmaWxlLmV4dGVuc2lvbixcbiAgICAgICAgICAgIHNpemU6IGZpbGUuc3RhdC5zaXplXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gRmlsZSByZWFkIHN1Y2Nlc3NmdWxseTonLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRMZW5ndGg6IGNvbnRlbnQubGVuZ3RoXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgY2FjaGVkTWV0YWRhdGEgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhOiBOb3RlTWV0YWRhdGEgPSB7fTtcblxuICAgICAgICAgICAgaWYgKGNhY2hlZE1ldGFkYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlZE1ldGFkYXRhLnRhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGEudGFncyA9IGNhY2hlZE1ldGFkYXRhLnRhZ3MubWFwKHRhZyA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiB0YWcudGFnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHRhZy5wb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlZE1ldGFkYXRhLmhlYWRpbmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhLmhlYWRpbmdzID0gY2FjaGVkTWV0YWRhdGEuaGVhZGluZ3MubWFwKGhlYWRpbmcgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRpbmc6IGhlYWRpbmcuaGVhZGluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiBoZWFkaW5nLmxldmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGhlYWRpbmcucG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChjYWNoZWRNZXRhZGF0YS5mcm9udG1hdHRlcikge1xuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YS5mcm9udG1hdHRlciA9IGNhY2hlZE1ldGFkYXRhLmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gTWV0YWRhdGEgZXh0cmFjdGVkOicsIHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgICAgICAgICB0YWdzQ291bnQ6IG1ldGFkYXRhLnRhZ3M/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICAgICAgICAgICBoZWFkaW5nc0NvdW50OiBtZXRhZGF0YS5oZWFkaW5ncz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgIGhhc0Zyb250bWF0dGVyOiAhIW1ldGFkYXRhLmZyb250bWF0dGVyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHN0YXQgPSBmaWxlLnN0YXQ7XG4gICAgICAgICAgICBjb25zdCBoYXNoID0gYXdhaXQgdGhpcy5oYXNoU3RyaW5nKGNvbnRlbnQpO1xuICAgICAgICAgICAgY29uc3QgbXRpbWUgPSBuZXcgRGF0ZShzdGF0Lm10aW1lKS50b0lTT1N0cmluZygpO1xuICAgICAgICAgICAgY29uc3QgY2xpZW50SWQgPSBhd2FpdCBnZXRPckNyZWF0ZUNsaWVudElkKGZpbGUsIGNvbnRlbnQsIHRoaXMuYXBwKTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBGaWxlIG1ldGFkYXRhOicsIHtcbiAgICAgICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgY2xpZW50SWQ6IGNsaWVudElkLFxuICAgICAgICAgICAgICAgIGhhc2g6IGhhc2gsXG4gICAgICAgICAgICAgICAgbXRpbWU6IG10aW1lXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3Qgc3luY0RhdGEgPSB7XG4gICAgICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgICAgIGNsaWVudElkOiBjbGllbnRJZCxcbiAgICAgICAgICAgICAgICBjbGllbnRUeXBlOiAnb2JzaWRpYW4nLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgaGFzaDogaGFzaCxcbiAgICAgICAgICAgICAgICBtdGltZTogbXRpbWUsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IG1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogYWN0aW9uXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnN5bmNNYW5hZ2VyLnN5bmMoc3luY0RhdGEpO1xuXG4gICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIFx1MjcxMyBGaWxlIHN5bmNlZCBzdWNjZXNzZnVsbHk6JywgZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW01hcmtkb3duQnJhaW5dIFx1MjcxNyBGaWxlIHN5bmMgZmFpbGVkOicsIGZpbGUucGF0aCwgcmVzdWx0LmVycm9yKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTU0MENcdTZCNjVcdTU5MzFcdThEMjU6ICR7ZmlsZS5wYXRofVxcbiR7cmVzdWx0LmVycm9yfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW01hcmtkb3duQnJhaW5dIFx1MjcxNyBGaWxlIGNoYW5nZSBoYW5kbGVyIGVycm9yOicsIHtcbiAgICAgICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgICAgICAgICAgZXJyb3JTdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NTQwQ1x1NkI2NVx1OTUxOVx1OEJFRjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGhhbmRsZUZpbGVEZWxldGUoZmlsZTogVEZpbGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmF1dG9TeW5jKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIEF1dG8tc3luYyBkaXNhYmxlZCwgc2tpcHBpbmcgZGVsZXRlOicsIGZpbGUucGF0aCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZygnW01hcmtkb3duQnJhaW5dIEZpbGUgZGVsZXRpb24gZGV0ZWN0ZWQ6Jywge1xuICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgZXh0ZW5zaW9uOiBmaWxlLmV4dGVuc2lvblxuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICBjb25zdCBjbGllbnRJZCA9IGF3YWl0IGdldE9yQ3JlYXRlQ2xpZW50SWQoZmlsZSwgY29udGVudCwgdGhpcy5hcHApO1xuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnN5bmNNYW5hZ2VyLnN5bmMoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgICAgICBjbGllbnRJZDogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgY2xpZW50VHlwZTogJ29ic2lkaWFuJyxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdkZWxldGUnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBcdTI3MTMgRmlsZSBkZWxldGlvbiBzeW5jZWQ6JywgZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW01hcmtkb3duQnJhaW5dIFx1MjcxNyBGaWxlIGRlbGV0aW9uIHN5bmMgZmFpbGVkOicsIGZpbGUucGF0aCwgcmVzdWx0LmVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignW01hcmtkb3duQnJhaW5dIENhbm5vdCBzeW5jIGZpbGUgZGVsZXRpb24gKGZpbGUgYWxyZWFkeSByZW1vdmVkIG9yIG5ldmVyIHN5bmNlZCk6JywgZmlsZS5wYXRoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGhhbmRsZUZpbGVSZW5hbWUoZmlsZTogVEZpbGUsIG9sZFBhdGg6IHN0cmluZykge1xuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuYXV0b1N5bmMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gQXV0by1zeW5jIGRpc2FibGVkLCBza2lwcGluZyByZW5hbWU6Jywgb2xkUGF0aCwgJy0+JywgZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gRmlsZSByZW5hbWUgZGV0ZWN0ZWQ6Jywge1xuICAgICAgICAgICAgb2xkUGF0aDogb2xkUGF0aCxcbiAgICAgICAgICAgIG5ld1BhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgIGV4dGVuc2lvbjogZmlsZS5leHRlbnNpb25cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOCBmcm9udG1hdHRlciBVVUlEIFx1NTQwRVx1RkYwQ1x1OTFDRFx1NTQ3RFx1NTQwRFx1NTNEOFx1NUY5N1x1N0I4MFx1NTM1NVx1RkYxQVxuICAgICAgICAgICAgLy8gVVVJRCBcdTVCNThcdTUwQThcdTU3MjggZnJvbnRtYXR0ZXIgXHU0RTJEXHVGRjBDXHU0RTBEXHU5NjhGXHU4REVGXHU1Rjg0XHU1M0Q4XHU1MzE2XG4gICAgICAgICAgICAvLyBcdTUzRUFcdTk3MDBcdTUzRDFcdTkwMDFcdTUzNTVcdTRFMkEgbW9kaWZ5IFx1OEJGN1x1NkM0Mlx1NTM3M1x1NTNFRlx1NjZGNFx1NjVCMFx1OERFRlx1NUY4NFxuICAgICAgICAgICAgLy8gXHU2NzBEXHU1MkExXHU3QUVGXHU3Njg0IE9OIENPTkZMSUNUKHZhdWx0X2lkLCBjbGllbnRfaWQpIERPIFVQREFURSBTRVQgcGF0aCBcdTRGMUFcdTU5MDRcdTc0MDZcdThERUZcdTVGODRcdTY2RjRcdTY1QjBcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTWFya2Rvd25CcmFpbl0gU3luY2luZyByZW5hbWUgd2l0aCBmcm9udG1hdHRlciBVVUlEJyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBlcmZvcm1TeW5jKGZpbGUsICdtb2RpZnknKTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBcdTI3MTMgRmlsZSByZW5hbWUgc3luY2VkOicsIG9sZFBhdGgsICctPicsIGZpbGUucGF0aCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbTWFya2Rvd25CcmFpbl0gXHUyNzE3IFJlbmFtZSBzeW5jIGV4Y2VwdGlvbjonLCB7XG4gICAgICAgICAgICAgICAgb2xkUGF0aDogb2xkUGF0aCxcbiAgICAgICAgICAgICAgICBuZXdQYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU5MUNEXHU1NDdEXHU1NDBEXHU1NDBDXHU2QjY1XHU5NTE5XHU4QkVGOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXHU1MTY4XHU5MUNGXHU1NDBDXHU2QjY1XHU2MjQwXHU2NzA5XHU2NTg3XHU0RUY2XG4gICAgICogQGZsb3cgXHU2NTM2XHU5NkM2IElEcyBcdTIxOTIgXHU2RTA1XHU3NDA2XHU1QjY0XHU1MTNGIFx1MjE5MiBcdTU4OUVcdTkxQ0ZcdTU0MENcdTZCNjVcbiAgICAgKiBAY29tcGxleGl0eSBPKG4pIHdoZXJlIG4gPSBcdTY1ODdcdTRFRjZcdTY1NzBcdTkxQ0ZcbiAgICAgKi9cbiAgICBhc3luYyBzeW5jQWxsRmlsZXMoKSB7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBjb25zb2xlLmxvZyhgW01hcmtkb3duQnJhaW5dIFN0YXJ0aW5nIGZ1bGwgc3luYyBmb3IgJHtmaWxlcy5sZW5ndGh9IGZpbGVzYCk7XG4gICAgICAgIG5ldyBOb3RpY2UoYFx1NUYwMFx1NTlDQlx1NTE2OFx1OTFDRlx1NTQwQ1x1NkI2NSAke2ZpbGVzLmxlbmd0aH0gXHU0RTJBXHU2NTg3XHU0RUY2Li4uYCk7XG5cbiAgICAgICAgLy8gXHU2QjY1XHU5QUE0IDE6IFx1NjUzNlx1OTZDNiBjbGllbnRfaWRzXG4gICAgICAgIGNvbnN0IGNsaWVudElkcyA9IGF3YWl0IHRoaXMuY29sbGVjdENsaWVudElkcyhmaWxlcyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbTWFya2Rvd25CcmFpbl0gQ29sbGVjdGVkICR7Y2xpZW50SWRzLmxlbmd0aH0gY2xpZW50IElEc2ApO1xuXG4gICAgICAgIC8vIFx1NkI2NVx1OUFBNCAyOiBcdTZFMDVcdTc0MDZcdTVCNjRcdTUxM0ZcdTY1ODdcdTY4NjMgKE8oMSkgXHU1MzU1XHU2QjIxXHU4QkY3XHU2QzQyKVxuICAgICAgICBhd2FpdCB0aGlzLmNsZWFudXBPcnBoYW5zKGNsaWVudElkcyk7XG5cbiAgICAgICAgLy8gXHU2QjY1XHU5QUE0IDM6IFx1NTg5RVx1OTFDRlx1NTQwQ1x1NkI2NVxuICAgICAgICBhd2FpdCB0aGlzLmluY3JlbWVudGFsU3luY0JhdGNoKGZpbGVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcdTY1MzZcdTk2QzZcdTYyNDBcdTY3MDlcdTY1ODdcdTRFRjZcdTc2ODQgY2xpZW50X2lkc1xuICAgICAqIEBjb21wbGV4aXR5IE8obikgdGltZSwgTyhuKSBzcGFjZVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgY29sbGVjdENsaWVudElkcyhmaWxlczogVEZpbGVbXSk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICAgICAgY29uc3QgaWRzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICAgICAgLy8gXHU1M0VBXHU1MzA1XHU1NDJCXHU5NzVFXHU3QTdBXHU2NTg3XHU0RUY2XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQ/LnRyaW0oKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlkcy5wdXNoKGF3YWl0IGdldE9yQ3JlYXRlQ2xpZW50SWQoZmlsZSwgY29udGVudCwgdGhpcy5hcHApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtNYXJrZG93bkJyYWluXSBGYWlsZWQgdG8gcmVhZCAke2ZpbGUucGF0aH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpZHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXHU2RTA1XHU3NDA2XHU1QjY0XHU1MTNGXHU3QjE0XHU4QkIwXG4gICAgICogQGNvbXBsZXhpdHkgTygxKSAtIFx1NTM1NVx1NkIyMVx1N0Y1MVx1N0VEQ1x1OEJGN1x1NkM0MlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgY2xlYW51cE9ycGhhbnMoY2xpZW50SWRzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5zeW5jTWFuYWdlci5mdWxsU3luYyhjbGllbnRJZHMpO1xuICAgICAgICAgICAgY29uc3QgZGVsZXRlZCA9IHJlc3VsdC5kYXRhPy5bJ2RlbGV0ZWQtY291bnQnXSB8fCAwO1xuXG4gICAgICAgICAgICBpZiAoZGVsZXRlZCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW01hcmtkb3duQnJhaW5dIFx1MjcxMyBDbGVhbmVkICR7ZGVsZXRlZH0gb3JwaGFuIG5vdGVzYCk7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHU2RTA1XHU3NDA2XHU0RTg2ICR7ZGVsZXRlZH0gXHU0RTJBXHU1QjY0XHU1MTNGXHU3QjE0XHU4QkIwYCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tNYXJrZG93bkJyYWluXSBcdTI3MTMgTm8gb3JwaGFuIG5vdGVzIGZvdW5kJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBGdWxsLXN5bmMgXHU1OTMxXHU4RDI1XHU0RTBEXHU0RTJEXHU2NUFEXHU2RDQxXHU3QTBCXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbTWFya2Rvd25CcmFpbl0gRnVsbCBzeW5jIGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFx1NjI3OVx1OTFDRlx1NTg5RVx1OTFDRlx1NTQwQ1x1NkI2NVxuICAgICAqIEBjb21wbGV4aXR5IE8obikgd2l0aCBiYXRjaGluZ1xuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgaW5jcmVtZW50YWxTeW5jQmF0Y2goZmlsZXM6IFRGaWxlW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc3RhdHM6IFN5bmNTdGF0cyA9IHsgc3VjY2VzczogMCwgZmFpbGVkOiAwLCBza2lwcGVkOiAwIH07XG4gICAgICAgIGNvbnN0IGJhdGNoU2l6ZSA9IDEwO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpICs9IGJhdGNoU2l6ZSkge1xuICAgICAgICAgICAgY29uc3QgYmF0Y2ggPSBmaWxlcy5zbGljZShpLCBpICsgYmF0Y2hTaXplKTtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGJhdGNoLm1hcChmaWxlID0+IHRoaXMuc3luY09uZUZpbGUoZmlsZSwgc3RhdHMpKSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzID0gTWF0aC5taW4oaSArIGJhdGNoU2l6ZSwgZmlsZXMubGVuZ3RoKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1NTQwQ1x1NkI2NVx1OEZEQlx1NUVBNjogJHtwcm9ncmVzc30vJHtmaWxlcy5sZW5ndGh9IChcdTYyMTBcdTUyOUY6ICR7c3RhdHMuc3VjY2Vzc30sIFx1NTkzMVx1OEQyNTogJHtzdGF0cy5mYWlsZWR9LCBcdThERjNcdThGQzc6ICR7c3RhdHMuc2tpcHBlZH0pYCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaW5hbE1zZyA9IGBcdTU0MENcdTZCNjVcdTVCOENcdTYyMTAhIFx1NjAzQlx1OEJBMTogJHtmaWxlcy5sZW5ndGh9LCBcdTYyMTBcdTUyOUY6ICR7c3RhdHMuc3VjY2Vzc30sIFx1NTkzMVx1OEQyNTogJHtzdGF0cy5mYWlsZWR9LCBcdThERjNcdThGQzc6ICR7c3RhdHMuc2tpcHBlZH1gO1xuICAgICAgICBjb25zb2xlLmxvZyhgW01hcmtkb3duQnJhaW5dICR7ZmluYWxNc2d9YCk7XG4gICAgICAgIG5ldyBOb3RpY2UoZmluYWxNc2csIDgwMDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFx1NTQwQ1x1NkI2NVx1NTM1NVx1NEUyQVx1NjU4N1x1NEVGNlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgc3luY09uZUZpbGUoZmlsZTogVEZpbGUsIHN0YXRzOiBTeW5jU3RhdHMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBlcmZvcm1TeW5jKGZpbGUsICdtb2RpZnknKTtcbiAgICAgICAgICAgIHN0YXRzLnN1Y2Nlc3MrKztcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHN0YXRzLmZhaWxlZCsrO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW01hcmtkb3duQnJhaW5dIFx1MjcxNyBGYWlsZWQgdG8gc3luYyAke2ZpbGUucGF0aH06YCwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gTUQ1IFx1NTRDOFx1NUUwQ1x1NTFGRFx1NjU3MFx1RkYwOFx1NzUyOFx1NEU4RVx1NjhDMFx1NkQ0Qlx1NjU4N1x1NEVGNlx1NTE4NVx1NUJCOVx1NTNEOFx1NTMxNlx1RkYwOVxuICAgIGFzeW5jIGhhc2hTdHJpbmcoc3RyOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBlbmNvZGVyLmVuY29kZShzdHIpO1xuICAgICAgICBjb25zdCBoYXNoQnVmZmVyID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5kaWdlc3QoJ01ENScsIGRhdGEpLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5QyBNRDUgXHU0RTBEXHU1M0VGXHU3NTI4XHVGRjBDXHU5NjREXHU3RUE3XHU0RjdGXHU3NTI4IFNIQS0yNTZcbiAgICAgICAgICAgIHJldHVybiBjcnlwdG8uc3VidGxlLmRpZ2VzdCgnU0hBLTI1NicsIGRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgaGFzaEFycmF5ID0gQXJyYXkuZnJvbShuZXcgVWludDhBcnJheShoYXNoQnVmZmVyKSk7XG4gICAgICAgIHJldHVybiBoYXNoQXJyYXkubWFwKGIgPT4gYi50b1N0cmluZygxNikucGFkU3RhcnQoMiwgJzAnKSkuam9pbignJyk7XG4gICAgfVxuXG4gICAgb251bmxvYWQoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdVbmxvYWRpbmcgTWFya2Rvd25CcmFpbiBwbHVnaW4nKTtcbiAgICAgICAgLy8gXHU2RTA1XHU3NDA2XHU2MjQwXHU2NzA5XHU5NjMyXHU2Mjk2XHU1QjlBXHU2NUY2XHU1NjY4XG4gICAgICAgIGZvciAoY29uc3QgdGltZXIgb2YgdGhpcy5zeW5jRGVib3VuY2VUaW1lcnMudmFsdWVzKCkpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zeW5jRGVib3VuY2VUaW1lcnMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5zeW5jTWFuYWdlci5kZXN0cm95KCk7XG4gICAgfVxuXG4gICAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NTQwQ1x1NkI2NVx1N0JBMVx1NzQwNlx1NTY2OFx1OTE0RFx1N0Y2RVxuICAgICAgICB0aGlzLnN5bmNNYW5hZ2VyLnVwZGF0ZUNvbmZpZyh7XG4gICAgICAgICAgICBzZXJ2ZXJVcmw6IHRoaXMuc2V0dGluZ3Muc2VydmVyVXJsLFxuICAgICAgICAgICAgc3luY0tleTogdGhpcy5zZXR0aW5ncy5zeW5jS2V5XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLy8gXHU4QkJFXHU3RjZFXHU5NzYyXHU2NzdGXG5jbGFzcyBNYXJrZG93bkJyYWluU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogTWFya2Rvd25CcmFpblBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE1hcmtkb3duQnJhaW5QbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ01hcmtkb3duQnJhaW4gXHU1NDBDXHU2QjY1XHU4QkJFXHU3RjZFJyB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTY3MERcdTUyQTFcdTU2NjhcdTU3MzBcdTU3NDAnKVxuICAgICAgICAgICAgLnNldERlc2MoJ01hcmtkb3duQnJhaW4gXHU2NzBEXHU1MkExXHU1NjY4IEFQSSBcdTU3MzBcdTU3NDAnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdodHRwczovL2FwaS5tYXJrZG93bmJyYWluLmNvbScpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNlcnZlclVybClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNlcnZlclVybCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnU3luYyBLZXknKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1NEVDRVx1N0JBMVx1NzQwNlx1NTQwRVx1NTNGMFx1ODNCN1x1NTNENlx1NzY4NFx1NTQwQ1x1NkI2NVx1NUJDNlx1OTRBNScpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ3h4eHh4eHh4LXh4eHgteHh4eC14eHh4LXh4eHh4eHh4eHh4eCcpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnN5bmNLZXkpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeW5jS2V5ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBcdTZENEJcdThCRDVcdThGREVcdTYzQTVcdTYzMDlcdTk0QUVcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHU2RDRCXHU4QkQ1XHU4RkRFXHU2M0E1JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdTZENEJcdThCRDVcdTRFMEVcdTY3MERcdTUyQTFcdTU2NjhcdTc2ODRcdThGREVcdTYzQTVcdUZGMDgzMFx1NzlEMlx1OEQ4NVx1NjVGNlx1RkYwOScpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHU2RDRCXHU4QkQ1JylcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1x1NkQ0Qlx1OEJENVx1NEUyRC4uLicpO1xuXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NkI2M1x1NTcyOFx1NkQ0Qlx1OEJENVx1OEZERVx1NjNBNS4uLicpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucGx1Z2luLnN5bmNNYW5hZ2VyLnRlc3RDb25uZWN0aW9uKDMwMDAwKTtcblxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHU2RDRCXHU4QkQ1Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzICYmIHJlc3VsdC52YXVsdEluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYFx1MjcwNSBcdThGREVcdTYzQTVcdTYyMTBcdTUyOUZcdUZGMDFcXG5gICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgVmF1bHQ6ICR7cmVzdWx0LnZhdWx0SW5mby5uYW1lfVxcbmAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBEb21haW46ICR7cmVzdWx0LnZhdWx0SW5mby5kb21haW59YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA1MDAwXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHUyNzRDIFx1OEZERVx1NjNBNVx1NTkzMVx1OEQyNTogJHtyZXN1bHQuZXJyb3IgfHwgJ1Vua25vd24gZXJyb3InfWAsIDUwMDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIFx1NjI3OVx1OTFDRlx1NTQwQ1x1NkI2NVx1NjMwOVx1OTRBRVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTYyNzlcdTkxQ0ZcdTU0MENcdTZCNjUnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1NjI0Qlx1NTJBOFx1NTQwQ1x1NkI2NVx1NjI0MFx1NjcwOSBNYXJrZG93biBcdTY1ODdcdTRFRjZcdTUyMzBcdTY3MERcdTUyQTFcdTU2NjgnKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1x1NUYwMFx1NTlDQlx1NTQwQ1x1NkI2NScpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdcdTU0MENcdTZCNjVcdTRFMkQuLi4nKTtcblxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zeW5jQWxsRmlsZXMoKTtcblxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnXHU1RjAwXHU1OUNCXHU1NDBDXHU2QjY1Jyk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1ODFFQVx1NTJBOFx1NTQwQ1x1NkI2NScpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU2NTg3XHU0RUY2XHU0RkVFXHU2NTM5XHU2NUY2XHU4MUVBXHU1MkE4XHU1NDBDXHU2QjY1XHU1MjMwXHU2NzBEXHU1MkExXHU1NjY4JylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvU3luYylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9TeW5jID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgVEZpbGUsIEFwcCwgcGFyc2VZYW1sIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vKipcbiAqIEdldCBvciBjcmVhdGUgYSBjbGllbnQgSUQgZnJvbSBmcm9udG1hdHRlciB1c2luZyBPYnNpZGlhbidzIG9mZmljaWFsIEFQSS5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIHVzZXMgYGFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXJgIGZvciB3cml0aW5nLCB3aGljaCBpczpcbiAqIC0gQXRvbWljIChwcmV2ZW50cyByYWNlIGNvbmRpdGlvbnMpXG4gKiAtIFNhZmUgKGhhbmRsZXMgY29tcGxleCBZQU1MIGNvcnJlY3RseSlcbiAqIC0gQ29tcGF0aWJsZSB3aXRoIE9ic2lkaWFuJ3MgXCJQcm9wZXJ0aWVzXCIgVUlcbiAqXG4gKiBGb3IgcmVhZGluZywgd2UgdXNlIHRoZSBtZXRhZGF0YUNhY2hlIGZvciBmYXN0IGxvb2t1cHMsIGZhbGxpbmcgYmFjayB0b1xuICogcGFyc2VZYW1sIGZvciBjYXNlcyB3aGVyZSB0aGUgY2FjaGUgaGFzbid0IHVwZGF0ZWQgeWV0LlxuICpcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgdG8gZ2V0IG9yIGNyZWF0ZSB0aGUgY2xpZW50IElEIGZvclxuICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgY3VycmVudCBjb250ZW50IG9mIHRoZSBmaWxlICh1c2VkIGFzIGZhbGxiYWNrKVxuICogQHBhcmFtIGFwcCAtIFRoZSBPYnNpZGlhbiBhcHAgaW5zdGFuY2VcbiAqIEByZXR1cm5zIFRoZSBjbGllbnQgSUQgKGV4aXN0aW5nIG9yIG5ld2x5IGNyZWF0ZWQpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPckNyZWF0ZUNsaWVudElkKFxuICBmaWxlOiBURmlsZSxcbiAgY29udGVudDogc3RyaW5nLFxuICBhcHA6IEFwcFxuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgLy8gU3RlcCAxOiBUcnkgdG8gcmVhZCBleGlzdGluZyBtYXJrZG93bmJyYWluLWlkIGZyb20gbWV0YWRhdGFDYWNoZSAoZmFzdGVzdClcbiAgY29uc3QgY2FjaGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gIGlmIChjYWNoZT8uZnJvbnRtYXR0ZXI/LlsnbWFya2Rvd25icmFpbi1pZCddKSB7XG4gICAgcmV0dXJuIFN0cmluZyhjYWNoZS5mcm9udG1hdHRlclsnbWFya2Rvd25icmFpbi1pZCddKS50cmltKCk7XG4gIH1cblxuICAvLyBTdGVwIDI6IENhY2hlIG1pZ2h0IG5vdCBiZSB1cGRhdGVkIHlldCwgdHJ5IHBhcnNpbmcgZGlyZWN0bHlcbiAgLy8gVGhpcyBoYW5kbGVzIHRoZSBjYXNlIHdoZXJlIHdlIGp1c3Qgd3JvdGUgdG8gdGhlIGZpbGVcbiAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcbiAgY29uc3QgbGF0ZXN0Q29udGVudCA9IGZpbGVDb250ZW50IHx8IGNvbnRlbnQ7XG5cbiAgY29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IGxhdGVzdENvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcbiAgaWYgKGZyb250bWF0dGVyTWF0Y2gpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBwYXJzZVlhbWwoZnJvbnRtYXR0ZXJNYXRjaFsxXSk7XG4gICAgICBpZiAoZnJvbnRtYXR0ZXI/LlsnbWFya2Rvd25icmFpbi1pZCddKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcoZnJvbnRtYXR0ZXJbJ21hcmtkb3duYnJhaW4taWQnXSkudHJpbSgpO1xuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gWUFNTCBwYXJzZSBlcnJvciwgd2lsbCBnZW5lcmF0ZSBuZXcgSURcbiAgICB9XG4gIH1cblxuICAvLyBTdGVwIDM6IE5vIGV4aXN0aW5nIElELCBnZW5lcmF0ZSBhIG5ldyBvbmUgYW5kIHdyaXRlIGl0IHVzaW5nIHByb2Nlc3NGcm9udE1hdHRlclxuICBjb25zdCBuZXdJZCA9IGNyeXB0by5yYW5kb21VVUlEKCk7XG5cbiAgYXdhaXQgYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihmaWxlLCAoZnJvbnRtYXR0ZXIpID0+IHtcbiAgICBmcm9udG1hdHRlclsnbWFya2Rvd25icmFpbi1pZCddID0gbmV3SWQ7XG4gIH0pO1xuXG4gIHJldHVybiBuZXdJZDtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQWtHOzs7QUNBbEcsc0JBQXNDO0FBa0J0QyxlQUFzQixvQkFDcEIsTUFDQSxTQUNBLEtBQ2lCO0FBdEJuQjtBQXdCRSxRQUFNLFFBQVEsSUFBSSxjQUFjLGFBQWEsSUFBSTtBQUNqRCxPQUFJLG9DQUFPLGdCQUFQLG1CQUFxQixxQkFBcUI7QUFDNUMsV0FBTyxPQUFPLE1BQU0sWUFBWSxrQkFBa0IsQ0FBQyxFQUFFLEtBQUs7QUFBQSxFQUM1RDtBQUlBLFFBQU0sY0FBYyxNQUFNLElBQUksTUFBTSxLQUFLLElBQUk7QUFDN0MsUUFBTSxnQkFBZ0IsZUFBZTtBQUVyQyxRQUFNLG1CQUFtQixjQUFjLE1BQU0sdUJBQXVCO0FBQ3BFLE1BQUksa0JBQWtCO0FBQ3BCLFFBQUk7QUFDRixZQUFNLGtCQUFjLDJCQUFVLGlCQUFpQixDQUFDLENBQUM7QUFDakQsVUFBSSwyQ0FBYyxxQkFBcUI7QUFDckMsZUFBTyxPQUFPLFlBQVksa0JBQWtCLENBQUMsRUFBRSxLQUFLO0FBQUEsTUFDdEQ7QUFBQSxJQUNGLFNBQVE7QUFBQSxJQUVSO0FBQUEsRUFDRjtBQUdBLFFBQU0sUUFBUSxPQUFPLFdBQVc7QUFFaEMsUUFBTSxJQUFJLFlBQVksbUJBQW1CLE1BQU0s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
